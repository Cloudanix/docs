---
slug: function_has_logging_enabled
title: Cloud Functions Logging Should Be Enabled
sidebar_label: Cloud Functions Logging Should Be Enabled
---

### More Info:

DATA_READ, DATA_WRITE and ADMIN_READ logs should be enabled on Cloud Functions

### Risk Level

Medium

### Address

Operational Maturity, Reliability, Security

### Compliance Standards

CISGCP, CBP, GDPR, HIPAA, ISO27001



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Sign in to Google Cloud Console: Open your web browser, navigate to the Google Cloud Console (console.cloud.google.com) and sign in with your Google Cloud account credentials.

2. Navigate to Cloud Functions: From the main dashboard, click on the navigation menu (three horizontal lines in the upper left-hand corner). Scroll down and click on "Cloud Functions" under the "COMPUTE" section.

3. Select a Function: You will see a list of all your Cloud Functions. Click on the name of the function you want to check.

4. Check Logging Configuration: Once you've selected a function, click on the "LOGS" tab. Here, you can see if logging is enabled or not. If logs are being displayed, then logging is enabled. If not, then logging is not enabled for that particular function.

#### Using CLI

1. Install and configure the Google Cloud SDK CLI on your local machine. You can download it from the official Google Cloud website and follow the instructions to set it up.

2. Authenticate your CLI with GCP. You can do this by running the following command in your terminal:
   ```
   gcloud auth login
   ```
   Follow the instructions and log in with your GCP account.

3. List all the projects in your GCP account by running the following command:
   ```
   gcloud projects list
   ```
   This will give you a list of all the projects in your GCP account.

4. For each project, list all the Cloud Functions and check if logging is enabled. You can do this by running the following command for each project:
   ```
   gcloud functions describe FUNCTION_NAME --project=PROJECT_ID
   ```
   Replace `FUNCTION_NAME` with the name of the function and `PROJECT_ID` with the ID of the project. This command will give you a description of the function, including whether logging is enabled or not. If the `logging` field is not present or set to `false`, then logging is not enabled for that function.

#### Using Python

To check if Cloud Functions Logging is enabled in Google Cloud Functions using Python scripts, you can follow these steps:

1. **Install Google Cloud SDK and Python Client for Cloud Functions:**
   Before you start, make sure you have installed the Google Cloud SDK and the Python client for Cloud Functions. You can install the Python client with pip:

   ```bash
   pip install --upgrade google-cloud-functions
   ```

2. **Authenticate your SDK:**
   Use the `gcloud auth application-default login` command to authenticate your SDK.

3. **Use Python Client to List Functions:**
   Use the Python client for Cloud Functions to list all the functions in your project. Here is a sample script:

   ```python
   from google.cloud import functions_v1
   client = functions_v1.CloudFunctionsServiceClient()
   parent = client.location_path('[PROJECT]', '[LOCATION]')

   functions = list(client.list_functions(parent))
   ```

   Replace '[PROJECT]' and '[LOCATION]' with your project ID and location.

4. **Check Logging Configuration:**
   For each function, check the `event_trigger.failure_policy.retry` field. If this field is set to `True`, then logging is enabled. Here is a sample script:

   ```python
   for function in functions:
       if function.event_trigger.failure_policy.retry:
           print(f"Logging is enabled for function: {function.name}")
       else:
           print(f"Logging is NOT enabled for function: {function.name}")
   ```

   This script will print out the names of all functions and whether logging is enabled for each one.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the misconfiguration "Cloud Functions Logging Should Be Enabled" for GCP using GCP console, follow the steps below:

1. Open the Google Cloud Console and select the project where the Cloud Function is located.
2. Navigate to the Cloud Functions page by selecting "Cloud Functions" from the left-hand menu.
3. Select the Cloud Function for which you want to enable logging.
4. Click on the "Edit" button on the top of the page to edit the Cloud Function settings.
5. Scroll down to the "Logging" section and click on the "Enable" button to enable logging for the Cloud Function.
6. Choose the desired log level and log retention period.
7. Click on the "Save" button to save the changes.

Once logging is enabled for the Cloud Function, you will be able to see the logs in the Stackdriver Logging Console.

#### Using CLI

To remediate the misconfiguration of "Cloud Functions Logging Should Be Enabled" in GCP using GCP CLI, follow the below steps:

Step 1: Open the Google Cloud SDK Shell or any other terminal.

Step 2: Run the following command to enable logging for all Cloud Functions in the current project:

```
gcloud functions deploy FUNCTION_NAME --enable-logging
```

Note: Replace `FUNCTION_NAME` with the name of the function for which you want to enable logging.

Step 3: Verify that the logging is enabled for the Cloud Function by running the following command:

```
gcloud functions describe FUNCTION_NAME
```

Note: Replace `FUNCTION_NAME` with the name of the function for which you enabled logging.

Step 4: Look for the `loggingEnabled` field in the output of the above command. It should be set to `true` indicating that logging is enabled for the Cloud Function.

Step 5: Repeat the above steps for all the Cloud Functions in the project to ensure that logging is enabled for all of them.

By following these steps, you can remediate the misconfiguration of "Cloud Functions Logging Should Be Enabled" in GCP using GCP CLI.

#### Using Python

To remediate the misconfiguration "Cloud Functions Logging Should Be Enabled" in GCP using Python, follow these steps:

1. Open the Google Cloud Console and go to the Cloud Functions section.
2. Select the function for which you want to enable logging.
3. Click on the "Edit" button at the top of the page.
4. Scroll down to the "Logging" section and click on the "Enable" button.
5. Select the log level you want to enable (e.g., "Debug", "Info", "Warning", "Error", or "Critical").
6. Click on the "Save" button to save the changes.

Alternatively, you can use the gcloud command-line tool to enable logging for the function. Here's an example command:

```
gcloud functions update FUNCTION_NAME --log-http --verbosity=debug
```

Replace `FUNCTION_NAME` with the name of your function. The `--log-http` flag enables HTTP request logging, and the `--verbosity` flag sets the log level to "debug". You can change the log level as needed.

Once you've enabled logging for the function, you can view the logs in the Cloud Logging section of the Google Cloud Console.


### Additional Reading:

- [https://cloud.google.com/functions/docs/monitoring](https://cloud.google.com/functions/docs/monitoring) 


</Tab>
</Tabs>