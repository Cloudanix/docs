---
slug: configured_sinks
title: Sinks Should Be Configured For Log Entries
sidebar_label: Sinks Should Be Configured For Log Entries
---

### More Info:

Ensure that sinks are configured for all log entries.

### Risk Level

Medium

### Address

Security

### Compliance Standards

CISGCP, CBP, HIPAA, ISO27001
### Remediation

#### Using Console

To remediate the misconfiguration "Sinks Should Be Configured For Log Entries" in GCP using the GCP console, you can follow the below steps:

1. Login to the GCP console.
2. Navigate to the Logging section by clicking on the Navigation menu on the top left corner and selecting "Logging" under "Operations".
3. In the Logging section, click on the "Sinks" tab on the left-hand side menu.
4. You will see a list of sinks that are currently configured. If there are no sinks, click on the "+ Create Sink" button to create a new sink.
5. In the "Create Sink" page, provide a name for the sink and select the destination where you want the logs to be exported. You can choose from various GCP services such as Cloud Storage, BigQuery, Pub/Sub, etc.
6. Under the "Filter" section, select the log entries that you want to export. You can choose from various filter options such as severity, log name, resource type, etc.
7. Click on the "Create Sink" button to create the sink.
8. Once the sink is created, you can verify that the logs are being exported by checking the destination service that you selected in step 5.

By following these steps, you can remediate the misconfiguration "Sinks Should Be Configured For Log Entries" in GCP using the GCP console.

#### Using CLI

To remediate the misconfiguration "Sinks Should Be Configured For Log Entries" in GCP using GCP CLI, follow the below steps:

1. Open the Cloud Shell from the GCP console.

2. Run the following command to list all the sinks currently configured in the project:

   ```
   gcloud logging sinks list
   ```

3. Identify the sink that needs to be configured for log entries.

4. Run the following command to update the sink with the required configuration:

   ```
   gcloud logging sinks update [SINK_NAME] --include-children --log-filter=<LOG_FILTER> --destination=<DESTINATION>
   ```

   Replace `[SINK_NAME]` with the name of the sink that needs to be updated. Replace `<LOG_FILTER>` with the filter that specifies the log entries that should be included in the sink. Replace `<DESTINATION>` with the name of the destination where the logs should be exported.

5. Verify that the sink has been updated by running the following command:

   ```
   gcloud logging sinks describe [SINK_NAME]
   ```

   This command should display the updated configuration for the sink.

6. Repeat steps 4 and 5 for all the sinks that need to be configured for log entries.

By following the above steps, you can remediate the misconfiguration "Sinks Should Be Configured For Log Entries" in GCP using GCP CLI.

#### Using Python

To remediate the misconfiguration "Sinks should be configured for log entries" in GCP using Python, follow the steps below:

1. Install the necessary libraries:

```
pip install google-cloud-logging
```

2. Import the required libraries:

```python
from google.cloud import logging
from google.cloud.logging.resource import Resource
```

3. Initialize the Logging client:

```python
client = logging.Client()
```

4. Get the list of all the sinks that are present in the project:

```python
sinks = client.list_sinks()
```

5. For each sink, check if it is configured for log entries:

```python
for sink in sinks:
    if sink.filter_ == "":
        sink.filter_ = "logName:projects/{project_id}/logs/*".format(project_id=client.project)
        sink.update()
```

6. The code above will update the sink filter to include all log entries in the project. You can customize the filter to your specific needs.

7. Save the Python file and run it to remediate the misconfiguration.

Note: Make sure you have the necessary permissions to update the sinks in the project.



