

<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to the Google Cloud Platform Console: Open your web browser, navigate to the Google Cloud Platform Console (console.cloud.google.com), and sign in with your Google account credentials.

2. Navigate to the Load Balancing page: From the main navigation menu, select "Networking" and then "Load balancing". This will take you to the Load Balancing page where you can see all your load balancers.

3. Check the Backend Services: On the Load Balancing page, click on the name of the load balancer you want to check. This will take you to the load balancer's details page. Here, click on the "Backend configuration" tab to view the backend services associated with the load balancer.

4. Check the CDN Status: For each backend service, check the "Cloud CDN" column. If the status is "Off", then the Cloud CDN is not enabled for that backend service. If the status is "On", then the Cloud CDN is enabled.

#### Using CLI

1. Install and configure the Google Cloud SDK CLI on your local machine. You can download it from the official Google Cloud website and follow the instructions to set it up.

2. Authenticate your GCP account using the following command. This will open a new window in your web browser asking you to log in to your Google Cloud account.
   ```
   gcloud auth login
   ```

3. Set your project ID to the project you want to inspect. Replace 'your-project-id' with the ID of your project.
   ```
   gcloud config set project your-project-id
   ```

4. Run the following command to list all the backend services in your project and check if the Cloud CDN is enabled or not. The 'enableCDN' field in the output indicates whether the Cloud CDN is enabled (true) or not (false).
   ```
   gcloud compute backend-services list --format="table(name, enableCDN)"
   ```
   If the 'enableCDN' field is false for any backend service, it means that the Cloud CDN is not enabled for that service.

#### Using Python

1. Install the necessary Python libraries: Before you can start, you need to install the Google Cloud SDK and the Python client library for Google Cloud. You can do this using pip:

   ```bash
   pip install --upgrade google-cloud-sdk google-cloud
   ```

2. Authenticate your SDK: Use the `gcloud auth application-default login` command to authenticate your SDK. This will open a new browser window where you can log in with your Google Cloud credentials.

3. Write a Python script to list all backend services and check if Cloud CDN is enabled:

   ```python
   from google.cloud import compute_v1

   def list_backend_services():
       client = compute_v1.BackendServicesClient()
       project = 'your-project-id'  # replace with your project ID

       # List all backend services
       response = client.list(project=project)

       for backend_service in response:
           print(f"Backend service: {backend_service.name}")
           print(f"Cloud CDN enabled: {backend_service.enable_cdn}")

   if __name__ == "__main__":
       list_backend_services()
   ```
   This script will print the name of each backend service and whether Cloud CDN is enabled for it.

4. Run the script: Save your script to a file, for example `check_cdn.py`, and run it using Python:

   ```bash
   python check_cdn.py
   ```
   
   This will print a list of all backend services in your project and whether Cloud CDN is enabled for them. If Cloud CDN is not enabled for a backend service, this could be a misconfiguration.

</Tab>

<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the misconfiguration of "Cloud CDN Global Backend Services CDN Should Be Enabled" for GCP using GCP console, follow the below steps:

1. Open the Google Cloud Console and select the project where the misconfiguration exists.
2. In the left navigation menu, click on "Network services" and then select "Cloud CDN".
3. On the Cloud CDN page, click on the "Create" button.
4. In the "Create a new Cloud CDN" page, select the backend service that you want to enable CDN for.
5. Under the "Cache Key Policy" section, select "Include Host" and "Include Protocol".
6. Under the "Backend Buckets" section, select the backend bucket that you want to use as a source for the CDN.
7. Under the "Frontend Configurations" section, select the protocol and port that you want to use for the CDN.
8. Click on the "Create" button to create the CDN.

Once the CDN is created, it will take some time to propagate across all the CDN edge locations. You can verify the status of the CDN by checking the "Status" column on the Cloud CDN page.

#### Using CLI

To remediate the misconfiguration "Cloud CDN Global Backend Services CDN Should Be Enabled" in GCP using GCP CLI, you can follow the below steps:

Step 1: Open the GCP console and navigate to the Cloud Console.

Step 2: Click on the Navigation menu and select "Cloud CDN".

Step 3: Select the "Global Backend Services" tab.

Step 4: Choose the backend service that you want to enable CDN for.

Step 5: Click on the "Edit" button on the top of the page.

Step 6: Scroll down to the "Cloud CDN" section.

Step 7: Toggle the button to enable the Cloud CDN.

Step 8: Click on the "Save" button to save the changes.

Step 9: Verify the changes by checking the status of the Cloud CDN.

You can also use the GCP CLI to enable the Cloud CDN for a backend service. Here are the steps:

Step 1: Open the GCP CLI and authenticate using your credentials.

Step 2: Run the following command to enable the Cloud CDN for a backend service:

```
gcloud compute backend-services update [BACKEND_SERVICE_NAME] --enable-cdn
```

Replace [BACKEND_SERVICE_NAME] with the name of your backend service.

Step 3: Verify the changes by checking the status of the Cloud CDN.

By following these steps, you can remediate the misconfiguration "Cloud CDN Global Backend Services CDN Should Be Enabled" in GCP using GCP CLI.

#### Using Python

To remediate the misconfiguration of Cloud CDN Global Backend Services CDN not being enabled in GCP using Python, you can follow the below steps:

1. First, you need to enable the Cloud CDN API in your GCP project. You can do this by navigating to the Cloud Console, selecting your project, and then navigating to APIs & Services > Dashboard. From there, click on "Enable APIs and Services" and search for "Cloud CDN API". Enable the API and wait for it to be enabled.

2. Once the API is enabled, you can use the Google Cloud Client Library for Python to programmatically create a backend service with Cloud CDN enabled. Install the library by running the following command in your terminal:

```python
pip install --upgrade google-cloud-storage
```

3. Next, you need to create a backend service using the Cloud CDN API. You can use the following Python code to create a backend service:

```python
from google.cloud import compute_v1

def create_backend_service(project_id, backend_service_name):
    client = compute_v1.BackendServicesClient()
    project = f"projects/{project_id}"
    backend_service_resource = {
        "name": backend_service_name,
        "cdn_policy": {
            "cache_key_policy": {
                "include_protocol": True,
                "include_query_string": True,
                "query_string_blacklist": ["*"]
            }
        }
    }
    response = client.insert(project=project, backend_service_resource=backend_service_resource)
    print(f"Backend service created: {response}")
```

4. Finally, you can call the `create_backend_service` function with your GCP project ID and the name of your new backend service:

```python
project_id = "your-project-id"
backend_service_name = "your-backend-service-name"
create_backend_service(project_id, backend_service_name)
```

This will create a new backend service with Cloud CDN enabled, and you can use it to serve content from your GCP project.


</Tab>
</Tabs>