---
slug: k8s_web_ui_disabled
title: Ensure Kubernetes Web UI Is Disabled
sidebar_label: Ensure Kubernetes Web UI Is Disabled
---

### More Info:

The Kubernetes Web UI (Dashboard) has been a historical source of vulnerability and should only be deployed when necessary.

### Risk Level

Medium

### Address

Security, Reliability, Operational Excellence, Performance Efficiency

### Compliance Standards

CISGKE



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to the Google Cloud Platform Console: Open your preferred web browser, navigate to the Google Cloud Platform Console (https://console.cloud.google.com/), and sign in with your Google account credentials.

2. Select your GCP Project: From the GCP Console Dashboard, select your GCP project from the project drop-down list at the top of the page.

3. Navigate to Kubernetes Engine: From the left-hand side menu, click on "Kubernetes Engine" to navigate to the Kubernetes clusters dashboard.

4. Check Kubernetes Web UI Status: For each Kubernetes cluster listed in the dashboard, click on the cluster name to open its details page. Look for the "Kubernetes Dashboard" section. If the status is "Enabled", then the Kubernetes Web UI is not disabled for the selected cluster. Repeat this step for each Kubernetes cluster within your GCP project.

#### Using CLI

1. First, you need to install and configure the Google Cloud SDK (gcloud) on your local machine. You can download it from the official Google Cloud website and follow the instructions to install it.

2. Once the SDK is installed, authenticate your account by running the following command in your terminal:
   ```
   gcloud auth login
   ```
   Follow the prompts to log in with your Google account.

3. After you're authenticated, you can list all the clusters in your project by running the following command:
   ```
   gcloud container clusters list
   ```
   This will return a list of all the clusters in your project, along with their details.

4. To check if the Kubernetes Web UI (Dashboard) is disabled for a specific cluster, run the following command:
   ```
   gcloud container clusters describe [CLUSTER_NAME] --format=json | grep -i "dashboard"
   ```
   Replace [CLUSTER_NAME] with the name of your cluster. This command will return the configuration of the cluster in JSON format and then search for the word "dashboard" in the output. If the Dashboard is disabled, the output should not contain any lines related to the Dashboard. If the Dashboard is enabled, you will see lines related to it in the output.

#### Using Python

1. Import the necessary libraries in Python. We will be using the Kubernetes client library for Python. You can install it using pip:

```python
pip install kubernetes
```

2. Connect to the Kubernetes cluster. You will need to authenticate with the cluster first. This can be done using the `load_kube_config` function if you are running the script from a machine that has access to the cluster.

```python
from kubernetes import client, config

# Load the kube config file
config.load_kube_config()
```

3. Once connected, you can list all the services in the cluster. The Kubernetes Web UI (also known as Kubernetes Dashboard) is usually deployed as a service in the `kube-system` namespace.

```python
v1 = client.CoreV1Api()
services = v1.list_namespaced_service(namespace='kube-system')

# Check if Kubernetes Dashboard is enabled
dashboard_enabled = any(service.metadata.name == 'kubernetes-dashboard' for service in services.items)
print('Kubernetes Dashboard is enabled: ', dashboard_enabled)
```

4. The above script will print `True` if the Kubernetes Dashboard is enabled, and `False` otherwise. This is a simple way to check if the Kubernetes Web UI is disabled. However, it's important to note that the Kubernetes Dashboard might be deployed under a different name or namespace in your cluster, so you might need to adjust the script accordingly.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the misconfiguration of enabling Kubernetes Web UI on GCP, you can follow the below steps using the GCP console:

1. Open the GCP console and navigate to the Kubernetes Engine page.
2. Select the cluster that you want to remediate.
3. Click on the "Actions" drop-down menu and select "Edit".
4. Scroll down to the "Add-ons" section and click on the "Disabled" radio button for the "Kubernetes Dashboard" option.
5. Click on the "Save" button at the bottom of the page to save the changes.
6. Wait for a few minutes for the changes to take effect.

By following these steps, you will have successfully disabled the Kubernetes Web UI on your GCP cluster, thus remediating the misconfiguration.

#### Using CLI

To remediate the misconfiguration of ensuring Kubernetes Web UI is disabled in GCP, you can follow the below steps using GCP CLI:

1. Open the Cloud Shell in the GCP Console.

2. Run the following command to get the status of the Kubernetes Web UI:
   
   ```
   kubectl get deployments -n kube-system
   ```
   
   This command will list all the deployments in the `kube-system` namespace.

3. Check if `kubernetes-dashboard` deployment is present in the output of the above command. If it is present, then the Kubernetes Web UI is enabled.

4. Run the following command to delete the `kubernetes-dashboard` deployment:
   
   ```
   kubectl delete deployment kubernetes-dashboard -n kube-system
   ```
   
   This command will delete the `kubernetes-dashboard` deployment from the `kube-system` namespace.

5. Verify that the `kubernetes-dashboard` deployment is deleted by running the following command:
   
   ```
   kubectl get deployments -n kube-system
   ```
   
   This command should not list the `kubernetes-dashboard` deployment.

6. Run the following command to delete the Kubernetes Web UI service:
   
   ```
   kubectl delete service kubernetes-dashboard -n kube-system
   ```
   
   This command will delete the Kubernetes Web UI service from the `kube-system` namespace.

7. Verify that the Kubernetes Web UI service is deleted by running the following command:
   
   ```
   kubectl get services -n kube-system
   ```
   
   This command should not list the `kubernetes-dashboard` service.

8. Finally, run the following command to verify that the Kubernetes Web UI is disabled:
   
   ```
   kubectl cluster-info
   ```
   
   This command should not list the Kubernetes Web UI endpoint.

By following the above steps, you can remediate the misconfiguration of ensuring Kubernetes Web UI is disabled in GCP using GCP CLI.

#### Using Python

To remediate the misconfiguration "Ensure Kubernetes Web UI Is Disabled" for GCP using python, you can follow these steps:

1. Open the Cloud Shell in your GCP console.

2. Install the required Python libraries: `google-auth` and `google-cloud-resource-manager`.

3. Set the project ID where the Kubernetes cluster is running: `PROJECT_ID=<your-project-id>`

4. Set the name of the Kubernetes cluster: `CLUSTER_NAME=<your-cluster-name>`

5. Run the following Python code to disable Kubernetes Web UI:

```python
from google.cloud import resource_manager
from google.oauth2 import service_account

# Set the path to your service account key file
KEY_PATH = '/path/to/your/key.json'

# Authenticate with your GCP account
credentials = service_account.Credentials.from_service_account_file(KEY_PATH)
client = resource_manager.Client(credentials=credentials)

# Find the Kubernetes cluster
for cluster in client.list_clusters(project=PROJECT_ID):
    if cluster.name == CLUSTER_NAME:
        # Disable Kubernetes Web UI
        cluster.master_auth.disabled = True
        client.update_cluster(cluster)
        print(f"Kubernetes Web UI is now disabled for cluster {CLUSTER_NAME}")
        break
else:
    print(f"Kubernetes cluster {CLUSTER_NAME} not found in project {PROJECT_ID}")
```

Note: Make sure to replace `<your-project-id>`, `<your-cluster-name>`, and `KEY_PATH` with your own values before running the code.

6. Verify that Kubernetes Web UI is disabled by accessing the Kubernetes dashboard URL. You should see an error message indicating that the dashboard is not available.

By following these steps, you should be able to remediate the misconfiguration "Ensure Kubernetes Web UI Is Disabled" for GCP using python.


### Additional Reading:

- [https://cloud.google.com/kubernetes-engine/docs/how-to/hardening-your-cluster#disable_kubernetes_dashboard](https://cloud.google.com/kubernetes-engine/docs/how-to/hardening-your-cluster#disable_kubernetes_dashboard) 


</Tab>
</Tabs>