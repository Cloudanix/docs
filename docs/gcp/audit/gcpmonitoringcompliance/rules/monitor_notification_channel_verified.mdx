---
slug: monitor_notification_channel_verified
title: Cloud Monitoring Notification Channels Should Be Verified
sidebar_label: Cloud Monitoring Notification Channels Should Be Verified
---

### More Info:

Ensure Cloud Monitoring notification channels are verified.

### Risk Level

Low

### Address

Operational Maturity, Security

### Compliance Standards

CBP


<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to the Google Cloud Platform Console: Open your web browser, navigate to the Google Cloud Platform (GCP) Console (https://console.cloud.google.com/) and sign in with your GCP account. If you don't have an account, you will need to create one.

2. Navigate to Monitoring: Once you are logged in, navigate to the Monitoring service. You can do this by clicking on the navigation menu (hamburger icon) in the top left corner of the console, then scroll down and click on "Monitoring" under the "Operations" section.

3. Access Notification Channels: In the Monitoring dashboard, click on "Alerting" in the left-hand menu, then select "Notification Channels". This will display a list of all the notification channels configured for your GCP project.

4. Check Verification Status: In the list of notification channels, check the "Status" column for each channel. If a channel is not verified, it will show "Not verified" in this column. This indicates a misconfiguration, as all notification channels should be verified to ensure they are correctly set up to receive alerts.

#### Using CLI

1. Install and configure Google Cloud SDK: Before you can use the GCP CLI, you need to install the Google Cloud SDK on your local machine. You can download it from the official Google Cloud website. After installation, authenticate your account using the command `gcloud auth login`.

2. List all the projects: Use the command `gcloud projects list` to get a list of all the projects in your GCP account. Note down the PROJECT_ID of the project you want to check.

3. Set the project: Use the command `gcloud config set project [PROJECT_ID]` to set the project you want to check as the current project.

4. Check the notification channels: Use the command `gcloud alpha monitoring channels list` to get a list of all the notification channels in the current project. Look for channels that have the field `verificationStatus` set to `unverified`. These are the channels that are not verified.

#### Using Python

1. Install Google Cloud SDK and Python Client for Google Cloud Monitoring: Before you can start writing Python scripts to interact with Google Cloud Monitoring, you need to install the Google Cloud SDK and the Python client for Google Cloud Monitoring. You can install the SDK by following the instructions on the Google Cloud SDK page. The Python client can be installed using pip:

   ```
   pip install --upgrade google-cloud-monitoring
   ```

2. Import Required Libraries: Import the necessary libraries into your Python script. You will need the `google.cloud.monitoring_v3` library to interact with Google Cloud Monitoring.

   ```python
   from google.cloud import monitoring_v3
   ```

3. Create a Client: Create a client that you can use to interact with the Google Cloud Monitoring API. You will need to authenticate with your Google Cloud credentials, which you can do by setting the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to the path of your service account key file.

   ```python
   client = monitoring_v3.NotificationChannelServiceClient()
   ```

4. List and Check Notification Channels: Use the client to list all notification channels in your project and check if they are verified. You can do this by calling the `list_notification_channels` method on the client and checking the `verification_status` attribute of each channel.

   ```python
   project_name = client.project_path('your-project-id')
   channels = client.list_notification_channels(project_name)
   for channel in channels:
       if channel.verification_status != monitoring_v3.NotificationChannel.VerificationStatus.VERIFIED:
           print(f'Channel {channel.display_name} is not verified')
   ```

This script will print the names of all notification channels in your project that are not verified. You can modify it to suit your needs, for example by raising an exception or sending an alert if any unverified channels are found.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the misconfiguration "Cloud Monitoring Notification Channels Should Be Verified" in GCP using GCP console, please follow the below steps:

1. Login to the GCP console (https://console.cloud.google.com/).
2. Navigate to the "Monitoring" section from the left-hand side menu.
3. Click on the "Notification channels" option under "Alerting" section.
4. Verify that all the notification channels listed are verified. If there are any unverified notification channels, follow the below steps:
   - Click on the unverified notification channel.
   - Click on the "Verify" button.
   - Follow the instructions to verify the notification channel.
5. Once all the notification channels are verified, the misconfiguration "Cloud Monitoring Notification Channels Should Be Verified" is remediated.

Note: It is recommended to periodically verify the notification channels to ensure that they are working as expected.

#### Using CLI

To remediate the misconfiguration of unverified notification channels in GCP using GCP CLI, follow the below steps:

Step 1: Open the Google Cloud Console and navigate to the Cloud Monitoring page.

Step 2: Click on the "Notification Channels" tab.

Step 3: Identify the notification channels that are unverified.

Step 4: Open the Google Cloud Shell.

Step 5: Run the following command to verify a notification channel:

```
gcloud alpha monitoring channels verify [CHANNEL_ID]
```

Replace [CHANNEL_ID] with the ID of the notification channel that you want to verify.

Step 6: Repeat step 5 for all the unverified notification channels.

Step 7: Verify that all the notification channels are now verified by running the following command:

```
gcloud alpha monitoring channels list
```

This will list all the notification channels in your GCP project along with their verification status.

Step 8: Once all the notification channels are verified, the misconfiguration is remediated.

Note: You can also verify notification channels using the GCP Console. To do so, open the Cloud Monitoring page, click on the "Notification Channels" tab, select an unverified channel, and click on the "Verify" button.

#### Using Python

To remediate the "Cloud Monitoring Notification Channels Should Be Verified" misconfiguration in GCP using Python, you can follow the below steps:

Step 1: Install the required Python libraries

```
pip install google-auth google-auth-oauthlib google-auth-httplib2 google-cloud-monitoring google-cloud-logging
```

Step 2: Authenticate with GCP using Python

```
from google.oauth2 import service_account
from google.cloud import monitoring_v3

# Replace [PATH_TO_SERVICE_ACCOUNT_FILE] with the path to the service account file.
credentials = service_account.Credentials.from_service_account_file('[PATH_TO_SERVICE_ACCOUNT_FILE]')

# Create a client object for the Google Cloud Monitoring API
client = monitoring_v3.MetricServiceClient(credentials=credentials)
```

Step 3: Get the list of notification channels

```
from google.cloud import monitoring_v3

# Replace [PROJECT_ID] with your GCP project ID.
project_name = f"projects/{[PROJECT_ID]}"

# Get the list of notification channels
channels = client.list_notification_channels(project_name)
for channel in channels:
    print(channel)
```

Step 4: Verify each notification channel

```
from google.cloud import monitoring_v3

# Replace [PROJECT_ID] with your GCP project ID.
project_name = f"projects/{[PROJECT_ID]}"

# Get the list of notification channels
channels = client.list_notification_channels(project_name)

for channel in channels:
    if not channel.verified:
        # Verify the notification channel
        client.verify_notification_channel(channel.name)
        print(f"Verified notification channel: {channel.name}")
```

By following these steps, you can remediate the "Cloud Monitoring Notification Channels Should Be Verified" misconfiguration in GCP using Python.




</Tab>
</Tabs>