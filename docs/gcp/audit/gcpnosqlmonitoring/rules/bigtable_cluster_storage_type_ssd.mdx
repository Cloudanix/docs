---
slug: bigtable_cluster_storage_type_ssd
title: Bigtable Cluster Should Use SSD Storage Type
sidebar_label: Bigtable Cluster Should Use SSD Storage Type
---

### More Info:

Ensure that Bigtable clusters use SSD for best performance.

### Risk Level

Medium

### Address

Operational Maturity, Performance Efficiency

### Compliance Standards

CBP


### Triage and Remediation
<Tabs>
<Tab title='Remediation'>
### Remediation

<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
To remediate the misconfiguration in GCP console, follow these steps:

1. Open the GCP console and select the project where the Bigtable cluster is located.

2. In the left-hand menu, select "Bigtable."

3. Select the Bigtable instance that you want to remediate.

4. In the "Instance details" page, select the "Storage" tab.

5. In the "Storage" tab, you will see a list of storage types available for your Bigtable cluster. Select "SSD" as the storage type.

6. Click "Save" to apply the changes.

7. Wait for the changes to be applied. This may take some time depending on the size of your cluster.

8. Once the changes are applied, your Bigtable cluster will be using SSD storage type.

Note: You can also use the gcloud command-line tool to remediate this misconfiguration. The command to use is:

```
gcloud bigtable instances update [INSTANCE_ID] --storage-type=SSD
```

Replace [INSTANCE_ID] with the ID of your Bigtable instance.

#
</Accordion>

<Accordion title='Using CLI'>
To remediate the misconfiguration "Bigtable Cluster Should Use SSD Storage Type" in GCP using GCP CLI, you can follow the below steps:

1. Open the Google Cloud Shell or any terminal with GCP CLI installed.

2. Run the following command to get the list of Bigtable instances in your project:

   ```
   gcloud bigtable instances list
   ```

3. Identify the instance that needs to be updated and note down the instance ID.

4. Run the following command to update the instance with SSD storage type:

   ```
   gcloud beta bigtable instances update <INSTANCE_ID> --storage-type ssd
   ```

   Replace `<INSTANCE_ID>` with the actual instance ID noted in step 3.

5. Verify the storage type of the instance by running the following command:

   ```
   gcloud beta bigtable instances describe <INSTANCE_ID> --format="value(storageType)"
   ```

   This should return `SSD` as the storage type of the instance.

By following the above steps, you can remediate the misconfiguration "Bigtable Cluster Should Use SSD Storage Type" in GCP using GCP CLI.
</Accordion>

<Accordion title='Using Python'>
To remediate this misconfiguration in GCP, you can use the following steps using Python:

1. Install the `google-cloud-bigtable` library using pip:

   ```
   pip install google-cloud-bigtable
   ```

2. Import the necessary libraries:

   ```python
   from google.cloud import bigtable
   from google.cloud.bigtable import enums
   ```

3. Set the project ID and instance ID:

   ```python
   project_id = 'your-project-id'
   instance_id = 'your-instance-id'
   ```

4. Connect to the Bigtable instance:

   ```python
   client = bigtable.Client(project=project_id)
   instance = client.instance(instance_id)
   ```

5. Get the list of clusters in the instance:

   ```python
   clusters = instance.list_clusters()
   ```

6. Loop through each cluster and check if it is using SSD storage:

   ```python
   for cluster in clusters:
       if cluster.storage_type != enums.StorageType.SSD:
           # Remediate the misconfiguration by updating the cluster to use SSD storage
           cluster.storage_type = enums.StorageType.SSD
           cluster.update()
   ```

   This code checks if the storage type of the cluster is not SSD, and if so, updates the storage type to SSD.

7. Verify that the misconfiguration has been remediated by checking the storage type of the cluster:

   ```python
   print(cluster.storage_type)
   ```

   This should output `SSD`.

Note: You will need to have the necessary permissions to make changes to the Bigtable instance in order to remediate this misconfiguration.
</Accordion>

</AccordionGroup>
</Tab>
</Tabs>
### Additional Reading:

- [https://cloud.google.com/bigtable/docs/instances-clusters-nodes#storage-types](https://cloud.google.com/bigtable/docs/instances-clusters-nodes#storage-types) 

