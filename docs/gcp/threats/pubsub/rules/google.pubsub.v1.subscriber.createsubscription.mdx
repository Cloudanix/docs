--- 
slug: gcp_rt_pubsub_subscription_changes
eventname: google.pubsub.v1.Subscriber.CreateSubscription
title: google.pubsub.v1.Subscriber.CreateSubscription
sidebar_label: google.pubsub.v1.Subscriber.CreateSubscription
---
                       
### Event Information

- The google.pubsub.v1.Subscriber.CreateSubscription event in GCP for Pubsub indicates the creation of a new subscription within a Pubsub topic.
- This event signifies that a subscriber has been created to receive messages published to the specified topic.
- It is important to monitor this event as it allows you to track the creation of new subscriptions and ensure that the necessary permissions and configurations are in place for message delivery.


### Examples

1. Unauthorized access: If the security of google.pubsub.v1.Subscriber.CreateSubscription is impacted, it could potentially allow unauthorized users to create subscriptions to Pub/Sub topics. This could lead to unauthorized access to sensitive data or the ability to receive and process messages intended for other subscribers.

2. Data leakage: A security impact could result in the creation of subscriptions with incorrect or unintended permissions. This could lead to data leakage, where sensitive information is exposed to unauthorized parties who have access to the newly created subscriptions.

3. Denial of Service (DoS): If the security of google.pubsub.v1.Subscriber.CreateSubscription is compromised, it could be exploited to create a large number of subscriptions, overwhelming the Pub/Sub system and causing a denial of service. This could disrupt the normal functioning of the system and impact the availability of message delivery to legitimate subscribers.

### Remediation

#### Using Console

1. Unauthorized access:
- Regularly review and monitor the permissions and access controls for the google.pubsub.v1.Subscriber.CreateSubscription API in the GCP console.
- Ensure that only authorized users or service accounts have the necessary permissions to create subscriptions to Pub/Sub topics.
- Implement strong authentication mechanisms, such as multi-factor authentication, to prevent unauthorized access to the GCP console.

2. Data leakage:
- Regularly audit and review the permissions assigned to subscriptions created using the google.pubsub.v1.Subscriber.CreateSubscription API in the GCP console.
- Ensure that subscriptions are created with the correct and intended permissions, limiting access to sensitive data.
- Implement least privilege principles, granting only the necessary permissions to subscriptions based on the specific requirements of the subscribers.

3. Denial of Service (DoS):
- Monitor the usage and activity of the google.pubsub.v1.Subscriber.CreateSubscription API in the GCP console to detect any abnormal or excessive subscription creation.
- Implement rate limiting or quota restrictions on the usage of the API to prevent the creation of a large number of subscriptions within a short period of time.
- Implement automated monitoring and alerting systems to quickly identify and mitigate any potential DoS attacks targeting the Pub/Sub system.

#### Using CLI

1. Unauthorized access:
- Monitor and review the permissions and access controls for the `google.pubsub.v1.Subscriber.CreateSubscription` API.
- Regularly audit and review the created subscriptions to ensure they are authorized and intended.

2. Data leakage:
- Implement strict permission controls for creating subscriptions using the `google.pubsub.v1.Subscriber.CreateSubscription` API.
- Regularly review and validate the permissions of existing subscriptions to prevent unintended access.

3. Denial of Service (DoS):
- Implement rate limiting or quota restrictions on the usage of the `google.pubsub.v1.Subscriber.CreateSubscription` API to prevent abuse.
- Monitor and analyze the usage patterns of the API to detect any abnormal spikes in subscription creation and take appropriate action.

#### Using Python

1. Unauthorized access:
- Regularly review and monitor the permissions and access controls for the google.pubsub.v1.Subscriber.CreateSubscription API.
- Implement strong authentication mechanisms, such as using service accounts with limited privileges and enforcing multi-factor authentication.
- Utilize Cloud Identity and Access Management (IAM) policies to restrict access to the Pub/Sub topics and ensure that only authorized users or service accounts can create subscriptions.

2. Data leakage:
- Implement a robust access control mechanism to ensure that only authorized users or service accounts can create subscriptions.
- Regularly audit and review the permissions assigned to subscriptions to identify any incorrect or unintended permissions.
- Utilize Cloud IAM policies to enforce least privilege access and restrict permissions to only what is necessary for each subscription.

3. Denial of Service (DoS):
- Implement rate limiting and quota restrictions to prevent the creation of a large number of subscriptions within a short period of time.
- Monitor the usage and performance of the Pub/Sub system to detect any abnormal spikes in subscription creation.
- Implement automated monitoring and alerting to notify administrators of any suspicious activity or potential DoS attacks.

Python script example for creating a subscription in GCP Pub/Sub:

```python
from google.cloud import pubsub_v1

project_id = "your-project-id"
topic_id = "your-topic-id"
subscription_id = "your-subscription-id"

subscriber = pubsub_v1.SubscriberClient()
topic_path = subscriber.topic_path(project_id, topic_id)
subscription_path = subscriber.subscription_path(project_id, subscription_id)

subscription = subscriber.create_subscription(subscription_path, topic_path)

print(f"Subscription created: {subscription.name}")
```

Note: Make sure to install the `google-cloud-pubsub` library before running the script.


 