--- 
slug: gcp_rt_vpc_httpsproxy_changes
eventname: v1.compute.targetHttpsProxies.insert
title: v1.compute.targetHttpsProxies.insert
sidebar_label: v1.compute.targetHttpsProxies.insert
---
                       
### Event Information

#### Meaning

1. The v1.compute.targetHttpsProxies.insert event in GCP for Compute refers to the creation of a target HTTPS proxy. 
2. This event occurs when a user or an automated process initiates the creation of a target HTTPS proxy in GCP's Compute Engine. 
3. Target HTTPS proxies are used to load balance HTTPS traffic to backend services, allowing for secure communication between clients and the services running in GCP.

### Remediation

#### Using Console

- Example: If security is impacted with v1.compute.targetHttpsProxies.insert in GCP for Compute, it means that an unauthorized entity is able to insert or create a target HTTPS proxy, potentially leading to unauthorized access or data breaches.

To remediate this issue for GCP Compute using the GCP console, follow these step-by-step instructions:

1. Identify the affected target HTTPS proxy: 
   - Go to the GCP console and navigate to the Compute Engine section.
   - Select the appropriate project and region where the target HTTPS proxy is located.
   - Click on "Load Balancing" in the left-hand menu and then select "Target HTTPS proxies".
   - Look for any suspicious or unauthorized target HTTPS proxies that have been inserted.

2. Disable or delete the unauthorized target HTTPS proxy:
   - Select the unauthorized target HTTPS proxy from the list.
   - Click on the "Edit" button to modify the proxy settings.
   - Disable the proxy by unchecking the "Enable" checkbox or delete it entirely by clicking on the "Delete" button.
   - Confirm the action when prompted.

3. Review and enhance security measures:
   - Conduct a thorough review of your overall security posture, including access controls, firewall rules, and user permissions.
   - Ensure that only authorized individuals have the necessary permissions to create or modify target HTTPS proxies.
   - Regularly monitor and audit your target HTTPS proxies to detect any unauthorized changes or suspicious activities.
   - Consider implementing additional security measures such as multi-factor authentication and intrusion detection systems to further protect your GCP Compute environment.

#### Using CLI

1. Impact on security: The v1.compute.targetHttpsProxies.insert API in GCP Compute allows an attacker to potentially insert a malicious target HTTPS proxy, which can lead to unauthorized access or interception of sensitive data.

2. Remediation using GCP CLI: To remediate this security issue in GCP Compute using GCP CLI, follow these steps:

   - Step 1: Identify the affected target HTTPS proxy by listing all the target HTTPS proxies in your project using the following command:
     ```
     gcloud compute target-https-proxies list
     ```

   - Step 2: Delete the affected target HTTPS proxy using the following command:
     ```
     gcloud compute target-https-proxies delete [TARGET_HTTPS_PROXY_NAME]
     ```
     Replace `[TARGET_HTTPS_PROXY_NAME]` with the name of the affected target HTTPS proxy.

   - Step 3: Verify that the target HTTPS proxy has been successfully deleted by listing all the target HTTPS proxies again using the command from Step 1.

   - Step 4: If necessary, recreate the target HTTPS proxy with the appropriate configuration to ensure secure access to your resources.

Note: It is recommended to review the access controls and permissions associated with the affected target HTTPS proxy to prevent unauthorized modifications in the future.

#### Using Python

1. Example of security impact with v1.compute.targetHttpsProxies.insert in GCP Compute:
   - If the v1.compute.targetHttpsProxies.insert API call is misconfigured or unauthorized access is granted, it can potentially allow an attacker to insert a malicious target HTTPS proxy. This could lead to unauthorized access to sensitive data, interception of traffic, or even a complete denial of service.

2. Remediation for GCP Compute using Python:
   - To remediate this security issue, you can use the Google Cloud Python Client Library to ensure proper configuration and authorization when making the v1.compute.targetHttpsProxies.insert API call. Here's an example Python script:

```python
from google.cloud import compute_v1

def create_target_https_proxy(project_id, proxy_name, url_map):
    client = compute_v1.TargetHttpsProxiesClient()

    target_https_proxy_resource = {
        "name": proxy_name,
        "url_map": url_map,
    }

    request = client.insert(project=project_id, targetHttpsProxyResource=target_https_proxy_resource)
    response = request.execute()

    print("Target HTTPS proxy created: {}".format(response))

# Usage example
project_id = "your-project-id"
proxy_name = "your-proxy-name"
url_map = "projects/{}/global/urlMaps/your-url-map".format(project_id)

create_target_https_proxy(project_id, proxy_name, url_map)
```

This script uses the `compute_v1.TargetHttpsProxiesClient` class from the Google Cloud Python Client Library to create a target HTTPS proxy. Make sure to replace `"your-project-id"`, `"your-proxy-name"`, and `"your-url-map"` with the appropriate values for your environment.

3. Additional considerations:
   - It's important to follow the principle of least privilege when granting permissions for the service account used by the Python script. Only provide the necessary permissions required for creating target HTTPS proxies.
   - Regularly review and monitor the target HTTPS proxies in your GCP environment to detect any unauthorized or suspicious changes.


 