--- 
slug: gcp_rt_vpc_firewall_changes
eventname: v1.compute.firewalls.delete
title: v1.compute.firewalls.delete
sidebar_label: v1.compute.firewalls.delete
---
                       
### Event Information

#### Meaning

None

### Remediation

#### Using Console

- Example: If security is impacted with v1.compute.firewalls.delete in GCP for Compute, it means that the ability to delete firewall rules for GCP Compute instances can lead to potential security vulnerabilities. An attacker with the necessary permissions could delete critical firewall rules, allowing unauthorized access to the instances.

- Remediation Steps using GCP Console:
  1. Sign in to the GCP Console (console.cloud.google.com) with appropriate credentials.
  2. Navigate to the Compute Engine section by selecting "Compute Engine" from the main menu.
  3. In the left navigation pane, click on "Firewall rules" to access the list of existing firewall rules.
  4. Identify the firewall rule that needs to be protected from deletion.
  5. Click on the checkbox next to the firewall rule to select it.
  6. Click on the "Edit" button at the top of the page to modify the firewall rule.
  7. In the "Firewall rule details" section, scroll down to the "Permissions" section.
  8. Under the "Permissions" section, ensure that the necessary roles and permissions are assigned to restrict the deletion of the firewall rule.
  9. Save the changes by clicking on the "Save" button at the bottom of the page.

Note: It is important to ensure that only authorized users have the necessary permissions to delete firewall rules in order to mitigate the security impact of v1.compute.firewalls.delete event.

#### Using CLI

- Example: If security is impacted with `v1.compute.firewalls.delete` in GCP for Compute, it means that the ability to delete firewall rules for GCP Compute instances is compromised. This can potentially lead to unauthorized access or exposure of resources.

To remediate this issue for GCP Compute using GCP CLI, you can follow these steps:

1. Identify the affected firewall rule(s) that need to be deleted.
   - Run the following command to list all firewall rules in your project:
     ```
     gcloud compute firewall-rules list
     ```

2. Delete the specific firewall rule(s) using the `gcloud` command.
   - Run the following command to delete a firewall rule:
     ```
     gcloud compute firewall-rules delete [FIREWALL_RULE_NAME]
     ```
     Replace `[FIREWALL_RULE_NAME]` with the name of the firewall rule you want to delete.

3. Verify that the firewall rule(s) have been successfully deleted.
   - Run the following command to list all firewall rules again:
     ```
     gcloud compute firewall-rules list
     ```
     Ensure that the deleted firewall rule(s) are no longer present in the list.

Note: Make sure you have the necessary permissions and access to perform these actions.

#### Using Python

- Example: If security is impacted with `v1.compute.firewalls.delete` in GCP for Compute, it means that the ability to delete firewall rules is granted to a user or service account. This can potentially lead to unauthorized removal of important firewall rules, compromising the security of the GCP Compute resources.

- Remediation: To remediate this issue for GCP Compute using Python, you can follow these steps:

  1. Identify the user or service account that has the `v1.compute.firewalls.delete` permission.
  2. Remove the `v1.compute.firewalls.delete` permission from the user or service account.
  3. Implement a process to regularly review and audit the firewall rules to ensure they are not being deleted without proper authorization.

Python script to remove `v1.compute.firewalls.delete` permission from a user or service account:

```python
from google.oauth2 import service_account
from googleapiclient import discovery

# Path to the service account key file
service_account_key_file = '/path/to/service_account_key.json'

# GCP project ID
project_id = 'your-project-id'

# Email of the user or service account to remove the permission from
email = 'user-or-service-account-email@example.com'

# Create credentials using the service account key file
credentials = service_account.Credentials.from_service_account_file(service_account_key_file)

# Create the Compute Engine service client
service = discovery.build('compute', 'v1', credentials=credentials)

# Get the IAM policy for the project
policy = service.projects().getIamPolicy(project=project_id).execute()

# Remove the v1.compute.firewalls.delete permission from the user or service account
for binding in policy['bindings']:
    if binding['role'] == 'roles/compute.securityAdmin' and email in binding['members']:
        binding['members'].remove(email)

# Update the IAM policy for the project
request = service.projects().setIamPolicy(project=project_id, body={'policy': policy})
response = request.execute()

print('v1.compute.firewalls.delete permission removed for', email)
```

Please note that you need to replace `/path/to/service_account_key.json` with the actual path to your service account key file, `'your-project-id'` with your GCP project ID, and `'user-or-service-account-email@example.com'` with the email of the user or service account you want to remove the permission from.


 