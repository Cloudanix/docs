--- 
slug: gcp_rt_apigateway_api_changes
eventname: google.cloud.apigateway.v1.ApiGatewayService.DeleteApi
title: DeleteApi
sidebar_label: google.cloud.apigateway.v1.ApiGatewayService.DeleteApi
---
                       
### Event Information

#### Meaning

- The google.cloud.apigateway.v1.ApiGatewayService.DeleteApi event in gcprealtime for APIGateway indicates that an API has been deleted in the Google Cloud API Gateway service.
- This event signifies that a specific API configuration and its associated resources, such as endpoints, routes, and authentication settings, have been removed from the API Gateway.
- It is important to note that this event does not delete the actual backend services or resources that the API Gateway was connected to. It only removes the API configuration within the API Gateway service itself.

#### Example

1. Example of security impact: If an unauthorized user gains access to the credentials or permissions required to execute the `google.cloud.apigateway.v1.ApiGatewayService.DeleteApi` event in GCP Realtime for APIGateway, they could potentially delete an API, leading to service disruption or data loss.

Remediation:
- Implement strong access controls: Ensure that only authorized users have access to the API Gateway service and its associated resources. Use IAM roles and permissions to control access at the project, organization, and service level.
- Enable audit logging: Enable audit logging for the API Gateway service to track and monitor any API deletion events. This will help in identifying any unauthorized or suspicious activities.
- Regularly review and rotate credentials: Regularly review and rotate the credentials used to access the API Gateway service. This will help mitigate the risk of unauthorized access and potential misuse of credentials.

Example CLI command to enable audit logging for API Gateway:
```
gcloud logging sinks create api-gateway-audit-logs \
    bigquery.googleapis.com/projects/[PROJECT_ID]/datasets/[DATASET_ID] \
    --log-filter='resource.type="apigateway.googleapis.com/Api" protoPayload.methodName="google.cloud.apigateway.v1.ApiGatewayService.DeleteApi"' \
    --include-children \
    --project=[PROJECT_ID]
```

2. Example of security impact: If the `google.cloud.apigateway.v1.ApiGatewayService.DeleteApi` event is triggered by a malicious actor who gains unauthorized access to the API Gateway service, they could potentially delete critical APIs, leading to service disruption or unauthorized access to sensitive data.

Remediation:
- Implement multi-factor authentication (MFA): Enforce MFA for all users accessing the API Gateway service. This adds an extra layer of security and reduces the risk of unauthorized access.
- Regularly review and update access controls: Regularly review and update the IAM roles and permissions assigned to users and service accounts accessing the API Gateway service. Remove any unnecessary or excessive privileges.
- Enable VPC Service Controls: Implement VPC Service Controls to restrict access to the API Gateway service within a defined perimeter. This helps prevent unauthorized access from external networks.

Example CLI command to enable VPC Service Controls for API Gateway:
```
gcloud beta services vpc-peerings create api-gateway-peer \
    --service=[SERVICE_NAME] \
    --network=[VPC_NETWORK] \
    --project=[PROJECT_ID]
```

3. Example of security impact: If the `google.cloud.apigateway.v1.ApiGatewayService.DeleteApi` event is triggered due to a misconfiguration or vulnerability in the API Gateway service, it could potentially allow an attacker to delete APIs without proper authorization, leading to service disruption or unauthorized access to sensitive data.

Remediation:
- Regularly update and patch the API Gateway service: Stay up to date with the latest security patches and updates provided by Google Cloud. This helps mitigate any known vulnerabilities that could be exploited.
- Implement secure coding practices: Follow secure coding practices when developing and configuring APIs in the API Gateway service. This includes input validation, proper authentication and authorization mechanisms, and secure communication protocols.
- Perform regular security assessments and penetration testing: Conduct regular security assessments and penetration testing to identify and address any potential vulnerabilities or misconfigurations in the API Gateway service.

Example CLI command to perform a security assessment on the API Gateway service:
```
gcloud beta compute security-scanner run \
    --scan-config=[SCAN_CONFIG_NAME] \
    --project=[PROJECT_ID]
```


 