--- 
slug: UpdateFunctionConfiguration20150331v2
eventname: UpdateFunctionConfiguration20150331v2
title: UpdateFunctionConfiguration20150331v2
sidebar_label: UpdateFunctionConfiguration20150331v2
---
                       
### Event Information

- The UpdateFunctionConfiguration20150331v2 event in AWS Lambda refers to an event that is triggered when there is a change in the configuration of a Lambda function.
- This event indicates that a modification has been made to the function's configuration settings, such as its memory allocation, timeout duration, environment variables, or resource requirements.
- It is important to monitor and analyze this event to track any changes made to the Lambda function's configuration, as it can impact the function's performance, scalability, and resource utilization.


### Examples

1. Unauthorized access to Lambda function configuration: The UpdateFunctionConfiguration20150331v2 API in AWS Lambda allows users to modify the configuration of a Lambda function. If security is impacted, it could mean that unauthorized individuals or entities gain access to this API and are able to modify the function's configuration. This could lead to potential security breaches, such as exposing sensitive environment variables or granting excessive permissions to the function.

2. Insecure function code updates: The UpdateFunctionConfiguration20150331v2 API also allows users to update the code of a Lambda function. If security is impacted, it could mean that malicious actors gain unauthorized access to this API and are able to modify the function's code. This could result in the execution of malicious code, data exfiltration, or other unauthorized activities within the function.

3. Exposure of sensitive information: If security is impacted with the UpdateFunctionConfiguration20150331v2 API, it could potentially lead to the exposure of sensitive information. For example, if an attacker gains access to this API, they may be able to retrieve or modify environment variables that contain sensitive data, such as API keys, database credentials, or other secrets. This could result in unauthorized access to other resources or systems connected to the Lambda function.

### Remediation

#### Using Console

1. Unauthorized access to function configuration:
- Step 1: Log in to the AWS Management Console.
- Step 2: Navigate to the AWS Lambda service.
- Step 3: Select the Lambda function for which you want to configure access controls.
- Step 4: Click on the "Configuration" tab.
- Step 5: Scroll down to the "Permissions" section and click on the "Edit" button.
- Step 6: Review the existing permissions and ensure that only authorized individuals or roles have access to modify the function configuration.
- Step 7: Make any necessary changes to the permissions by adding or removing IAM roles or users.
- Step 8: Click on the "Save" button to apply the changes.

2. Insecure function environment variables:
- Step 1: Log in to the AWS Management Console.
- Step 2: Navigate to the AWS Lambda service.
- Step 3: Select the Lambda function for which you want to secure environment variables.
- Step 4: Click on the "Configuration" tab.
- Step 5: Scroll down to the "Environment variables" section and click on the "Edit" button.
- Step 6: Review the existing environment variables and ensure that sensitive information, such as API keys or database credentials, are not directly exposed.
- Step 7: Consider using AWS Secrets Manager or AWS Systems Manager Parameter Store to securely store and retrieve sensitive information.
- Step 8: Update the environment variables with the secure references to the sensitive information.
- Step 9: Click on the "Save" button to apply the changes.

3. Inadequate function execution role permissions:
- Step 1: Log in to the AWS Management Console.
- Step 2: Navigate to the AWS Lambda service.
- Step 3: Select the Lambda function for which you want to review and update execution role permissions.
- Step 4: Click on the "Configuration" tab.
- Step 5: Scroll down to the "Permissions" section and click on the execution role link.
- Step 6: This will take you to the IAM console where you can review the permissions associated with the execution role.
- Step 7: Identify the specific AWS resources that the function requires access to.
- Step 8: Modify the execution role's permissions to grant the necessary access to the required AWS resources.
- Step 9: Follow the principle of least privilege and only grant the minimum permissions required for the function to operate successfully.
- Step 10: Click on the "Save changes" button to apply the updated permissions.

#### Using CLI

1. To remediate unauthorized access to function configuration in AWS Lambda, you can follow these steps using AWS CLI:

- Identify the function that has unauthorized access to its configuration.
- Update the function's access control policies to restrict access only to authorized individuals or roles.
- Use the `aws lambda update-function-configuration` command to modify the function's configuration and apply the updated access controls.

Example CLI command:
```
aws lambda update-function-configuration --function-name <function-name> --cli-input-json file://<path-to-json-file>
```

2. To remediate insecure function environment variables in AWS Lambda, you can take the following actions using AWS CLI:

- Identify the Lambda function with insecure environment variables.
- Update the function's environment variables to ensure sensitive information is properly protected and encrypted.
- Use the `aws lambda update-function-configuration` command to modify the function's configuration and apply the necessary security measures.

Example CLI command:
```
aws lambda update-function-configuration --function-name <function-name> --environment Variables={KEY1=value1,KEY2=value2}
```

3. To remediate inadequate function execution role permissions in AWS Lambda, you can perform the following steps using AWS CLI:

- Identify the Lambda function with inadequate execution role permissions.
- Review and update the execution role's policies to grant the necessary permissions for the function to access required AWS resources.
- Use the `aws lambda update-function-configuration` command to modify the function's configuration and associate it with the updated execution role.

Example CLI command:
```
aws lambda update-function-configuration --function-name <function-name> --role <new-execution-role-arn>
```

#### Using Python

1. Unauthorized access to function configuration: To remediate this issue, you can implement the following steps using Python and the AWS SDK (boto3):

- Use the `get_function` method to retrieve the current function configuration.
- Validate the identity and permissions of the caller to ensure they have the necessary access rights.
- If unauthorized access is detected, use the `update_function_configuration` method to revert the changes made to the function configuration.

Here's an example Python script:

```python
import boto3

lambda_client = boto3.client('lambda')

def remediate_unauthorized_access(function_name):
    response = lambda_client.get_function(FunctionName=function_name)
    # Validate the identity and permissions of the caller here
    # If unauthorized access is detected, revert the changes using the update_function_configuration method

# Usage
remediate_unauthorized_access('my-function')
```

2. Insecure function environment variables: To mitigate the risk of exposing sensitive information through environment variables, you can follow these steps using Python and the AWS SDK (boto3):

- Use the `get_function_configuration` method to retrieve the current function configuration.
- Encrypt sensitive environment variables using AWS Key Management Service (KMS) or a similar encryption mechanism.
- Update the function configuration using the `update_function_configuration` method, ensuring that the sensitive environment variables are properly encrypted.

Here's an example Python script:

```python
import boto3

lambda_client = boto3.client('lambda')

def remediate_insecure_env_vars(function_name):
    response = lambda_client.get_function_configuration(FunctionName=function_name)
    # Encrypt sensitive environment variables using AWS KMS or a similar encryption mechanism
    # Update the function configuration with the encrypted environment variables using the update_function_configuration method

# Usage
remediate_insecure_env_vars('my-function')
```

3. Inadequate function execution role permissions: To address this issue, you can use Python and the AWS SDK (boto3) to update the execution role permissions associated with the Lambda function:

- Use the `get_function_configuration` method to retrieve the current function configuration.
- Identify the required permissions for the function to access AWS resources.
- Update the execution role associated with the function using the `update_function_configuration` method, ensuring that it has the necessary permissions.

Here's an example Python script:

```python
import boto3

lambda_client = boto3.client('lambda')

def remediate_inadequate_permissions(function_name):
    response = lambda_client.get_function_configuration(FunctionName=function_name)
    # Identify the required permissions for the function to access AWS resources
    # Update the execution role associated with the function using the update_function_configuration method

# Usage
remediate_inadequate_permissions('my-function')
```


 