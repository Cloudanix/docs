--- 
slug: UpdateFunctionConfiguration20150331v2
eventname: UpdateFunctionConfiguration20150331v2
title: UpdateFunctionConfiguration20150331v2
sidebar_label: UpdateFunctionConfiguration20150331v2
---
                       
### Event Information

- The UpdateFunctionConfiguration20150331v2 event in AWS Lambda refers to an event that occurs when the configuration of a Lambda function is updated.
- This event is specific to the AWS Lambda service and is triggered when changes are made to the function's configuration settings, such as memory allocation, timeout duration, environment variables, or resource requirements.
- By monitoring this event, you can track and analyze any changes made to the configuration of your Lambda functions, allowing you to understand and manage the impact of these changes on your application's performance and behavior.


### Examples

- Unauthorized access to sensitive environment variables: The UpdateFunctionConfiguration20150331v2 API allows for updating the configuration of a Lambda function, including environment variables. If proper access controls are not in place, an unauthorized user could potentially update the function configuration and gain access to sensitive environment variables, such as API keys or database credentials.

- Exposure of sensitive function code: The API also allows for updating the function code itself. If proper security measures are not in place, an attacker could potentially update the function code to include malicious code or expose sensitive information, leading to a security breach.

- Insecure function permissions: The UpdateFunctionConfiguration20150331v2 API can be used to modify the permissions and roles associated with a Lambda function. If these permissions are not properly configured, it could result in unauthorized access to resources or privilege escalation, compromising the overall security of the system.

### Remediation

#### Using Console

1. Identify the specific issue or vulnerability in the AWS Lambda function by reviewing the event logs or security findings in the AWS console.

2. Determine the appropriate remediation action based on the nature of the issue. For example:
   - If the issue is related to excessive permissions, review the function's IAM role and remove any unnecessary or overly permissive policies.
   - If the issue is related to outdated or vulnerable dependencies, update the function's code to use the latest versions of the dependencies or libraries.
   - If the issue is related to insecure environment variables, review and update the function's configuration to ensure sensitive information is not exposed.

3. Implement the remediation action by following these steps in the AWS console:
   - Go to the AWS Lambda service in the AWS Management Console.
   - Select the specific Lambda function that needs remediation.
   - Depending on the issue, navigate to the relevant section in the console. For example, if the issue is related to IAM permissions, go to the "Permissions" tab.
   - Make the necessary changes to address the issue. This may involve modifying IAM policies, updating code, or adjusting configuration settings.
   - Save the changes and test the function to ensure it is functioning correctly and the issue has been resolved.

Note: The specific steps may vary depending on the nature of the issue and the AWS console interface, but the general approach outlined above can be applied to remediate AWS Lambda issues.

#### Using CLI

1. Enable VPC configuration for AWS Lambda:
   - Use the `update-function-configuration` command to update the Lambda function's configuration.
   - Specify the `--vpc-config` parameter with the appropriate VPC configuration details, such as `SubnetIds` and `SecurityGroupIds`.
   - Example command: `aws lambda update-function-configuration --function-name <function-name> --vpc-config SubnetIds=<subnet-ids>,SecurityGroupIds=<security-group-ids>`

2. Enable encryption at rest for AWS Lambda function code:
   - Use the `update-function-configuration` command to update the Lambda function's configuration.
   - Specify the `--kms-key-arn` parameter with the ARN of the KMS key to be used for encryption.
   - Example command: `aws lambda update-function-configuration --function-name <function-name> --kms-key-arn <kms-key-arn>`

3. Enable AWS CloudTrail logging for AWS Lambda:
   - Use the `update-function-configuration` command to update the Lambda function's configuration.
   - Specify the `--tracing-config` parameter with the appropriate tracing configuration details, such as `Mode` set to `Active`.
   - Example command: `aws lambda update-function-configuration --function-name <function-name> --tracing-config Mode=Active`

#### Using Python

1. Enable VPC configuration for AWS Lambda:
   - Use the `update_function_configuration` method from the AWS SDK to update the Lambda function's configuration.
   - Set the `VpcConfig` parameter to specify the VPC and subnets to associate with the Lambda function.
   - Here's an example Python script:

   ```python
   import boto3

   lambda_client = boto3.client('lambda')

   def enable_vpc_config(lambda_function_name, vpc_id, subnet_ids):
       response = lambda_client.update_function_configuration(
           FunctionName=lambda_function_name,
           VpcConfig={
               'SubnetIds': subnet_ids,
               'SecurityGroupIds': [],
               'VpcId': vpc_id
           }
       )
       print(response)

   enable_vpc_config('my-lambda-function', 'vpc-12345678', ['subnet-12345678', 'subnet-87654321'])
   ```

2. Enable encryption at rest for AWS Lambda function:
   - Use the `update_function_configuration` method from the AWS SDK to update the Lambda function's configuration.
   - Set the `KMSKeyArn` parameter to specify the ARN of the AWS Key Management Service (KMS) key to use for encryption.
   - Here's an example Python script:

   ```python
   import boto3

   lambda_client = boto3.client('lambda')

   def enable_encryption_at_rest(lambda_function_name, kms_key_arn):
       response = lambda_client.update_function_configuration(
           FunctionName=lambda_function_name,
           KMSKeyArn=kms_key_arn
       )
       print(response)

   enable_encryption_at_rest('my-lambda-function', 'arn:aws:kms:us-east-1:123456789012:key/abcd1234-5678-90ab-cdef-1234567890ab')
   ```

3. Enable AWS CloudTrail logging for AWS Lambda:
   - Use the AWS Management Console or the `update_function_configuration` method from the AWS SDK to update the Lambda function's configuration.
   - Set the `TracingConfig` parameter to enable AWS X-Ray tracing for the Lambda function.
   - Here's an example Python script:

   ```python
   import boto3

   lambda_client = boto3.client('lambda')

   def enable_cloudtrail_logging(lambda_function_name):
       response = lambda_client.update_function_configuration(
           FunctionName=lambda_function_name,
           TracingConfig={
               'Mode': 'Active'
           }
       )
       print(response)

   enable_cloudtrail_logging('my-lambda-function')
   ```


 