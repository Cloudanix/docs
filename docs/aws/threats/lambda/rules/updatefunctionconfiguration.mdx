--- 
slug: UpdateFunctionConfiguration
eventname: UpdateFunctionConfiguration
title: UpdateFunctionConfiguration
sidebar_label: UpdateFunctionConfiguration
---
                       
### Event Information

- The UpdateFunctionConfiguration event in AWS Lambda refers to a specific event that occurs when there is a change in the configuration settings of a Lambda function.
- This event is triggered when there is an update made to the function's configuration, such as changes to the function name, memory allocation, timeout duration, environment variables, or resource requirements.
- The UpdateFunctionConfiguration event is useful for tracking and monitoring changes made to Lambda functions, allowing users to keep a record of configuration updates and understand the impact of these changes on the function's behavior and performance.


### Examples

- Unauthorized access: If the UpdateFunctionConfiguration operation is not properly secured, it can potentially allow unauthorized users to modify the configuration of a Lambda function. This can lead to security vulnerabilities, such as granting excessive permissions or exposing sensitive information.

- Resource exhaustion: If the UpdateFunctionConfiguration operation is abused or misconfigured, it can result in resource exhaustion. For example, an attacker could continuously update the configuration of a Lambda function with high memory or timeout values, causing excessive resource consumption and potentially impacting the availability of other functions or services in the AWS environment.

- Insecure environment variables: The UpdateFunctionConfiguration operation allows for the modification of environment variables associated with a Lambda function. If proper security measures are not in place, such as encryption or access controls, sensitive information stored in environment variables could be exposed. This can lead to unauthorized access or data breaches.

### Remediation

#### Using Console

1. Insecure function permissions:
   - Step 1: Open the AWS Management Console and navigate to the AWS Lambda service.
   - Step 2: Select the Lambda function that needs to be remediated.
   - Step 3: Click on the "Permissions" tab in the function's configuration.
   - Step 4: Review the existing permissions and identify any excessive or unnecessary permissions.
   - Step 5: Click on the "Edit" button next to the permission that needs to be modified.
   - Step 6: Adjust the permissions to only grant the necessary access to the function.
   - Step 7: Click on the "Save" button to apply the changes.

2. Exposure of sensitive environment variables:
   - Step 1: Open the AWS Management Console and navigate to the AWS Lambda service.
   - Step 2: Select the Lambda function that needs to be remediated.
   - Step 3: Click on the "Configuration" tab in the function's configuration.
   - Step 4: Scroll down to the "Environment variables" section.
   - Step 5: Review the existing environment variables and identify any sensitive variables that are exposed.
   - Step 6: Click on the "Edit" button next to the environment variable that needs to be modified.
   - Step 7: Update the variable's value or mark it as secure, depending on the remediation required.
   - Step 8: Click on the "Save" button to apply the changes.

3. Inadequate network access controls:
   - Step 1: Open the AWS Management Console and navigate to the AWS Lambda service.
   - Step 2: Select the Lambda function that needs to be remediated.
   - Step 3: Click on the "Configuration" tab in the function's configuration.
   - Step 4: Scroll down to the "Network" section.
   - Step 5: Review the existing network configuration, including VPC settings and VPC endpoints.
   - Step 6: Identify any insecure network access controls or misconfigurations.
   - Step 7: Click on the "Edit" button next to the network configuration that needs to be modified.
   - Step 8: Adjust the network settings to ensure proper security measures are in place.
   - Step 9: Click on the "Save" button to apply the changes.

#### Using CLI

1. To remediate insecure function permissions in AWS Lambda using AWS CLI, you can follow these steps:

- First, identify the function that has insecure permissions by listing all the Lambda functions using the command: `aws lambda list-functions`

- Once you have identified the function, retrieve its current permissions using the command: `aws lambda get-policy --function-name <function-name>`

- Review the output of the previous command to identify any excessive or unnecessary permissions that need to be removed.

- To update the function's permissions, create a new policy document that includes only the necessary permissions. You can use a text editor to create the policy document.

- Once you have the new policy document, update the function's permissions using the command: `aws lambda add-permission --function-name <function-name> --statement-id <statement-id> --action <action> --principal <principal> --source-arn <source-arn> --source-account <source-account> --source-vpc <source-vpc> --source-vpc-cidr <source-vpc-cidr>`

- Replace the placeholders in the command with the appropriate values based on your specific requirements.

2. To remediate the exposure of sensitive environment variables in AWS Lambda using AWS CLI, you can take the following steps:

- List all the environment variables for the Lambda function using the command: `aws lambda get-function-configuration --function-name <function-name>`

- Review the output of the previous command to identify any sensitive environment variables that are exposed.

- To update the function's environment variables, create a new JSON file that includes only the necessary variables and their values. You can use a text editor to create the JSON file.

- Once you have the new JSON file, update the function's environment variables using the command: `aws lambda update-function-configuration --function-name <function-name> --environment <path-to-json-file>`

- Replace the placeholders in the command with the appropriate values based on your specific requirements.

3. To remediate inadequate network access controls in AWS Lambda using AWS CLI, you can follow these steps:

- List all the VPC configurations for the Lambda function using the command: `aws lambda get-function-configuration --function-name <function-name>`

- Review the output of the previous command to identify any insecure network access controls.

- To update the function's network configuration, create a new JSON file that includes the necessary VPC settings. You can use a text editor to create the JSON file.

- Once you have the new JSON file, update the function's network configuration using the command: `aws lambda update-function-configuration --function-name <function-name> --vpc-config <path-to-json-file>`

- Replace the placeholders in the command with the appropriate values based on your specific requirements.

#### Using Python

1. Insecure function permissions:
To remediate insecure function permissions in AWS Lambda using Python, you can follow these steps:

- Use the AWS SDK for Python (Boto3) to retrieve the current function configuration.
- Analyze the permissions associated with the function and identify any excessive or unnecessary permissions.
- Use the Boto3 API to update the function's permissions and remove any unnecessary access.
- Implement a regular review process to ensure that the function's permissions are continuously monitored and updated as needed.

Here's an example Python script that demonstrates how to retrieve and update function permissions using Boto3:

```python
import boto3

lambda_client = boto3.client('lambda')

def remediate_insecure_permissions(function_name):
    # Retrieve current function configuration
    response = lambda_client.get_function_configuration(FunctionName=function_name)
    current_permissions = response['Role']

    # Analyze current permissions and remove any unnecessary access
    updated_permissions = analyze_and_update_permissions(current_permissions)

    # Update function's permissions
    lambda_client.update_function_configuration(
        FunctionName=function_name,
        Role=updated_permissions
    )

def analyze_and_update_permissions(current_permissions):
    # Analyze current permissions and remove any unnecessary access
    # Implement your logic here to identify and remove excessive permissions

    # Return updated permissions
    return updated_permissions

# Usage example
remediate_insecure_permissions('my-lambda-function')
```

2. Exposure of sensitive environment variables:
To remediate the exposure of sensitive environment variables in AWS Lambda using Python, you can follow these steps:

- Use the AWS SDK for Python (Boto3) to retrieve the current function configuration.
- Analyze the environment variables and identify any sensitive information that is exposed.
- Update the function's environment variables to remove or encrypt the sensitive information.
- Implement a secure storage mechanism for sensitive data, such as AWS Secrets Manager or AWS Parameter Store, and retrieve the values dynamically in your code.

Here's an example Python script that demonstrates how to retrieve and update environment variables using Boto3:

```python
import boto3

lambda_client = boto3.client('lambda')

def remediate_exposed_environment_variables(function_name):
    # Retrieve current function configuration
    response = lambda_client.get_function_configuration(FunctionName=function_name)
    current_environment_variables = response['Environment']['Variables']

    # Analyze current environment variables and remove or encrypt sensitive information
    updated_environment_variables = analyze_and_update_environment_variables(current_environment_variables)

    # Update function's environment variables
    lambda_client.update_function_configuration(
        FunctionName=function_name,
        Environment={
            'Variables': updated_environment_variables
        }
    )

def analyze_and_update_environment_variables(current_environment_variables):
    # Analyze current environment variables and remove or encrypt sensitive information
    # Implement your logic here to identify and update sensitive variables

    # Return updated environment variables
    return updated_environment_variables

# Usage example
remediate_exposed_environment_variables('my-lambda-function')
```

3. Inadequate network access controls:
To remediate inadequate network access controls in AWS Lambda using Python, you can follow these steps:

- Use the AWS SDK for Python (Boto3) to retrieve the current function configuration.
- Analyze the network configuration and identify any insecure access controls.
- Update the function's network configuration to ensure proper security measures are in place, such as using VPCs, security groups, or VPC endpoints.
- Implement a regular review process to ensure that the function's network access controls are continuously monitored and updated as needed.

Here's an example Python script that demonstrates how to retrieve and update network configuration using Boto3:

```python
import boto3

lambda_client = boto3.client('lambda')

def remediate_inadequate_network_access(function_name):
    # Retrieve current function configuration
    response = lambda_client.get_function_configuration(FunctionName=function_name)
    current_network_config = response['VpcConfig']

    # Analyze current network configuration and update access controls
    updated_network_config = analyze_and_update_network_config(current_network_config)

    # Update function's network configuration
    lambda_client.update_function_configuration(
        FunctionName=function_name,
        VpcConfig=updated_network_config
    )

def analyze_and_update_network_config(current_network_config):
    # Analyze current network configuration and update access controls
    # Implement your logic here to ensure proper security measures are in place

    # Return updated network configuration
    return updated_network_config

# Usage example
remediate_inadequate_network_access('my-lambda-function')
```


 