--- 
slug: CreateSizeConstraintSet
eventname: CreateSizeConstraintSet
title: CreateSizeConstraintSet
sidebar_label: CreateSizeConstraintSet
---
                       
### Event Information

#### Meaning

- The CreateSizeConstraintSet event in AWS WAF refers to the creation of a size constraint set, which is a collection of size constraint rules used to protect web applications from attacks related to the size of HTTP requests or responses.
- Size constraint rules within a size constraint set define the maximum or minimum size limits for specific parts of an HTTP request or response, such as headers, query strings, or body content.
- This event indicates that a new size constraint set has been created, allowing administrators to define and enforce size restrictions to prevent potential security vulnerabilities or performance issues in their web applications.

### Remediation

#### Using Console

- Example of security impact: If the CreateSizeConstraintSet in AWS WAF is not properly configured, it can potentially allow malicious actors to bypass size constraints and launch attacks that exceed the allowed limits. This can lead to resource exhaustion, denial of service, or data breaches.

- Remediation steps using AWS console:
  1. Log in to the AWS Management Console and navigate to the AWS WAF service.
  2. In the left navigation pane, click on "Web ACLs" and select the desired Web ACL that contains the Size Constraint Set you want to remediate.
  3. In the "Rules" tab, locate the rule that is associated with the Size Constraint Set causing the security impact.
  4. Click on the rule and review the configuration of the Size Constraint Set.
  5. Ensure that the size constraints are properly defined and aligned with your security requirements. Pay attention to the maximum and minimum sizes allowed, as well as any specific conditions or exceptions.
  6. If necessary, modify the Size Constraint Set by adjusting the size limits or adding/removing conditions.
  7. Save the changes and test the updated configuration to ensure that the security impact has been remediated.

Note: It is recommended to regularly monitor and review the configuration of Size Constraint Sets in AWS WAF to ensure ongoing security and compliance.

#### Using CLI

- Security can be impacted with CreateSizeConstraintSet in AWS WAF if the size constraint rule is not properly configured or if the allowed size limit is set too high, potentially allowing for large payloads or denial of service attacks.
- To remediate this issue for AWS WAF using AWS CLI, you can follow these steps:
  1. Identify the specific size constraint set that needs to be remediated by listing all the existing size constraint sets using the `list-size-constraint-sets` command:
     ```
     aws wafv2 list-size-constraint-sets --scope CLOUDFRONT --region <region>
     ```
  2. Once you have identified the size constraint set, update the size constraint rule to set an appropriate size limit using the `update-size-constraint-set` command:
     ```
     aws wafv2 update-size-constraint-set --name <size_constraint_set_name> --scope CLOUDFRONT --region <region> --id <size_constraint_set_id> --default-action ALLOW --rules '[{"Name": "ExampleRule", "Priority": 1, "Statement": {"SizeConstraintStatement": {"FieldToMatch": {"SingleHeader": {"Name": "User-Agent"}}, "ComparisonOperator": "LT", "Size": 1000, "TextTransformations": [{"Priority": 0, "Type": "NONE"}]}}}]'
     ```
  3. Verify that the size constraint rule has been updated successfully by listing the size constraint set again and checking the updated configuration:
     ```
     aws wafv2 list-size-constraint-sets --scope CLOUDFRONT --region <region>
     ```

Note: Replace `<region>`, `<size_constraint_set_name>`, and `<size_constraint_set_id>` with the appropriate values for your environment.

#### Using Python

- Security can be impacted with CreateSizeConstraintSet in AWS WAF if the size constraint rule is not properly configured or if the rule allows for excessively large requests, potentially leading to denial of service (DoS) attacks or resource exhaustion.
- To remediate this issue, you can use the AWS SDK for Python (Boto3) to create a size constraint set with appropriate settings. Here's an example of a Python script that creates a size constraint set with a maximum request size of 1 MB:

```python
import boto3

def create_size_constraint_set():
    waf_client = boto3.client('waf')

    response = waf_client.create_size_constraint_set(
        Name='MySizeConstraintSet',
        SizeConstraints=[
            {
                'FieldToMatch': {
                    'Type': 'URI'
                },
                'ComparisonOperator': 'LT',
                'Size': 1024
            }
        ]
    )

    print("Size constraint set created successfully.")

create_size_constraint_set()
```

This script uses the `create_size_constraint_set` method from the AWS WAF client to create a size constraint set named 'MySizeConstraintSet'. The size constraint is applied to the URI field and uses the 'LT' (less than) comparison operator with a size limit of 1024 bytes (1 MB).

Make sure to customize the script according to your specific requirements and integrate it into your existing infrastructure and deployment processes.


 