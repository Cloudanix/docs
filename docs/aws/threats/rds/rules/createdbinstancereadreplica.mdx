--- 
slug: CreateDBInstanceReadReplica
eventname: CreateDBInstanceReadReplica
title: CreateDBInstanceReadReplica
sidebar_label: CreateDBInstanceReadReplica
---
                       
### Event Information

- The CreateDBInstanceReadReplica event in AWS for RDS refers to the process of creating a read replica of a source database instance.
- A read replica is an exact copy of the source database that can be used to offload read traffic from the primary database, thereby improving performance.
- This event indicates that a new read replica is being provisioned, and it typically involves creating a new DB instance with the same data as the source instance and setting up replication between them.


### Examples

1. Inadequate access controls: If proper access controls are not implemented for the CreateDBInstanceReadReplica operation in AWS RDS, it can lead to unauthorized users being able to create read replicas of the database instances. This can result in potential data breaches or unauthorized access to sensitive information.

2. Lack of encryption: If encryption is not enabled for the CreateDBInstanceReadReplica operation, the data being replicated from the source database instance to the replica instance may be transmitted and stored in an unencrypted format. This can expose the data to potential interception or unauthorized access, compromising the security of the replicated data.

3. Misconfiguration of network settings: If the network settings for the CreateDBInstanceReadReplica operation are not properly configured, it can result in the replica instance being accessible from unauthorized networks or IP addresses. This can lead to potential security vulnerabilities, as attackers may be able to gain unauthorized access to the replica instance and its data.

### Remediation

#### Using Console

1. Inadequate access controls:
- Log in to the AWS Management Console.
- Navigate to the Amazon RDS service.
- Select the appropriate region.
- Click on "Databases" in the left-hand menu.
- Choose the source database instance for which you want to configure access controls.
- Click on the "Instance Actions" button and select "Modify".
- Scroll down to the "Network & Security" section.
- Under the "Public accessibility" option, select the appropriate setting based on your security requirements.
- Under the "VPC security group" option, ensure that only the necessary security groups are allowed access to the replica instance.
- Click on "Apply immediately" and then "Modify DB Instance" to save the changes.

2. Lack of encryption:
- Follow steps 1-7 from the previous response to navigate to the Modify DB Instance page.
- Scroll down to the "Storage" section.
- Enable the "Enable encryption" option.
- Choose the appropriate encryption key from the dropdown menu or create a new one.
- Click on "Apply immediately" and then "Modify DB Instance" to save the changes.

3. Misconfiguration of network settings:
- Follow steps 1-7 from the first response to navigate to the Modify DB Instance page.
- Scroll down to the "Network & Security" section.
- Under the "Public accessibility" option, select the appropriate setting based on your security requirements.
- Under the "VPC security group" option, ensure that only the necessary security groups are allowed access to the replica instance.
- Click on "Apply immediately" and then "Modify DB Instance" to save the changes.

#### Using CLI

1. Inadequate access controls:
- Use the `modify-db-instance` command to update the security group associated with the replica instance, restricting access to authorized users only:
```
aws rds modify-db-instance --db-instance-identifier <replica-instance-id> --vpc-security-group-ids <security-group-id>
```
- Implement IAM policies to control access to the `CreateDBInstanceReadReplica` operation, ensuring only authorized users or roles have permission to create replicas:
```
aws iam create-policy --policy-name <policy-name> --policy-document file://policy.json
aws iam attach-user-policy --user-name <user-name> --policy-arn <policy-arn>
```

2. Lack of encryption:
- Enable encryption for the replica instance by modifying its settings using the `modify-db-instance` command:
```
aws rds modify-db-instance --db-instance-identifier <replica-instance-id> --storage-encrypted
```
- Ensure that the source database instance is also encrypted to maintain end-to-end encryption for the replication process.

3. Misconfiguration of network settings:
- Configure the replica instance to be accessible only from secure networks by modifying its security group settings using the `modify-db-instance` command:
```
aws rds modify-db-instance --db-instance-identifier <replica-instance-id> --vpc-security-group-ids <security-group-id>
```
- Use network ACLs or VPC peering to restrict access to the replica instance from the public internet, if necessary.

#### Using Python

1. Inadequate access controls:
- Use AWS Identity and Access Management (IAM) to define and enforce fine-grained access controls for the CreateDBInstanceReadReplica operation.
- Implement least privilege principles by granting only the necessary permissions to the appropriate IAM roles or users.
- Regularly review and audit the access control policies to ensure they align with the principle of least privilege.

2. Lack of encryption:
- Enable encryption at rest for the source database instance and the replica using AWS Key Management Service (KMS) and AWS RDS encryption.
- Configure SSL/TLS encryption for the replication traffic between the source and replica instances.
- Regularly rotate encryption keys and certificates to maintain the security of the encrypted data.

3. Misconfiguration of network settings:
- Utilize Amazon Virtual Private Cloud (VPC) to create a secure network environment for the replica instance.
- Configure appropriate security groups and network ACLs to restrict access to the replica instance.
- Implement network monitoring and intrusion detection systems to detect and respond to any unauthorized access attempts or suspicious activities.

Python script example for implementing access controls for CreateDBInstanceReadReplica operation in AWS RDS:

```python
import boto3

# Create an AWS RDS client
rds_client = boto3.client('rds')

# Define the IAM policy for the replica creation
policy_document = {
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": "rds:CreateDBInstanceReadReplica",
            "Resource": "*"
        }
    ]
}

# Create an IAM policy
response = boto3.client('iam').create_policy(
    PolicyName='ReplicaCreationPolicy',
    PolicyDocument=json.dumps(policy_document)
)

# Attach the policy to the appropriate IAM role or user
response = boto3.client('iam').attach_role_policy(
    RoleName='YourRoleName',
    PolicyArn=response['Policy']['Arn']
)
```

Note: Replace 'YourRoleName' with the actual name of the IAM role or user to which the policy needs to be attached.


 