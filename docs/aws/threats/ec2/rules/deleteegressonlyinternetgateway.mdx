--- 
slug: DeleteEgressOnlyInternetGateway
eventname: DeleteEgressOnlyInternetGateway
title: DeleteEgressOnlyInternetGateway
sidebar_label: DeleteEgressOnlyInternetGateway
---
                       
### Event Information

- The DeleteEgressOnlyInternetGateway event in AWS for EC2 refers to the deletion of an egress-only internet gateway.
- An egress-only internet gateway is a horizontally scaled, redundant, and highly available VPC component that allows outbound communication over IPv6 from instances in a VPC to the internet, while preventing inbound communication from the internet.
- This event indicates that the egress-only internet gateway has been successfully deleted, and any associated outbound IPv6 traffic will no longer be routed through it.


### Examples

1. Unauthorized deletion: If security is impacted with DeleteEgressOnlyInternetGateway in AWS for EC2, one example could be an unauthorized user gaining access to the AWS account and deleting the egress-only internet gateway. This could result in a loss of network connectivity for the EC2 instances, potentially exposing them to security risks.

2. Misconfiguration: Another example could be a misconfiguration in the access control policies for the egress-only internet gateway. If the permissions are not properly set, it could allow unintended users or roles to delete the gateway, leading to a security breach.

3. Malicious intent: A third example could be a malicious insider with access to the AWS account intentionally deleting the egress-only internet gateway. This could be part of an attack strategy to disrupt network connectivity and compromise the security of the EC2 instances.

### Remediation

#### Using Console

1. Enable CloudTrail logging: Enable CloudTrail logging in your AWS account to capture all API calls related to the EOIG. This will help in monitoring and auditing any changes or deletions made to the EOIG.

2. Implement IAM policies: Ensure that proper IAM policies are in place to restrict access to the EOIG. Only authorized users or roles should have the necessary permissions to modify or delete the EOIG. Regularly review and update these policies to minimize the risk of unauthorized access.

3. Implement backup and restore procedures: Regularly backup the configuration of the EOIG and store it in a secure location. In case of accidental deletion, you can restore the EOIG using the backed-up configuration. This will help in quickly recovering from any unintended deletions and minimizing the impact on the VPC's security posture.

#### Using CLI

To remediate the unauthorized deletion of an Egress Only Internet Gateway (EOIG) in AWS, you can follow these steps:

1. Implement strong access controls:
   - Ensure that IAM (Identity and Access Management) policies are properly configured to restrict access to the AWS account and EC2 instances. Use the principle of least privilege to grant only necessary permissions.
   - Enable multi-factor authentication (MFA) for privileged accounts to add an extra layer of security.

2. Regularly backup and restore EOIG configurations:
   - Take regular backups of EOIG configurations using AWS CLI command `aws ec2 create-egress-only-internet-gateway` and store them securely.
   - In case of accidental deletion, restore the EOIG configuration using the AWS CLI command `aws ec2 create-egress-only-internet-gateway` with the appropriate parameters.

3. Enable monitoring and auditing:
   - Enable CloudTrail to capture API calls related to EOIGs. This will provide a detailed audit trail of any modifications or deletions.
   - Set up CloudWatch Events to trigger notifications or automated actions when EOIG-related events occur, such as deletion or modification.

By implementing these measures, you can mitigate the risk of unauthorized or accidental deletion of EOIGs and ensure the security and availability of your VPC resources.

#### Using Python

To remediate unauthorized deletion of an Egress Only Internet Gateway (EOIG) in AWS, you can take the following steps:

1. Implement strong access controls:
   - Ensure that IAM (Identity and Access Management) policies are properly configured to restrict access to the AWS account and EC2 instances. Follow the principle of least privilege, granting only the necessary permissions to users and roles.
   - Enable multi-factor authentication (MFA) for privileged accounts to add an extra layer of security.

2. Regularly backup and restore EOIG configurations:
   - Create regular backups of EOIG configurations using AWS CloudFormation or AWS CLI commands. This will allow you to quickly restore the EOIG in case of accidental deletion.
   - Store the backups in a secure location, separate from the production environment, to prevent unauthorized access.

3. Enable monitoring and auditing:
   - Utilize AWS CloudTrail to monitor and log all API calls related to EOIGs. This will provide visibility into any modifications or deletions made to the EOIG.
   - Set up CloudWatch Events to trigger notifications or automated actions when specific EOIG-related events occur, such as deletion or modification.
   - Implement real-time monitoring and alerting to promptly detect any unauthorized or accidental deletion of the EOIG.

Here's an example of a Python script that uses the Boto3 library to monitor EOIG-related events:

```python
import boto3

def monitor_eoig_events():
    client = boto3.client('cloudtrail')
    response = client.create_trail(
        Name='eoig-trail',
        S3BucketName='your-s3-bucket',
        IsMultiRegionTrail=True
    )
    trail_arn = response['TrailARN']
    
    client.start_logging(Name=trail_arn)
    
    # Set up CloudWatch Events rule to trigger actions based on EOIG events
    
    # Add code to handle notifications or automated actions based on EOIG events
    
    print("Monitoring EOIG events...")

monitor_eoig_events()
```

Note: This script sets up a CloudTrail trail and starts logging EOIG events. You can customize it to fit your specific requirements, such as adding CloudWatch Events rules or integrating with other services for notifications or automated actions.


 