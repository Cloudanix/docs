---
title: Only Private End-Points Should Access APIs
---

### More Info:

Amazon API Gateway APIs should be accessible only through private API endpoints and must not be visible to the public Internet.

### Risk Level

High

### Address

Security

### Compliance Standards

MAS, NIST

### Remediation

How to enable private endpoint for API Gateway?

#### Using AWS Console

1. Create a VPC (Virtual Private Cloud):
   - Sign in to the AWS Management Console and navigate to the Amazon VPC service.
   - Create a new VPC or select an existing VPC where you want to create the private endpoint for API Gateway.
2. Set up private subnets:
   - Within the selected VPC, create one or more private subnets in different Availability Zones.
   - Private subnets should have a route table that doesn't have a default route to an internet gateway.
3. Create an API Gateway VPC Link:
   - Open the Amazon API Gateway console.
   - Navigate to the API for which you want to enable the private endpoint.
     (In the Cloudanix Console, navigate to "Misconfig" page and look for Affected Assets for "Only Private End-Points Should Access APIs" Policy.)
   - In the left navigation pane, choose "VPC Links."
   - Click on "Create VPC Link" and provide a name for the VPC Link.
   - Select the VPC and subnets you created in step 2.
   - Choose the security groups to associate with the VPC Link. These security groups should allow the necessary inbound and outbound traffic for your API.
   - Click on "Create" to create the VPC Link.
4. Deploy the API to a private stage:
   - Navigate to the Stages section of your API in the API Gateway console.
   - Create or select an existing stage for deployment.
   - Under the "Deployment" tab, choose the VPC Link you created in step 3 as the "Access Logging/Detailed CloudWatch Metrics/VPC Link" setting.
   - Deploy the API stage.
5. Set up DNS resolution:
   - To access the private endpoint, you need to configure DNS resolution for the API Gateway domain name within your VPC.
   - This can be done by either using Amazon Route 53 private hosted zones or configuring a DNS resolver within your VPC.
6. Test the private endpoint:
   - Once the private endpoint is set up and DNS resolution is configured, you can test the private endpoint by making requests to the API using its private domain name.

### Additional Reading:

- [https://aws.amazon.com/blogs/compute/introducing-amazon-api-gateway-private-endpoints/](https://aws.amazon.com/blogs/compute/introducing-amazon-api-gateway-private-endpoints/)
