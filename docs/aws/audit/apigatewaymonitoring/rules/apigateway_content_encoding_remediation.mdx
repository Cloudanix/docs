### Remediation

How to enable content encoding for APIs?

#### Using AWS Console

1. Access the API Gateway Console:
   - Sign in to the AWS Management Console.
   - Navigate to the API Gateway service.
2. Select the API:
   - Choose the API for which you want to enable content encoding.
     (In the Cloudanix Console, navigate to "Misconfig" page and look for Affected Assets for "Content Encoding Should Be Enabled For APIs" Policy.)
3. Create or Select a Resource:
   - Expand the API to see its resources.
   - Create a new resource or select an existing one where you want to enable content encoding.
4. Configure Integration Response:
   - Click on the selected resource to access its settings.
   - Choose the desired HTTP method for which you want to enable content encoding.
   - Under the selected method, click on the "Integration Response" box.
5. Add a Content Encoding Header:
   - In the "Integration Response" section, locate the "HTTP status regex" block and click on it.
   - Scroll down to the "Header Mappings" section and click the "Add header mapping" button.
   - Set the "Header name" as `Content-Encoding` (without quotes).
   - Set the "Mapped from" value as `integration.response.body.encoding` (without quotes).
6. Save the Configuration:
   - Click on the "Save" button to save the changes made to the integration response.
7. Repeat for Other Resources and Methods:
   - Repeat steps 4 to 6 for other resources and methods where you want to enable content encoding.
8. Deploy the API Changes:
   - Click on the "Actions" button at the top of the API Gateway console.
   - Select "Deploy API" from the dropdown menu.
   - Choose the desired deployment stage and click on the "Deploy" button.

