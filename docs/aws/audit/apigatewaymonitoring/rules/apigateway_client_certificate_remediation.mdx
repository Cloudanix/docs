### Remediation

#### Using Console

Sure, here are the step-by-step instructions to remediate the "API Gateway APIs should use SSL certificates" misconfiguration in AWS console:

1. Open the AWS Management Console and go to the Amazon API Gateway service.

2. Select the API that you want to remediate and click on the "Stages" option in the left-hand menu.

3. Select the stage for which you want to enable SSL and click on the "Edit" button.

4. Under the "Security" section, select the "Enable HTTPS" checkbox and select the SSL certificate that you want to use from the dropdown list.

5. If you don't have an SSL certificate already, you can create one using AWS Certificate Manager. To do this, click on the "Create a new ACM Certificate" link, fill in the required details, and click on the "Review and Request" button.

6. Review the details of the SSL certificate and click on the "Confirm and Request" button.

7. Once the SSL certificate is created, go back to the API Gateway console and select the certificate from the dropdown list.

8. Click on the "Save Changes" button to save the configuration.

9. Test the API to ensure that it is now using SSL. You can do this by accessing the API URL using "https" instead of "http".

That's it! By following these steps, you have successfully remediated the "API Gateway APIs should use SSL certificates" misconfiguration in AWS console.

#### Using CLI

To remediate the misconfiguration "API Gateway APIs should use SSL certificates" in AWS CLI, follow these steps:

1. Open the AWS CLI on your local machine.

2. Run the following command to list all the APIs in your AWS account:

   `aws apigateway get-rest-apis`

3. Identify the API that is not using SSL certificates and note its ID.

4. Run the following command to update the API to use SSL certificates:

   `aws apigateway update-rest-api --rest-api-id <API ID> --patch-operations op=replace,path=/endpointConfiguration/types/EDGE,value=REGIONAL`

   This command updates the API to use a regional endpoint configuration, which requires SSL certificates.

5. Run the following command to deploy the updated API:

   `aws apigateway create-deployment --rest-api-id <API ID> --stage-name <STAGE NAME>`

   Replace `<STAGE NAME>` with the name of the stage you want to deploy the API to.

6. Verify that the API is now using SSL certificates by accessing its URL using HTTPS.

By following these steps, you have successfully remediated the misconfiguration "API Gateway APIs should use SSL certificates" in AWS CLI.

#### Using Python

To remediate the misconfiguration of API Gateway APIs not using SSL certificates in AWS using Python, you can follow these steps:

1. Import the necessary libraries:

```python
import boto3
```

2. Create a boto3 client for API Gateway:

```python
apigateway_client = boto3.client('apigateway')
```

3. Get a list of all APIs in the account:

```python
apis = apigateway_client.get_rest_apis()
```

4. Loop through each API and check if it has an SSL certificate:

```python
for api in apis['items']:
    api_id = api['id']
    api_name = api['name']
    api_stages = apigateway_client.get_stages(restApiId=api_id)
    for stage in api_stages['item']:
        stage_name = stage['stageName']
        stage_config = apigateway_client.get_stage(restApiId=api_id, stageName=stage_name)
        if 'clientCertificateId' not in stage_config:
            print(f"API {api_name} in stage {stage_name} does not have an SSL certificate.")
```

5. If an API does not have an SSL certificate, create a new SSL certificate and associate it with the API:

```python
cert_arn = 'arn:aws:acm:us-east-1:123456789012:certificate/abcdefg-1234-abcd-1234-abcdef123456'
apigateway_client.update_stage(restApiId=api_id, stageName=stage_name, patchOperations=[{'op': 'replace', 'path': '/clientCertificateId', 'value': cert_arn}])
```

Replace `cert_arn` with the ARN of your SSL certificate.

6. Verify that the SSL certificate has been associated with the API:

```python
stage_config = apigateway_client.get_stage(restApiId=api_id, stageName=stage_name)
if stage_config['clientCertificateId'] == cert_arn:
    print(f"API {api_name} in stage {stage_name} now has an SSL certificate.")
else:
    print(f"Failed to associate SSL certificate with API {api_name} in stage {stage_name}.")
```

This Python script will help you remediate the misconfiguration of API Gateway APIs not using SSL certificates in AWS.

