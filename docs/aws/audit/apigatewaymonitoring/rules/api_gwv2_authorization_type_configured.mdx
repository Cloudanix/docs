---
slug: api_gwv2_authorization_type_configured
title: API Gateway V2 Should Have Authorization Type Configuration
sidebar_label: API Gateway V2 Should Have Authorization Type Configuration
---

### More Info:

This rule verifies whether Amazon API Gatewayv2 API routes have an authorization type configured. It ensures that appropriate authentication and authorization mechanisms are in place for accessing the API routes. The rule is marked as non-compliant if the authorization type is set to NONE, indicating that no authentication is required to access the routes

### Risk Level

Medium

### Address

Security

### Compliance Standards

CBP,SEBI

### Remediation

#### Using Console

To remediate the misconfiguration of API Gateway V2 not having an Authorization Type configured in AWS, you can follow these steps using the AWS Management Console:

1. **Login to AWS Console**: Go to the AWS Management Console at https://console.aws.amazon.com/.

2. **Navigate to API Gateway**: Click on the "Services" dropdown in the top left corner and select "API Gateway" under the Networking & Content Delivery section.

3. **Select the API**: In the API Gateway dashboard, select the API that you want to remediate from the list of APIs.

4. **Configure Authorization Type**:
   - Click on the "Routes" tab on the left-hand side of the console.
   - Select the route for which you want to configure the Authorization Type.
   - Click on the "Authorization" tab in the route configuration.
   - Under the "Authorization Type" dropdown, select the appropriate authorization type based on your requirements (e.g., JWT, AWS IAM, Lambda Authorizer, etc.).

5. **Save Changes**: After selecting the desired Authorization Type, click on the "Save" button to apply the changes.

6. **Test the Configuration**: It is recommended to test the API with the new Authorization Type to ensure that the configuration is working as expected.

By following these steps, you can remediate the misconfiguration of API Gateway V2 not having an Authorization Type configured in AWS using the AWS Management Console.

#### Using CLI

To remediate the misconfiguration of API Gateway V2 not having an Authorization Type configuration in AWS, you can follow these steps using AWS CLI:

1. List all the APIs in your AWS account to identify the API Gateway V2 that needs to be remediated:
```bash
aws apigatewayv2 get-apis
```

2. Identify the API Gateway V2 that needs to be updated based on the API ID.

3. Update the API Gateway V2 with the required Authorization Type configuration. You can set the Authorization Type to one of the following values: `NONE`, `AWS_IAM`, `CUSTOM`, or `JWT`.

For example, to set the Authorization Type to `AWS_IAM` for the identified API Gateway V2, you can use the following command:
```bash
aws apigatewayv2 update-api --api-id <API_ID> --authorization-type AWS_IAM
```

Replace `<API_ID>` with the actual API ID of the API Gateway V2 that needs to be remediated.

4. Verify the changes by describing the API to ensure that the Authorization Type configuration has been updated successfully:
```bash
aws apigatewayv2 get-api --api-id <API_ID>
```

By following these steps and updating the API Gateway V2 with the appropriate Authorization Type configuration using AWS CLI, you can remediate the misconfiguration of API Gateway V2 not having an Authorization Type set in AWS.

#### Using Python

To remediate the misconfiguration of API Gateway V2 not having an authorization type configured in AWS, you can follow these steps using Python:

1. Import the necessary Python libraries for interacting with AWS services:
```python
import boto3
```

2. Initialize the AWS API Gateway client:
```python
client = boto3.client('apigatewayv2')
```

3. Get a list of existing APIs in API Gateway V2:
```python
apis = client.get_apis()
```

4. Iterate through the list of APIs to find the one that needs the authorization type configuration:
```python
for api in apis['Items']:
    api_id = api['ApiId']
    api_name = api['Name']
    
    # Check if the API needs authorization type configuration
    if not api.get('AuthorizationType'):
        # Add the required authorization type configuration
        response = client.update_api(
            ApiId=api_id,
            AuthorizationType='JWT',  # You can replace 'JWT' with the desired authorization type
            # Add other required authorization configurations here
        )
        print(f"Authorization type configured for API: {api_name}")
```

5. Run the Python script to apply the authorization type configuration to the API Gateway V2 APIs that do not have it configured.

By following these steps, you can remediate the misconfiguration of API Gateway V2 APIs not having an authorization type configured in AWS using Python.


