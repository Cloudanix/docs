---
slug: acm_certificates_renewal_45_days
title: AWS ACM Certificates Renewal Under 45 Days
sidebar_label: AWS ACM Certificates Renewal Under 45 Days
---

### More Info:

Ensure that your SSL/TLS certificates managed by AWS ACM are renewed 45 days before their validity period ends. Certificate Manager is the AWS service that lets you easily provision, manage, and deploy SSL/TLS certificates for use with other AWS resources such as Elastic Load Balancers, CloudFront distributions or APIs on Amazon API Gateway.

### Risk Level

Medium

### Address

Security

### Compliance Standards

NIST



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to the AWS Management Console and navigate to the API Gateway service.
2. In the API Gateway dashboard, select the APIs that you want to examine.
3. In the API details page, select the "Stages" option from the left-hand navigation panel.
4. In the Stages section, check the "Client Certificate" field. If the certificate is set to expire in less than 45 days, it is a misconfiguration.

#### Using CLI

1. Install and configure AWS CLI: Before you can start, you need to install the AWS CLI on your local machine and configure it with your AWS account credentials. You can do this by running the following commands:

   ```
   pip install awscli
   aws configure
   ```

   You will be prompted to enter your AWS Access Key ID, Secret Access Key, Default region name, and Default output format. These details can be obtained from your AWS account.

2. List all the API Gateways: Use the following command to list all the API Gateways in your AWS account:

   ```
   aws apigateway get-rest-apis
   ```

   This command will return a list of all the REST APIs in your account. Note down the "id" of the API Gateway you want to check.

3. Get the details of the API Gateway: Use the following command to get the details of the API Gateway:

   ```
   aws apigateway get-rest-api --rest-api-id <your-rest-api-id>
   ```

   Replace "<your-rest-api-id>" with the id of your API Gateway. This command will return the details of the API Gateway including the id of the ACM certificate associated with it.

4. Check the renewal status of the ACM certificate: Use the following command to check the renewal status of the ACM certificate:

   ```
   aws acm describe-certificate --certificate-arn <your-certificate-arn>
   ```

   Replace "<your-certificate-arn>" with the ARN of your ACM certificate. This command will return the details of the certificate including its renewal status. If the "RenewalEligibility" field is "ELIGIBLE", it means the certificate is due for renewal.

#### Using Python

1. Install and configure AWS SDK for Python (Boto3) on your local machine. This will allow you to interact with AWS services using Python. You can install it using pip:

```python
pip install boto3
```

2. Import the necessary modules and create a session using your AWS credentials:

```python
import boto3
from botocore.exceptions import BotoCoreError, ClientError

session = boto3.Session(
    aws_access_key_id='YOUR_ACCESS_KEY',
    aws_secret_access_key='YOUR_SECRET_KEY',
    region_name='YOUR_REGION'
)
```

3. Create a client for the 'acm' service and list all the certificates:

```python
acm_client = session.client('acm')

try:
    response = acm_client.list_certificates()
except ClientError as e:
    print(f"Unexpected error: {e}")
```

4. Iterate over the certificates and check if they are due for renewal in less than 45 days:

```python
from datetime import datetime, timedelta

for certificate in response['CertificateSummaryList']:
    certificate_detail = acm_client.describe_certificate(
        CertificateArn=certificate['CertificateArn']
    )
    expiry_date = certificate_detail['Certificate']['NotAfter']
    if (expiry_date - datetime.now()).days < 45:
        print(f"Certificate {certificate['CertificateArn']} is due for renewal in less than 45 days.")
```

This script will print out the ARNs of all the certificates that are due for renewal in less than 45 days. You can then take the necessary actions to renew these certificates.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

Sure, I can help you with that. Here are the step-by-step instructions to remediate the AWS ACM Certificates Renewal Under 45 Days misconfiguration using the AWS console:

1. Log in to your AWS Management Console.
2. Navigate to the Amazon Certificate Manager (ACM) dashboard.
3. Select the expired certificate that needs to be renewed.
4. Click on the "Renew" button.
5. Review the certificate details and click on the "Next" button.
6. Choose the validation method for your certificate renewal. You can choose between email validation or DNS validation.
7. If you choose email validation, enter the email addresses for the domain owner and the technical contact. If you choose DNS validation, you will need to create a CNAME record in your DNS configuration.
8. Review your renewal information and click on the "Confirm and Request" button.
9. Wait for the validation process to complete. This may take a few minutes or up to several hours, depending on the method you chose.
10. Once the validation is complete, your renewed certificate will be issued and available for use.

That's it! Your AWS ACM certificate has now been renewed and is valid for another year.

#### Using CLI

If you have an AWS ACM (Amazon Certificate Manager) certificate that is going to expire in less than 45 days, you will need to renew it in order to avoid any service disruptions. Here are the step-by-step instructions on how to remediate this issue using AWS CLI:

1. Open your terminal or command prompt and make sure you have the AWS CLI installed and configured with your AWS account credentials.

2. Run the following command to list all your certificates:

```
aws acm list-certificates
```

3. Identify the certificate that needs to be renewed and note down its ARN (Amazon Resource Name).

4. Run the following command to check the status of the certificate:

```
aws acm describe-certificate --certificate-arn <certificate-arn>
```

5. Check the "NotAfter" field in the output of the above command to see the expiration date of the certificate.

6. If the certificate is going to expire in less than 45 days, run the following command to renew it:

```
aws acm renew-certificate --certificate-arn <certificate-arn>
```

7. Once the renewal request is submitted, you will receive a confirmation email from AWS. Follow the instructions in the email to complete the renewal process.

8. After the certificate is renewed, you will need to update it in your application or web server to avoid any service disruptions.

That's it! By following these steps, you will be able to remediate the issue of AWS ACM certificates renewal under 45 days using AWS CLI.

#### Using Python

1. First, you need to install the AWS SDK for Python (Boto3) and configure your AWS credentials on your local machine.

2. Next, you need to write a Python script that will use the Boto3 library to check the expiration date of all ACM certificates in your AWS account.

3. You can use the `boto3.client('acm').list_certificates()` method to list all the certificates in your account.

4. Then, you can loop through each certificate and check if its expiration date is less than 45 days from the current date using the `datetime` module.

5. If a certificate is about to expire, you can use the `boto3.client('acm').renew_certificate()` method to renew it.

6. Finally, you can schedule the script to run periodically using a tool like AWS Lambda or cron.

Here is a sample Python code to get you started:

```
import boto3
from datetime import datetime, timedelta

# Set the AWS region and create an ACM client
region = 'us-east-1'
acm = boto3.client('acm', region_name=region)

# Get the list of all certificates in the account
certificates = acm.list_certificates()['CertificateSummaryList']

# Loop through each certificate and check if it needs to be renewed
for cert in certificates:
    cert_arn = cert['CertificateArn']
    cert_info = acm.describe_certificate(CertificateArn=cert_arn)['Certificate']
    expiration_date = cert_info['NotAfter']
    days_left = (expiration_date - datetime.now()).days

    if days_left < 45:
        # Renew the certificate
        acm.renew_certificate(CertificateArn=cert_arn)
        print(f'Renewed certificate {cert_arn}')
```

Note: Make sure to test the script in a non-production environment before running it on your production AWS account.

### Additional Reading:

- [https://docs.aws.amazon.com/acm/latest/userguide/managed-renewal.html](https://docs.aws.amazon.com/acm/latest/userguide/managed-renewal.html) 


</Tab>
</Tabs>