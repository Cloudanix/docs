### Remediation

How to implement the Principle of Least Privilege (POLP) and create a separate IAM role for each individual Lambda function?

#### Using AWS Console

1. Identify the specific actions and resources that each Lambda function needs to perform its intended functionality. This includes accessing other AWS services, interacting with databases, reading from or writing to storage, etc.
    (In the Cloudanix Console, navigate to "Misconfig" page and look for Affected Assets for "Multiple Functions Should Not Have The Same IAM Role" Policy.)
2. Determine the minimum set of permissions required for each Lambda function to perform those actions. It is crucial to limit the permissions to only what is necessary and avoid granting unnecessary or overly broad permissions.
3. Open the AWS Management Console and navigate to the AWS Identity and Access Management (IAM) service.
4. Click on "Roles" in the navigation panel on the left side.
5. Click on the "Create role" button.
6. Select the "AWS service" as the trusted entity.
7. Choose "Lambda" as the service that will use this role.
8. Click on the "Next: Permissions" button.
9. In the "Attach permissions policies" section, click on the "Create policy" button.
10. Create a custom IAM policy that defines the specific permissions required by the first Lambda function. You can use the policy visual editor or JSON to define the policy. Be sure to include only the necessary actions and resources.
11. Click on the "Review policy" button.
12. Provide a name and description for the policy.
13. Click on the "Create policy" button.
14. Go back to the IAM role creation wizard and click on the "Refresh" button to see the newly created policy.
15. Select the policy you just created by checking the checkbox next to it.
16. Click on the "Next: Tags" button (optional) and add any necessary tags to the role.
17. Click on the "Next: Review" button.
18. Provide a name and description for the IAM role, indicating the specific Lambda function it will be associated with.
19. Click on the "Create role" button.
20. Repeat steps 5-19 for each additional Lambda function, creating a separate IAM role and policy for each function.
21. Once the IAM roles are created, go to the Lambda function configuration for the first function.
22. In the Lambda function details page, scroll down to the "Permissions" section.
23. Under "Execution role," click on the "Edit" button.
24. Select the IAM role you created specifically for this Lambda function.
25. Click on the "Save" button.
26. Repeat steps 21-25 for each additional Lambda function, associating the appropriate IAM role with each function.
