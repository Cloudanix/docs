---
slug: lambda_concurrency
title: Lambda Should Have Concurrency Configured
sidebar_label: Lambda Should Have Concurrency Configured
---
### More Info:

Checks if the Lambda function is configured with a function-level concurrent execution limit. The rule is NON_COMPLIANT if the Lambda function is not configured with a function-level concurrent execution limit.

### Risk Level

Medium

### Address

Configuration

### Compliance Standards

CBP,RBI_MD_ITF


### Triage and Remediation
<Tabs>

<Tab title='Cause'>
### Check Cause
<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
1. Sign in to the AWS Management Console and open the AWS Lambda console.

2. In the navigation pane, choose "Functions".

3. Select the function you want to check for concurrency configuration.

4. In the function's detail page, scroll down to the "Concurrency" section. If there is no concurrency limit set, it means the function is using unreserved concurrency which could potentially lead to throttling issues.
</Accordion>

<Accordion title='Using CLI'>
1. First, you need to install and configure AWS CLI on your local machine. You can do this by following the instructions provided by AWS. Make sure you have the necessary permissions to access the Lambda functions.

2. Once the AWS CLI is installed and configured, you can list all the Lambda functions in your account by running the following command:

   ```
   aws lambda list-functions --region your-region-name
   ```

   Replace 'your-region-name' with the name of the AWS region where your Lambda functions are deployed. This command will return a JSON object with details about all your Lambda functions.

3. To check the concurrency configuration of a specific Lambda function, you can use the following command:

   ```
   aws lambda get-function --function-name your-function-name --region your-region-name
   ```

   Replace 'your-function-name' with the name of the Lambda function you want to check, and 'your-region-name' with the name of the AWS region where the function is deployed. This command will return a JSON object with details about the specified Lambda function.

4. In the returned JSON object, look for the 'Concurrency' field. If this field is not present or if its value is not set, then the Lambda function does not have a concurrency configuration. If the 'Concurrency' field is present and its value is set, then the Lambda function has a concurrency configuration.
</Accordion>

<Accordion title='Using Python'>
1. First, you need to install the AWS SDK for Python (Boto3) in your environment. You can do this by running the command `pip install boto3` in your terminal.

2. Import the necessary libraries and establish a session with AWS. You will need your AWS access key and secret access key for this.

```python
import boto3

session = boto3.Session(
    aws_access_key_id='YOUR_ACCESS_KEY',
    aws_secret_access_key='YOUR_SECRET_KEY',
    region_name='us-west-2'  # or your preferred region
)
```

3. Create a client for AWS Lambda.

```python
lambda_client = session.client('lambda')
```

4. Now, you can list all your Lambda functions and check if they have a concurrency limit set. If the 'ReservedConcurrentExecutions' key is not present in the function's details, it means that the function does not have a concurrency limit set.

```python
response = lambda_client.list_functions()

for function in response['Functions']:
    function_details = lambda_client.get_function_configuration(
        FunctionName=function['FunctionName']
    )
    if 'ReservedConcurrentExecutions' not in function_details:
        print(f"Lambda function {function['FunctionName']} does not have a concurrency limit set.")
```

This script will print the names of all Lambda functions that do not have a concurrency limit set. You can modify it to suit your needs, for example by writing the results to a file or sending an alert.
</Accordion>

</AccordionGroup>
</Tab>

<Tab title='Remediation'>
### Remediation

<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
To remediate the misconfiguration of AWS Lambda not having Concurrency configured, follow these steps using the AWS Management Console:

1. **Sign in to the AWS Management Console**: Go to https://aws.amazon.com/ and sign in to your AWS account.

2. **Navigate to AWS Lambda**: Click on the "Services" dropdown at the top left corner of the console, then select "Lambda" under the "Compute" section.

3. **Select the Lambda Function**: From the list of Lambda functions, select the function that you want to configure Concurrency for by clicking on its name.

4. **Configure Concurrency**: In the function's configuration page, scroll down to the "Concurrency" section and click on the "Edit" button.

5. **Set Concurrency Limit**: In the Concurrency settings, you can set the maximum number of concurrent executions allowed for the Lambda function. Enter the desired value in the "Reserved concurrency" field. You can also set the "Unreserved concurrency" if needed.

6. **Save Changes**: After entering the concurrency limit, click on the "Save" button to apply the changes.

7. **Verify Configuration**: Once saved, verify that the Concurrency configuration is correctly set by checking the Concurrency section on the Lambda function's configuration page.

By following these steps, you have successfully remediated the misconfiguration of AWS Lambda not having Concurrency configured. This will help in controlling the maximum number of concurrent executions for the Lambda function.

#
</Accordion>

<Accordion title='Using CLI'>
To remediate the misconfiguration of AWS Lambda not having concurrency configured, follow these steps using AWS CLI:

1. List all the Lambda functions to identify which functions do not have concurrency configured:
```
aws lambda list-functions --query 'Functions[?Concurrency IS EMPTY].FunctionName'
```

2. For each Lambda function identified in the previous step, set the concurrency limit using the following command:
```
aws lambda put-function-concurrency --function-name <function-name> --reserved-concurrent-executions <concurrency-limit>
```
Replace `<function-name>` with the actual name of the Lambda function and `<concurrency-limit>` with the desired maximum number of concurrent executions allowed for the function.

3. Verify that the concurrency configuration has been successfully applied by describing the function and checking the concurrency settings:
```
aws lambda get-function --function-name <function-name> --query Concurrency
```

By following these steps, you can remediate the misconfiguration of AWS Lambda functions not having concurrency configured using AWS CLI.
</Accordion>

<Accordion title='Using Python'>
To remediate the misconfiguration of AWS Lambda not having concurrency configured, you can follow these steps:

1. Open the AWS Management Console and navigate to the AWS Lambda service.

2. Select the Lambda function for which you want to configure concurrency.

3. In the function configuration page, scroll down to the "Concurrency" section.

4. Click on the "Edit" button next to the "Concurrency" section.

5. In the "Edit Concurrency" dialog box, you can set the maximum number of concurrent executions for the Lambda function. You can set a value between 1 and 1000.

6. Once you have set the desired concurrency limit, click on the "Save" button to apply the changes.

7. You can also configure the reserved concurrency for the Lambda function if you want to ensure that a specific number of concurrent executions are always available for the function.

8. After configuring the concurrency settings, monitor the Lambda function to ensure that it is operating within the specified concurrency limits.

By following these steps, you can remediate the misconfiguration of AWS Lambda not having concurrency configured.
</Accordion>

</AccordionGroup>
</Tab>
</Tabs>

