---
slug: is_tracing_enabled
title: Lambda Functions Should Have Tracing Enabled
sidebar_label: Lambda Functions Should Have Tracing Enabled
---

### More Info:

Tracing should be enabled for your AWS Lambda functions in order to gain visibility into the functions execution and performance.

### Risk Level

Low

### Address

Operational Maturity, Security

### Compliance Standards

CBP



### Triage and Remediation
<Tabs>


<Tab title='Prevention'>
### How to Prevent
<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
To prevent the misconfiguration of Lambda functions not having tracing enabled in AWS using the AWS Management Console, follow these steps:

1. **Navigate to the Lambda Console:**
   - Open the AWS Management Console.
   - In the Services menu, select "Lambda" to go to the Lambda dashboard.

2. **Select the Lambda Function:**
   - In the Lambda dashboard, you will see a list of your Lambda functions.
   - Click on the name of the Lambda function for which you want to enable tracing.

3. **Enable Tracing:**
   - In the Lambda function configuration page, scroll down to the "Monitoring and operations tools" section.
   - Find the "AWS X-Ray" option and check the box labeled "Active tracing."

4. **Save Changes:**
   - After enabling the tracing option, click the "Save" button at the top right corner of the page to apply the changes.

By following these steps, you ensure that tracing is enabled for your Lambda functions, which helps in monitoring and debugging.
</Accordion>

<Accordion title='Using CLI'>
To ensure that AWS Lambda functions have tracing enabled using the AWS CLI, you can follow these steps:

1. **Check Current Tracing Configuration:**
   First, you need to check the current tracing configuration of your Lambda function. This can be done using the `get-function-configuration` command.

   ```sh
   aws lambda get-function-configuration --function-name <your-function-name>
   ```

2. **Enable Tracing for an Existing Lambda Function:**
   If tracing is not enabled, you can enable it using the `update-function-configuration` command. Set the `--tracing-config` parameter to `Mode=Active`.

   ```sh
   aws lambda update-function-configuration --function-name <your-function-name> --tracing-config Mode=Active
   ```

3. **Create a New Lambda Function with Tracing Enabled:**
   When creating a new Lambda function, you can enable tracing by specifying the `--tracing-config` parameter in the `create-function` command.

   ```sh
   aws lambda create-function --function-name <your-function-name> --runtime <runtime> --role <role-arn> --handler <handler> --zip-file fileb://<path-to-zip-file> --tracing-config Mode=Active
   ```

4. **Verify Tracing Configuration:**
   After enabling tracing, verify the configuration to ensure that it has been applied correctly.

   ```sh
   aws lambda get-function-configuration --function-name <your-function-name>
   ```

By following these steps, you can ensure that your AWS Lambda functions have tracing enabled, which helps in monitoring and debugging your serverless applications.
</Accordion>

<Accordion title='Using Python'>
To prevent the misconfiguration of Lambda functions not having tracing enabled in AWS, you can use Python scripts to ensure that tracing is enabled when creating or updating Lambda functions. Below are the steps to achieve this:

### Step 1: Install Boto3
Ensure you have the Boto3 library installed, which is the AWS SDK for Python.

```bash
pip install boto3
```

### Step 2: Create a Python Script to Enable Tracing

Here is a Python script that enables tracing for a Lambda function:

```python
import boto3

# Initialize a session using Amazon Lambda
session = boto3.Session()
lambda_client = session.client('lambda')

def enable_tracing(function_name):
    try:
        # Update the function configuration to enable tracing
        response = lambda_client.update_function_configuration(
            FunctionName=function_name,
            TracingConfig={
                'Mode': 'Active'  # Options are 'Active' or 'PassThrough'
            }
        )
        print(f"Tracing enabled for function: {function_name}")
    except Exception as e:
        print(f"Error enabling tracing for function {function_name}: {e}")

# Example usage
function_name = 'your_lambda_function_name'
enable_tracing(function_name)
```

### Step 3: Automate Tracing for New Functions

To ensure that all new Lambda functions have tracing enabled, you can create a script that wraps the creation of Lambda functions and automatically enables tracing:

```python
import boto3

# Initialize a session using Amazon Lambda
session = boto3.Session()
lambda_client = session.client('lambda')

def create_lambda_function(function_name, role_arn, handler, code):
    try:
        # Create the Lambda function
        response = lambda_client.create_function(
            FunctionName=function_name,
            Runtime='python3.8',  # Specify your runtime
            Role=role_arn,
            Handler=handler,
            Code=code,
            TracingConfig={
                'Mode': 'Active'  # Enable tracing during creation
            }
        )
        print(f"Lambda function {function_name} created with tracing enabled.")
    except Exception as e:
        print(f"Error creating Lambda function {function_name}: {e}")

# Example usage
function_name = 'your_new_lambda_function_name'
role_arn = 'your_iam_role_arn'
handler = 'your_lambda_handler'
code = {
    'ZipFile': b'your_lambda_function_code_zip_file'
}
create_lambda_function(function_name, role_arn, handler, code)
```

### Step 4: Verify Tracing Configuration

You can also create a script to verify that tracing is enabled for all existing Lambda functions:

```python
import boto3

# Initialize a session using Amazon Lambda
session = boto3.Session()
lambda_client = session.client('lambda')

def verify_tracing(function_name):
    try:
        # Get the function configuration
        response = lambda_client.get_function_configuration(
            FunctionName=function_name
        )
        tracing_mode = response['TracingConfig']['Mode']
        if tracing_mode == 'Active':
            print(f"Tracing is enabled for function: {function_name}")
        else:
            print(f"Tracing is NOT enabled for function: {function_name}")
    except Exception as e:
        print(f"Error verifying tracing for function {function_name}: {e}")

# Example usage
function_name = 'your_lambda_function_name'
verify_tracing(function_name)
```

By following these steps, you can ensure that tracing is enabled for your AWS Lambda functions using Python scripts.
</Accordion>

</AccordionGroup>
</Tab>

<Tab title='Cause'>
### Check Cause
<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
1. Sign in to the AWS Management Console.
2. Navigate to the AWS Lambda console. You can do this by typing 'Lambda' into the search bar and selecting 'Lambda' from the dropdown menu.
3. In the AWS Lambda console, you will see a list of all your Lambda functions. Click on the name of the function you want to check.
4. In the function's configuration page, scroll down to the 'Monitoring tools' section. Here, you should see a 'Tracing' option. If the 'Tracing' option is set to 'Active', then tracing is enabled for that function. If it is set to 'PassThrough' or 'Disabled', then tracing is not enabled.
</Accordion>

<Accordion title='Using CLI'>
1. First, you need to install and configure AWS CLI on your local machine. You can do this by following the instructions provided by AWS. Make sure you have the necessary permissions to access the Lambda functions.

2. Once the AWS CLI is set up, you can list all the Lambda functions in your account by running the following command:

   ```
   aws lambda list-functions --region your-region
   ```

   Replace 'your-region' with the region your AWS resources are located in. This command will return a JSON object with all your Lambda functions.

3. To check if a specific Lambda function has tracing enabled, you can use the following command:

   ```
   aws lambda get-function-configuration --function-name your-function-name --region your-region
   ```

   Replace 'your-function-name' with the name of the Lambda function you want to check and 'your-region' with the region your AWS resources are located in. This command will return a JSON object with the configuration of the specified Lambda function.

4. In the returned JSON object, look for the 'TracingConfig' field. If the 'Mode' field under 'TracingConfig' is set to 'Active', then tracing is enabled for that Lambda function. If it's set to 'PassThrough', then tracing is not enabled.
</Accordion>

<Accordion title='Using Python'>
1. Install the necessary Python libraries: Before you start, you need to install the AWS SDK for Python (Boto3) in your environment. This can be done using pip:

   ```bash
   pip install boto3
   ```

2. Import the necessary libraries and establish a session with AWS: You need to import Boto3 and establish a session with your AWS account. Replace 'your_region' with the AWS region you're working in.

   ```python
   import boto3

   session = boto3.Session(
       region_name='your_region'
   )
   ```

3. List all Lambda functions and check their tracing configuration: You can use the `list_functions` method to get a list of all Lambda functions in your account. Then, for each function, use the `get_function_configuration` method to get its configuration details. If the 'TracingConfig' field is not set to 'Active', the function does not have tracing enabled.

   ```python
   client = session.client('lambda')

   functions = client.list_functions()['Functions']

   for function in functions:
       config = client.get_function_configuration(
           FunctionName=function['FunctionName']
       )
       if config['TracingConfig']['Mode'] != 'Active':
           print(f"Function {function['FunctionName']} does not have tracing enabled.")
   ```

4. Run the script: Finally, you can run the script to check the tracing configuration of all your Lambda functions. If a function does not have tracing enabled, it will be printed to the console. This way, you can easily identify any misconfigurations in your AWS Lambda functions.
</Accordion>

</AccordionGroup>
</Tab>

<Tab title='Remediation'>
### Remediation

<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
To remediate the misconfiguration "Lambda Functions Should Have Tracing Enabled" for AWS using the AWS console, follow the below steps:

1. Open the AWS Lambda console.
2. Select the Lambda function for which you want to enable tracing.
3. Click on the "Configuration" tab.
4. Scroll down to the "Debugging and error handling" section.
5. Under "Debugging and error handling", click on the "Edit" button.
6. In the "Edit function" page, scroll down to the "Tracing" section.
7. Under "Tracing", select the "Active" option.
8. In the "Tracing mode" drop-down, select the "AWS X-Ray" option.
9. Click on the "Save" button at the top of the page to save the changes.

Once the above steps are completed, tracing will be enabled for the selected Lambda function in AWS.

#
</Accordion>

<Accordion title='Using CLI'>
To remediate the misconfiguration of Lambda Functions not having tracing enabled in AWS using AWS CLI, follow these steps:

1. Open the AWS CLI on your local machine or EC2 instance.

2. Run the following command to enable tracing on all Lambda functions in the AWS account:

```
aws lambda update-function-configuration --tracing-config Mode=Active
```

3. If you want to enable tracing only on specific Lambda functions, run the following command:

```
aws lambda update-function-configuration --function-name <function-name> --tracing-config Mode=Active
```

Replace `<function-name>` with the name of the Lambda function that you want to enable tracing on.

4. Verify that tracing is enabled on the Lambda function by running the following command:

```
aws lambda get-function-configuration --function-name <function-name>
```

This command will return the configuration details of the Lambda function, including the tracing mode. If the tracing mode is set to "Active", then tracing is enabled on the function.

By following these steps, you can remediate the misconfiguration of Lambda Functions not having tracing enabled in AWS using AWS CLI.
</Accordion>

<Accordion title='Using Python'>
To remediate the misconfiguration of Lambda Functions not having tracing enabled in AWS, you can follow the below steps using Python:

1. Import the necessary AWS SDK libraries for Python:
```python
import boto3
```

2. Create an AWS Lambda client object:
```python
lambda_client = boto3.client('lambda')
```

3. List all the available Lambda functions:
```python
functions = lambda_client.list_functions()
```

4. For each function, check if tracing is enabled or not:
```python
for function in functions['Functions']:
    function_name = function['FunctionName']
    tracing_config = lambda_client.get_function(FunctionName=function_name)['TracingConfig']
    if tracing_config['Mode'] != 'Active':
        # Enable tracing for the function
        lambda_client.update_function_configuration(FunctionName=function_name, TracingConfig={'Mode': 'Active'})
```

5. Save the Python script and execute it to enable tracing for all the available Lambda functions.

With the above steps, you can easily remediate the misconfiguration of Lambda Functions not having tracing enabled in AWS.
</Accordion>

</AccordionGroup>
</Tab>
</Tabs>
### Additional Reading:

- [https://docs.aws.amazon.com/lambda/latest/dg/services-xray.html](https://docs.aws.amazon.com/lambda/latest/dg/services-xray.html) 

