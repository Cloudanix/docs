---
slug: deprecated_runtime
title: Lambda Functions Should Not Use Deprecated Versions
sidebar_label: Lambda Functions Should Not Use Deprecated Versions
---

### More Info:

You should not use the deprecated versions of the execution environment for your Amazon Lambda functions in order to adhere to AWS best practices.

### Risk Level

Low

### Address

Security, Reliability

### Compliance Standards

AWSWAF


### Remediation

#### Using Console

To remediate the misconfiguration of Lambda Functions using deprecated versions in AWS, follow these steps:

1. Login to the AWS Management Console.
2. Go to the AWS Lambda service.
3. Select the Lambda function that is using a deprecated version.
4. Click on the "Configuration" tab.
5. In the "Runtime settings" section, select the latest version of the runtime that is available. For example, if the function is using Node.js 8.10, select Node.js 14.x.
6. Click on the "Save" button to save the changes.
7. Test the function to ensure that it is working properly with the updated runtime version.

By following these steps, you have successfully remediated the misconfiguration of Lambda Functions using deprecated versions in AWS.

#### Using CLI

To remediate the Lambda Functions Should Not Use Deprecated Versions misconfiguration in AWS using AWS CLI, follow these steps:

1. Open your terminal and make sure you have the AWS CLI installed.

2. Run the following command to list all the Lambda functions in your AWS account:

```
aws lambda list-functions
```

3. Identify the Lambda functions that are using deprecated versions.

4. Run the following command to update the runtime of the Lambda function to a non-deprecated version:

```
aws lambda update-function-configuration --function-name <function-name> --runtime <runtime>
```

Replace `<function-name>` with the name of the Lambda function that you want to update, and `<runtime>` with the non-deprecated runtime version that you want to use.

5. Repeat steps 4 and 5 for all the Lambda functions that are using deprecated versions.

6. Verify that all the Lambda functions are now using non-deprecated versions by running the following command:

```
aws lambda list-functions --query 'Functions[*].Runtime'
```

This command will return a list of all the Lambda functions and their respective runtimes. Make sure that all the runtimes are non-deprecated versions.

By following these steps, you can remediate the Lambda Functions Should Not Use Deprecated Versions misconfiguration in AWS using AWS CLI.

#### Using Python

To remediate the misconfiguration "Lambda Functions Should Not Use Deprecated Versions" in AWS using Python, follow the below steps:

1. Login to the AWS Management Console and navigate to the Lambda service.

2. Select the Lambda function that is using a deprecated version.

3. Click on the "Configuration" tab and scroll down to the "Runtime settings" section.

4. Verify the runtime version of the function. If it is using a deprecated version, then it needs to be updated.

5. Update the runtime version of the Lambda function to the latest version supported by AWS. You can refer to the AWS documentation to find the latest supported version.

6. Once the update is complete, click on the "Save" button to save the changes.

7. Test the updated Lambda function to ensure that it is functioning as expected.

8. Finally, it is recommended to regularly monitor the runtime versions of your Lambda functions and update them as needed to ensure that they are not using any deprecated versions.

In Python, you can use the AWS SDK boto3 to programmatically update the runtime version of your Lambda function. Here's an example code snippet:

```
import boto3

# Replace <function_name> and <new_runtime> with your function name and the new runtime version respectively
function_name = "<function_name>"
new_runtime = "<new_runtime>"

# Create a Lambda client object
lambda_client = boto3.client('lambda')

# Update the runtime version of the function
response = lambda_client.update_function_configuration(
    FunctionName=function_name,
    Runtime=new_runtime
)

# Print the response
print(response)
```


### Additional Reading:

- [https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html](https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtimes.html) 

