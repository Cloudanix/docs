---
slug: sagemaker_notebook_data_encrypted
title: Notebook Data Encrypted
sidebar_label: Notebook Data Encrypted
---

### More Info:

Ensure that the data stored on Machine Learning (ML) storage volumes attached to your AWS SageMaker notebook instances is encrypted in order to meet regulatory requirements and protect your SageMaker data at rest. SageMaker is a fully-managed AWS service that enables developers and data engineers to quickly and easily build, train and deploy machine learning models at any scale. An AWS SageMaker notebook instance is a fully managed ML instance that is running the Jupyter Notebook open-source web application.

### Risk Level

High

### Address

Cost optimization, Operational Maturity, Security

### Compliance Standards

HIPAA, GDPR, CISAWS, CBP, NIST

### Remediation

#### Using Console

1. Log in to the AWS Management Console:

    Open the AWS Management Console and navigate to the SageMaker service.

2. Create or Modify a Notebook Instance:

    To create a new notebook instance, click on "Create notebook instance."
    To modify an existing instance, select the instance and click "Edit."

3. Configure Encryption:

    In the "Notebook instance settings," scroll down to the "Encryption settings" section.
    Enable encryption by selecting a KMS key. You can either use the default SageMaker key or specify a custom KMS key.
    Ensure that both "Encrypt notebook storage" and "Encrypt EBS volume" (if available) are enabled.

4. Save Changes:

    If you're creating a new instance, complete the other required fields and click "Create notebook instance."
    If you're modifying an existing instance, save the changes and restart the instance for the changes to take effect.

#### Using CLI

To encrypt the storage of a SageMaker notebook instance using the AWS CLI, you need to specify the KmsKeyId parameter during creation or update.

1. Create a New Notebook Instance:

    ```bash
    aws sagemaker create-notebook-instance \
        --notebook-instance-name <YourNotebookInstanceName> \
        --instance-type <InstanceType> \
        --role-arn <IAMRoleARN> \
        --kms-key-id <KMSKeyID> \
        --volume-size-in-gb <VolumeSize> \
        --default-code-repository <CodeRepositoryURL> \
        --additional-code-repositories <AdditionalCodeRepositories>
    ```

2. Modify an Existing Notebook Instance:

    ```bash
    aws sagemaker update-notebook-instance \
        --notebook-instance-name <YourNotebookInstanceName> \
        --kms-key-id <KMSKeyID>
    ```

3. After updating, you may need to stop and then start the notebook instance:

    ```bash
    aws sagemaker stop-notebook-instance --notebook-instance-name <YourNotebookInstanceName>
    aws sagemaker start-notebook-instance --notebook-instance-name <YourNotebookInstanceName>
    ```

### Using Python

To use a Python script to encrypt a SageMaker notebook instance, you'll need the boto3 library:

1. Install boto3 (if not already installed):
    ```bash
    pip install boto3
    ```

2. Script to Create or Update a Notebook Instance:
    ```python
    import boto3

    sagemaker = boto3.client('sagemaker')

    # Create a new notebook instance
    def create_notebook_instance():
        response = sagemaker.create_notebook_instance(
            NotebookInstanceName='<YourNotebookInstanceName>',
            InstanceType='<InstanceType>',
            RoleArn='<IAMRoleARN>',
            KmsKeyId='<KMSKeyID>',
            VolumeSizeInGB=<VolumeSize>,
            DefaultCodeRepository='<CodeRepositoryURL>',
            AdditionalCodeRepositories=['<AdditionalCodeRepositories>']
        )
        print(response)

    # Update an existing notebook instance
    def update_notebook_instance():
        response = sagemaker.update_notebook_instance(
            NotebookInstanceName='<YourNotebookInstanceName>',
            KmsKeyId='<KMSKeyID>'
        )
        print(response)

    # Stop and start the notebook instance to apply changes
    def restart_notebook_instance():
        sagemaker.stop_notebook_instance(NotebookInstanceName='<YourNotebookInstanceName>')
        waiter = sagemaker.get_waiter('notebook_instance_stopped')
        waiter.wait(NotebookInstanceName='<YourNotebookInstanceName>')
        sagemaker.start_notebook_instance(NotebookInstanceName='<YourNotebookInstanceName>')

    # Choose the function to call
    create_notebook_instance()
    # or
    update_notebook_instance()
    restart_notebook_instance()
    ```
    Replace placeholders (`<YourNotebookInstanceName>`, `<InstanceType>`, `<IAMRoleARN>`, `<KMSKeyID>`, `<VolumeSize>`, `<CodeRepositoryURL>`, and `<AdditionalCodeRepositories>`) with appropriate values.

### Additional Reading:

- [https://docs.aws.amazon.com/sagemaker/latest/dg/encryption-at-rest.html](https://docs.aws.amazon.com/sagemaker/latest/dg/encryption-at-rest.html) 

