### Remediation

To remediate SageMaker notebook instances without a KMS key configured for encryption, you can use the AWS Management Console, AWS CLI, or a Python script with the `boto3` library. Here are the steps for each method:

#### Using Console

1. **Log in to the AWS Management Console:**
   - Open the AWS Management Console and navigate to the SageMaker service.

2. **Identify Notebook Instances without KMS Key:**
   - Go to the "Notebook instances" section.
   - Check each notebook instance for the "KmsKeyId" setting. Instances without a KMS key will have this field empty.

3. **Configure KMS Key:**
   - Select the notebook instance you want to modify.
   - Click "Edit."
   - In the "Notebook instance settings," find the "Encryption settings" section.
   - Specify a KMS key by selecting one from the dropdown or entering the KMS key ID.
   - Save the changes and restart the notebook instance for the changes to take effect.

#### Using CLI

To configure a KMS key for a SageMaker notebook instance using the AWS CLI, you need to update the `KmsKeyId` parameter.

**Identify and Update Notebook Instances:**

```sh
# List all notebook instances
aws sagemaker list-notebook-instances

# Describe a specific notebook instance to check its KMS key setting
aws sagemaker describe-notebook-instance --notebook-instance-name <YourNotebookInstanceName>

# Update the notebook instance to configure a KMS key
aws sagemaker update-notebook-instance \
    --notebook-instance-name <YourNotebookInstanceName> \
    --kms-key-id <KMSKeyID>

# Restart the notebook instance to apply changes
aws sagemaker stop-notebook-instance --notebook-instance-name <YourNotebookInstanceName>
aws sagemaker start-notebook-instance --notebook-instance-name <YourNotebookInstanceName>
```

#### Using Python

To configure a KMS key for SageMaker notebook instances using a Python script, you'll need the `boto3` library:

1. **Install `boto3` (if not already installed):**

```sh
pip install boto3
```

2. **Script to Identify and Update Notebook Instances:**

```python
import boto3

sagemaker = boto3.client('sagemaker')

def list_notebook_instances():
    response = sagemaker.list_notebook_instances()
    return response['NotebookInstances']

def describe_notebook_instance(notebook_instance_name):
    response = sagemaker.describe_notebook_instance(
        NotebookInstanceName=notebook_instance_name
    )
    return response

def update_notebook_instance(notebook_instance_name, kms_key_id):
    response = sagemaker.update_notebook_instance(
        NotebookInstanceName=notebook_instance_name,
        KmsKeyId=kms_key_id
    )
    print(response)

def restart_notebook_instance(notebook_instance_name):
    sagemaker.stop_notebook_instance(NotebookInstanceName=notebook_instance_name)
    waiter = sagemaker.get_waiter('notebook_instance_stopped')
    waiter.wait(NotebookInstanceName=notebook_instance_name)
    sagemaker.start_notebook_instance(NotebookInstanceName=notebook_instance_name)

# KMS Key ID to be configured
kms_key_id = '<YourKMSKeyID>'

# Identify and update notebook instances without KMS key
notebook_instances = list_notebook_instances()
for instance in notebook_instances:
    instance_name = instance['NotebookInstanceName']
    details = describe_notebook_instance(instance_name)
    if not details.get('KmsKeyId', ''):
        print(f"Configuring KMS key for notebook instance: {instance_name}")
        update_notebook_instance(instance_name, kms_key_id)
        restart_notebook_instance(instance_name)
```

Replace the placeholder `<YourKMSKeyID>` with your actual KMS key ID.

This script will list all notebook instances, describe each one to check its KMS key setting, and then configure the KMS key for those without it. Finally, it will restart the modified instances to apply the changes.
