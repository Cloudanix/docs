---
slug: ec2_managedinstance_applications_required
title: Specified Applications Should Be Installed On Instance
sidebar_label: Specified Applications Should Be Installed On Instance
---

### More Info:

This rule checks if all of the specified applications are installed on the instance. Optionally, specify the minimum acceptable version. You can also specify the platform to apply the rule only to instances running that platform.

### Risk Level

High

### Address

Configuration

### Compliance Standards

CBP


### Triage and Remediation
<Tabs>

<Tab title='Cause'>
### Check Cause
<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
1. Log in to the AWS Management Console and navigate to the EC2 dashboard.
2. In the EC2 dashboard, select the "Instances" option from the left-hand side menu. This will display a list of all the EC2 instances that are currently running in your AWS environment.
3. Select the EC2 instance you want to check for the specified applications. Once selected, click on the "Actions" button at the top of the dashboard, then select "Instance Settings", and finally "Get System Log".
4. The System Log will display all the system events that have occurred since the instance was started. You can search through this log to see if the specified applications have been installed on the instance. If the applications are installed, there should be log entries indicating their installation. If there are no such entries, it's likely that the applications are not installed.
</Accordion>

<Accordion title='Using CLI'>
1. First, you need to install and configure AWS CLI on your local machine. You can download it from the official AWS website and configure it using the "aws configure" command. You will be prompted to provide your AWS Access Key ID, Secret Access Key, Default region name, and Default output format.

2. Once the AWS CLI is set up, you can list all your EC2 instances using the following command:
   ```
   aws ec2 describe-instances --query 'Reservations[*].Instances[*].[InstanceId]' --output text
   ```
   This command will return the IDs of all your EC2 instances.

3. To check if a specific application is installed on an instance, you need to connect to the instance. You can do this using the following command:
   ```
   ssh -i /path/my-key-pair.pem my-instance-user-name@my-instance-public-dns-name
   ```
   Replace "/path/my-key-pair.pem" with the path to your private key file, "my-instance-user-name" with the name of the user account on the instance, and "my-instance-public-dns-name" with the public DNS name of the instance.

4. Once you are connected to the instance, you can check if a specific application is installed by using the appropriate command for the operating system of the instance. For example, on a Linux instance, you can use the following command to check if a specific application is installed:
   ```
   dpkg -l | grep 'application-name'
   ```
   Replace "application-name" with the name of the application you want to check. If the application is installed, this command will return a list of packages related to the application. If the application is not installed, this command will not return anything.
</Accordion>

<Accordion title='Using Python'>
1. **Setup AWS SDK (Boto3):** First, you need to set up AWS SDK (Boto3) for Python. This allows Python to interact with AWS services. You can install it using pip:

   ```python
   pip install boto3
   ```

2. **Configure AWS Credentials:** Next, you need to configure your AWS credentials. You can do this by creating a file at ~/.aws/credentials. At the command line, type the following:

   ```bash
   aws configure
   ```

   Then input your AWS Access Key ID, Secret Access Key, Default region name, and Default output format when prompted.

3. **Create a Python Script to List EC2 Instances:** Now, you can create a Python script that uses Boto3 to list your EC2 instances. Here's a simple script that does this:

   ```python
   import boto3

   def list_instances():
       ec2 = boto3.resource('ec2')
       for instance in ec2.instances.all():
           print('ID: {}, State: {}, Type: {}'.format(
               instance.id, instance.state['Name'], instance.instance_type))

   if __name__ == '__main__':
       list_instances()
   ```

4. **Check for Specified Applications:** To check if a specific application is installed on an instance, you can use the AWS Systems Manager Run Command. This allows you to run shell scripts or commands on your instances. Here's an example of how you can do this:

   ```python
   import boto3

   def check_application(instance_id, application):
       ssm = boto3.client('ssm')
       response = ssm.send_command(
           InstanceIds=[instance_id],
           DocumentName='AWS-RunShellScript',
           Parameters={'commands': ['which {}'.format(application)]},
       )
       command_id = response['Command']['CommandId']
       output = ssm.get_command_invocation(
           CommandId=command_id,
           InstanceId=instance_id,
       )
       return output['StatusDetails'] == 'Success'

   if __name__ == '__main__':
       print(check_application('your-instance-id', 'your-application'))
   ```

   This script sends a command to the specified instance to check if the specified application is installed. It does this by using the 'which' command, which returns the path to the application if it's installed, or nothing if it's not. The script then checks the status of the command invocation to determine if the application is installed.
</Accordion>

</AccordionGroup>
</Tab>

<Tab title='Remediation'>
### Remediation

<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
To remediate the issue of specified applications not being installed on an AWS EC2 instance, you can follow these steps using the AWS Management Console:

1. **Connect to your EC2 instance**: 
   - Log in to the AWS Management Console.
   - Navigate to the EC2 dashboard.
   - Identify the EC2 instance where the specified applications need to be installed.
   - Connect to the EC2 instance using SSH (for Linux instances) or RDP (for Windows instances).

2. **Install the specified applications**:
   - For Linux instances:
     - Use the package manager (e.g., apt for Ubuntu, yum for Amazon Linux) to install the required applications. For example:
       ```
       sudo apt update
       sudo apt install <application_name>
       ```
   - For Windows instances:
     - Download the installer for the required applications from the official website or a trusted source.
     - Run the installer and follow the installation instructions.

3. **Verify the installation**:
   - Once the applications are installed, verify that they are working correctly.
   - Test the functionality of the applications to ensure they are installed and configured properly.

4. **Update the AMI (optional)**:
   - If you want to ensure that future instances launched from the same AMI have the specified applications installed, you can create a new AMI from the updated instance.
   - Navigate to the EC2 dashboard, select the updated instance, and create a new AMI from it.

5. **Update Auto Scaling Launch Configuration (if applicable)**:
   - If your EC2 instances are part of an Auto Scaling group, you may need to update the launch configuration to use the new AMI with the specified applications installed.
   - Navigate to the Auto Scaling groups section in the EC2 dashboard and update the launch configuration.

By following these steps, you should be able to remediate the issue of specified applications not being installed on an AWS EC2 instance.

#
</Accordion>

<Accordion title='Using CLI'>
To remediate the misconfiguration of specified applications not being installed on an AWS EC2 instance using the AWS CLI, follow these steps:

1. Connect to your AWS account using the AWS CLI by running the `aws configure` command and providing your AWS Access Key ID, Secret Access Key, default region, and default output format.

2. Identify the EC2 instance that requires the specified applications to be installed. You can list all your EC2 instances using the following command:
   ```
   aws ec2 describe-instances --query 'Reservations[*].Instances[*].[InstanceId, InstanceType, State.Name, PublicIpAddress, PrivateIpAddress, Tags[?Key==`Name`].Value[]]' --output table
   ```

3. Connect to the identified EC2 instance using SSH. Make sure you have the necessary permissions to connect to the instance.

4. Once connected to the instance, you can install the specified applications using the package manager available on the instance. For example, if you need to install Apache web server on a Linux instance, you can use the following command:
   ```
   sudo yum install httpd   # For Amazon Linux, CentOS, or RHEL
   ```
   ```
   sudo apt-get install apache2   # For Ubuntu or Debian
   ```

5. After installing the required applications, start the services if necessary. For example, to start the Apache web server, you can use the following command:
   ```
   sudo service httpd start   # For Amazon Linux, CentOS, or RHEL
   ```
   ```
   sudo service apache2 start   # For Ubuntu or Debian
   ```

6. Verify that the specified applications have been successfully installed and are running as expected. You can test the installation by accessing the application through a web browser or using other appropriate methods.

7. Once you have verified that the applications are installed and functioning correctly, you have successfully remediated the misconfiguration.

By following these steps, you can ensure that the specified applications are installed on the AWS EC2 instance and the misconfiguration is remediated.
</Accordion>

<Accordion title='Using Python'>
To remediate the misconfiguration of specified applications not being installed on an AWS EC2 instance using Python, you can follow these steps:

1. **Create a Python script**: Start by creating a Python script that will install the required applications on the EC2 instance. You can use the `boto3` library, which is the AWS SDK for Python, to interact with AWS services.

2. **Install Boto3**: If you haven't already installed the `boto3` library, you can do so using pip:
   ```bash
   pip install boto3
   ```

3. **Configure AWS credentials**: Make sure you have your AWS credentials configured either by setting environment variables or using the AWS CLI `aws configure` command.

4. **Write Python script**: Here is an example Python script that uses `boto3` to connect to AWS EC2 and install the specified applications on the instance:
   ```python
   import boto3

   # Specify the instance id of the EC2 instance
   instance_id = 'your_instance_id'

   # Specify the applications to be installed
   applications = ['application1', 'application2']

   # Connect to EC2
   ec2 = boto3.resource('ec2')

   # Get the EC2 instance
   instance = ec2.Instance(instance_id)

   # SSH into the instance and install the applications
   install_commands = [
       f'sudo yum update -y',
       f'sudo yum install -y {" ".join(applications)}'
   ]

   # Run commands on the instance
   response = instance.run_shell_script(Commands=install_commands)

   print(response)
   ```

5. **Run the Python script**: Save the script to a file, for example, `install_applications.py`, and run it using Python:
   ```bash
   python install_applications.py
   ```

6. **Verify installation**: Once the script has executed successfully, SSH into the EC2 instance and verify that the specified applications have been installed.

By following these steps, you can use Python and `boto3` to remediate the misconfiguration of specified applications not being installed on an AWS EC2 instance.
</Accordion>

</AccordionGroup>
</Tab>
</Tabs>

