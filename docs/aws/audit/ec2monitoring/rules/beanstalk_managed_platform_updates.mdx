---
slug: beanstalk_managed_platform_updates
title: Ensure Managed Platform Updates Are Enabled For Elastic Beanstalk Environment
sidebar_label: Ensure Managed Platform Updates Are Enabled For Elastic Beanstalk Environment
---

### More Info:

Ensure that all your Amazon Elastic Beanstalk (EB) application environments have platform updates enabled in order to receive bug fixes, software updates and new features. Managed platform updates perform immutable environment updates.

### Risk Level

Medium

### Address

Operational Maturity, Reliability, Security

### Compliance Standards

ISO27001, HIPAA



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Sign in to the AWS Management Console.
2. Navigate to the Elastic Beanstalk console (Services > Elastic Beanstalk).
3. In the navigation pane, choose "Environments", and then choose the name of your Elastic Beanstalk environment.
4. In the navigation pane, choose "Configuration". In the "Software" category, choose "Edit".
5. In the "Managed Updates" section, check the status of "Managed Platform Updates". If it's not enabled, then it's a misconfiguration.

#### Using CLI

1. Install and configure AWS CLI: Before you can start using AWS CLI, you need to install it on your local system and configure it with your AWS account credentials. You can do this by running the following commands:

   ```
   pip install awscli
   aws configure
   ```
   You will be prompted to provide your AWS Access Key ID, Secret Access Key, Default region name, and Default output format.

2. List all Elastic Beanstalk environments: Use the following command to list all the Elastic Beanstalk environments in your AWS account:

   ```
   aws elasticbeanstalk describe-environments
   ```
   This command will return a JSON output with details about all your Elastic Beanstalk environments.

3. Extract the environment IDs: From the JSON output, extract the "EnvironmentId" of each environment. You can use a tool like jq to parse the JSON output. Here is an example command:

   ```
   aws elasticbeanstalk describe-environments | jq -r '.Environments[].EnvironmentId'
   ```

4. Check if Managed Platform Updates are enabled: For each environment ID, use the following command to check if Managed Platform Updates are enabled:

   ```
   aws elasticbeanstalk describe-configuration-settings --environment-id <EnvironmentId> | jq -r '.ConfigurationSettings[].OptionSettings[] | select(.Namespace=="aws:elasticbeanstalk:managedactions") | .Value'
   ```
   Replace `<EnvironmentId>` with the actual environment ID. If Managed Platform Updates are enabled, this command will return "true". If they are not enabled, it will return "false".

#### Using Python

To check if Managed Platform Updates are enabled for Elastic Beanstalk Environment in EC2 using Python scripts, you can use the Boto3 library, which allows you to directly interact with AWS services, including Elastic Beanstalk. Here are the steps:

1. **Import the Boto3 library in Python:**
   Boto3 is the Amazon Web Services (AWS) Software Development Kit (SDK) for Python, which allows Python developers to write software that makes use of services like Amazon S3, Amazon EC2, etc. If you haven't installed it yet, you can do so using pip:
   ```python
   pip install boto3
   ```
   Then, import it in your script:
   ```python
   import boto3
   ```

2. **Create an Elastic Beanstalk client:**
   You need to create an Elastic Beanstalk (EB) client using Boto3. This client will interact with your EB environments. Replace 'region_name' with the region of your EB environment.
   ```python
   eb = boto3.client('elasticbeanstalk', region_name='your_region_name')
   ```

3. **Retrieve the details of your EB environments:**
   Use the `describe_environments()` function to get the details of your EB environments. This function returns a lot of information, including the environment name, ID, status, health, etc.
   ```python
   response = eb.describe_environments()
   ```

4. **Check if Managed Platform Updates are enabled:**
   The `describe_environments()` function also returns the configuration settings of each environment. You can check if Managed Platform Updates are enabled by checking the `ManagedActionsEnabled` attribute. If it's set to `True`, then Managed Platform Updates are enabled.
   ```python
   for environment in response['Environments']:
       if not environment['ManagedActionsEnabled']:
           print(f"Managed Platform Updates are not enabled for {environment['EnvironmentName']}")
   ```
   This script will print the names of all environments where Managed Platform Updates are not enabled.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the misconfiguration "Ensure Managed Platform Updates Are Enabled For Elastic Beanstalk Environment" in AWS using AWS console, follow the below steps:

1. Login to AWS Management Console.
2. Navigate to Elastic Beanstalk service.
3. Select the environment for which you want to enable the managed platform updates.
4. Click on the "Configuration" option from the left-hand menu.
5. Scroll down to the "Managed platform updates" section and click on "Edit".
6. Select the "Enable managed platform updates" checkbox.
7. Choose the "All platform updates" option from the dropdown.
8. Click on the "Apply" button to save the changes.
9. Wait for the environment to update with the latest platform version.

By following the above steps, you will be able to remediate the misconfiguration "Ensure Managed Platform Updates Are Enabled For Elastic Beanstalk Environment" for AWS using AWS console.

#### Using CLI

To remediate the misconfiguration "Ensure Managed Platform Updates Are Enabled For Elastic Beanstalk Environment" for AWS using AWS CLI, follow the below steps:

1. Open the terminal and install the AWS CLI if it is not already installed.

2. Configure the AWS CLI using the `aws configure` command by providing the Access Key ID, Secret Access Key, Default region name, and output format.

3. Execute the below command to enable managed platform updates for the Elastic Beanstalk environment:

```
aws elasticbeanstalk update-environment --environment-name <environment-name> --option-settings Namespace=aws:elasticbeanstalk:managedactions,OptionName=ManagedActionsEnabled,Value=true
```

Note: Replace `<environment-name>` with the name of the Elastic Beanstalk environment for which you want to enable managed platform updates.

4. Verify the changes by executing the below command:

```
aws elasticbeanstalk describe-environments --environment-names <environment-name> --query "Environments[*].OptionSettings[?Namespace=='aws:elasticbeanstalk:managedactions' && OptionName=='ManagedActionsEnabled'].Value" --output text
```

Note: Replace `<environment-name>` with the name of the Elastic Beanstalk environment for which you have enabled managed platform updates.

The output of the above command should be `true`, which indicates that managed platform updates are enabled for the Elastic Beanstalk environment.

#### Using Python

To remediate the misconfiguration "Ensure Managed Platform Updates Are Enabled For Elastic Beanstalk Environment" for AWS using Python, you can use the AWS SDK for Python (Boto3) to enable managed platform updates for your Elastic Beanstalk environment. Here are the step-by-step instructions:

1. Install Boto3: 

```
pip install boto3
```

2. Import the Boto3 library and create an Elastic Beanstalk client:

```
import boto3

eb_client = boto3.client('elasticbeanstalk')
```

3. Retrieve the list of environments in your account:

```
response = eb_client.describe_environments()
environments = response['Environments']
```

4. Loop through the list of environments and enable managed platform updates for each one:

```
for environment in environments:
    environment_name = environment['EnvironmentName']
    environment_id = environment['EnvironmentId']
    environment_settings = eb_client.describe_configuration_settings(
        ApplicationName='your_application_name',
        EnvironmentName=environment_name
    )
    for setting in environment_settings['ConfigurationSettings'][0]['OptionSettings']:
        if setting['OptionName'] == 'ManagedActionsEnabled':
            if setting['Value'] == 'false':
                eb_client.update_environment(
                    EnvironmentId=environment_id,
                    OptionSettings=[
                        {
                            'Namespace': 'aws:elasticbeanstalk:managedactions',
                            'OptionName': 'ManagedActionsEnabled',
                            'Value': 'true'
                        }
                    ]
                )
                print(f"Managed platform updates enabled for environment {environment_name}")
```

This code will loop through all the Elastic Beanstalk environments in your account, check if managed platform updates are already enabled, and enable them if they are not. Note that you will need to replace `your_application_name` with the name of your Elastic Beanstalk application.

### Additional Reading:

- [https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environment-platform-update-managed.html](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environment-platform-update-managed.html) 


</Tab>
</Tabs>