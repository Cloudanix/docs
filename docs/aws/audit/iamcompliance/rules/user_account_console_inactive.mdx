---
slug: user_account_console_inactive
title: User Console Access Inactive
sidebar_label: User Console Access Inactive
---

### More Info:

Users who are infrequent or do not need access to console, their account access should be cleared off.

### Risk Level

Medium

### Address

Security

### Compliance Standards

CBP



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Sign in to the AWS Management Console and open the IAM console at https://console.aws.amazon.com/iam/.

2. In the navigation pane, choose "Users". This will display a list of all IAM users in your account.

3. For each user, check the "Last activity" column. This column shows the time since the user last accessed the AWS Management Console, used their access keys, or used their password.

4. If the "Last activity" column shows "None" or a date that is more than 90 days ago, the user console access is considered inactive.

#### Using CLI

1. Install and configure AWS CLI: Before you can start using AWS CLI, you need to install it on your local machine and configure it with your AWS account credentials. You can do this by running the following commands:

   Installation: `pip install awscli`
   
   Configuration: `aws configure`

2. List all IAM users: Use the `list-users` command to get a list of all IAM users in your AWS account. The command is as follows:

   `aws iam list-users`

3. Get login profile for each user: For each user, you need to check if they have a login profile. A login profile is required for a user to sign in to the AWS Management Console. You can do this by running the `get-login-profile` command for each user:

   `aws iam get-login-profile --user-name <username>`

4. Check last used password: For each user with a login profile, you can check when they last used their password to sign in to the AWS Management Console. This can be done by running the `get-user` command:

   `aws iam get-user --user-name <username>`

The `PasswordLastUsed` field in the output will tell you when the user last used their password. If this date is more than 90 days ago, the user console access is considered inactive.

#### Using Python

To check for inactive IAM users in AWS using Python scripts, you can use the Boto3 library, which allows you to directly interact with AWS services, including IAM. Here are the steps:

1. **Install Boto3**: First, you need to install the Boto3 library in your Python environment. You can do this using pip:
   ```
   pip install boto3
   ```

2. **Configure AWS Credentials**: Boto3 needs your AWS credentials (access key and secret access key) to interact with AWS services. You can configure your credentials in several ways, but the simplest is to use the AWS CLI:
   ```
   aws configure
   ```
   Then, input your access key, secret access key, and default region when prompted.

3. **Create IAM Client**: Now, you can create an IAM client using Boto3 in your Python script:
   ```python
   import boto3

   # Create IAM client
   iam = boto3.client('iam')
   ```

4. **Check for Inactive IAM Users**: You can now use the IAM client to list all IAM users and check their last used date. If a user hasn't been used for a certain period, it's considered inactive:
   ```python
   # List all IAM users
   users = iam.list_users()['Users']

   # Check each user
   for user in users:
       username = user['UserName']
       # Get user's last used date
       last_used = iam.get_user(UserName=username)['User']['PasswordLastUsed']

       # Check if user is inactive (e.g., hasn't been used for 90 days)
       if last_used is None or (datetime.now(last_used.tzinfo) - last_used).days > 90:
           print(f'User {username} is inactive.')
   ```
   This script will print out the usernames of all inactive IAM users. Note that you might need to handle pagination if you have more than 100 IAM users.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the "User Console Access Inactive" misconfiguration in AWS using the AWS Console, you can follow these steps:

1. Log in to your AWS Management Console using your root account credentials.
2. Navigate to the IAM (Identity and Access Management) dashboard.
3. Click on the "Users" tab in the left-hand navigation menu.
4. Select the user whose console access is inactive.
5. Click on the "Security credentials" tab.
6. Under "Console password," click "Enable" to enable console access for the user.
7. Follow the prompts to set a new password for the user.
8. Click "Apply" to save the changes.

Once you have completed these steps, the user should now have console access to the AWS Management Console.

#### Using CLI

To remediate the "User Console Access Inactive" misconfiguration in AWS, you can follow these steps using AWS CLI:

1. Log in to the AWS Management Console.
2. Open the AWS CLI on your local machine.
3. Run the following command to enable the user console access:

```
aws iam update-account-password-policy --minimum-password-length 8 --require-symbols --require-numbers --require-uppercase-characters --require-lowercase-characters --allow-users-to-change-password
```

This command will update the account password policy to require a minimum password length of 8 characters, and to require symbols, numbers, uppercase and lowercase characters. It will also allow users to change their passwords.

4. Verify that the user console access is now active by logging in to the AWS Management Console with your IAM user credentials.

By following these steps, you should be able to remediate the "User Console Access Inactive" misconfiguration in AWS.

#### Using Python

To remediate the misconfiguration of "User Console Access Inactive" in AWS using Python, you can follow these steps:

1. Import the necessary AWS SDK libraries and modules in your Python script. You can use the `boto3` library to interact with AWS services.

2. Create an AWS IAM client object using the `boto3.client()` method. This client object will allow you to interact with the IAM service in AWS.

```
import boto3

# Create an IAM client
iam = boto3.client('iam')
```

3. Use the `iam.update_account_password_policy()` method to update the account password policy to enable user console access. Set the `AllowUsersToChangePassword` parameter to `True` and the `MinimumPasswordLength` parameter to a value of your choice (e.g. 8).

```
# Update the account password policy
response = iam.update_account_password_policy(
    AllowUsersToChangePassword=True,
    MinimumPasswordLength=8
)
```

4. Verify that the account password policy has been updated successfully by checking the response from the `update_account_password_policy()` method.

```
# Check the response
if response['ResponseMetadata']['HTTPStatusCode'] == 200:
    print("Account password policy updated successfully.")
else:
    print("Error updating account password policy.")
```

5. Run the Python script to remediate the misconfiguration of "User Console Access Inactive" in AWS.

Note: Make sure you have the necessary AWS credentials configured in your environment before running the script.

### Additional Reading:

- [https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_finding-unused.html](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_finding-unused.html) 


</Tab>
</Tabs>