### Remediation

How to update the permissions of IAM service roles associated with CloudFormation stacks to adhere to the principle of least privilege?

#### Using AWS Console

1. Identify the IAM service roles: Determine which IAM service roles are associated with your CloudFormation stacks. These roles are used by CloudFormation to perform actions on your behalf during stack operations.
    (In the Cloudanix Console, navigate to "Misconfig" page and look for Affected Assets for "CloudFormation Stack Should Have An IAM Role" Policy.)
2. Review existing permissions: Review the existing permissions assigned to the IAM service roles. This can be done through the IAM console or by using the AWS CLI command `get-role` to retrieve the role's policy document.
3. Evaluate required permissions: Determine the specific permissions that the IAM service roles require to perform their intended tasks. This involves understanding the actions, resources, and conditions needed for the CloudFormation operations in your environment.
4. Create a new IAM policy: Based on the required permissions, create a new IAM policy that follows the principle of least privilege. The policy should only grant the necessary permissions needed for CloudFormation operations and restrict access to other resources.
5. Update the IAM service roles: Attach the new IAM policy to the IAM service roles associated with your CloudFormation stacks. This can be done through the IAM console or by using the AWS CLI command `update-assume-role-policy` to update the role's trust policy.
6. Test the updated permissions: Test the updated permissions by performing CloudFormation operations with the associated stacks. Ensure that the operations succeed without any errors and that the IAM service roles have the necessary permissions to perform their intended tasks.
7. Monitor and refine: Continuously monitor the CloudFormation operations and observe any potential permission issues or errors. Refine the IAM policies as needed to strike the right balance between security and functionality.

