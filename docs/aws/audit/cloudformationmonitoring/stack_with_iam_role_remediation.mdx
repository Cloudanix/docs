### Remediation

How to update the permissions of IAM service roles associated with CloudFormation stacks to adhere to the principle of least privilege?

#### Using AWS Console

- Step 1: Click Create role button from the dashboard top menu to create a new IAM role that will replace the existing service role within your CloudFormation stack configuration. If you don't create a new IAM service role, AWS CloudFormation uses the role that was previously associated with the stack, during the update process.

- Step 2: On Trust panel, select AWS service category and choose CloudFormation from Choose the service that will use this role list. Click Next: Permissions to continue.

- Step 3: On Permissions panel, perform one of the following actions:
  A: To attach well-defined managed policies (e.g. "AmazonEC2FullAccess"), select one or more policies from the list, then click Next: Review button to continue the setup process.

  B: To attach custom (inline) policies, click Create policy button and run the setup wizard to create a new inline IAM policy, based on your requirements. When you create a new policy, start with a minimum set of permissions and grant additional permissions as necessary. Once the inline IAM policy is created, return to the IAM role Permissions panel, click Refresh and select the newly created incline IAM policy. Once the custom policy is selected, click Next: Review button to continue the process.

- Step 4: On Review panel, provide a unique name and a description for your new IAM service role, then click Create role to finish the setup process and create the IAM role.

- Step 5: Navigate to CloudFormation dashboard at https://console.aws.amazon.com/cloudformation/.

- Step 6: Select the CloudFormation stack that you want to update.

- Step 7: Click Actions button from the dashboard top menu and select Update stack option.

- Step 8: On the Select Template panel, choose Use current template and click Next.

- Step 9: On the Specify Details panel, leave the configuration parameters unchanged and click Next.

- Step 10: On the Options panel, within Permissions section, select the newly created IAM service role from the IAM Role dropdown list to associate the new role with the selected stack. Leave the rest of the settings unchanged, then click Next.

- Step 11: On the Review panel, review the stack details and click Update to update the selected CloudFormation stack. The resource status should change to UPDATE_IN_PROGRESS and once the process is finished, to UPDATE_COMPLETE.
