---
slug: cloudfront_custom_ssl_certificate
title: Custom SSL Certificate Should Be Set For Amazon CloudFront Distributions
sidebar_label: Custom SSL Certificate Should Be Set For Amazon CloudFront Distributions
---

### More Info:

This rule checks whether the certificate associated with an Amazon CloudFront distribution is the default SSL certificate. Using custom SSL certificates enhances security and trust for users accessing content through CloudFront distributions. The rule is marked as non-compliant if a CloudFront distribution uses the default SSL certificate.

### Risk Level

Medium

### Address

Security

### Compliance Standards

CBP


### Triage and Remediation
<Tabs>


<Tab title='Cause'>
### Check Cause
<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
1. Sign in to the AWS Management Console and open the CloudFront console at https://console.aws.amazon.com/cloudfront/.

2. In the CloudFront console, in the top navigation pane, click on "Distributions".

3. In the "Distributions" panel, you will see a list of all your CloudFront distributions. Click on the ID of the distribution you want to check.

4. In the distribution settings, click on the "General" tab. Look for the "SSL Certificate" section. If the "Custom SSL Certificate (example.com)" option is selected, it means a custom SSL certificate is set for the distribution. If the "Default CloudFront Certificate (*.cloudfront.net)" option is selected, it means a custom SSL certificate is not set.
</Accordion>

<Accordion title='Using CLI'>
1. First, you need to install and configure AWS CLI on your local machine. You can do this by following the instructions provided by AWS. Make sure you have the necessary permissions to access the CloudFront distributions.

2. Once the AWS CLI is set up, you can list all the CloudFront distributions using the following command:

   ```
   aws cloudfront list-distributions --query 'DistributionList.Items[*].{ID:Id,Domain:DomainName}'
   ```
   This command will return a list of all the CloudFront distributions along with their ID and domain name.

3. To check the SSL certificate of a specific CloudFront distribution, you can use the following command:

   ```
   aws cloudfront get-distribution-config --id <distribution-id>
   ```
   Replace `<distribution-id>` with the ID of the distribution you want to check. This command will return the configuration of the specified CloudFront distribution.

4. In the output of the above command, look for the `ViewerCertificate` field. If the `ACMCertificateArn` field is present and has a value, it means that a custom SSL certificate is set for the distribution. If the `ACMCertificateArn` field is not present or does not have a value, it means that a custom SSL certificate is not set for the distribution.
</Accordion>

<Accordion title='Using Python'>
1. Install and configure AWS SDK for Python (Boto3): Before you can start writing Python scripts to manage AWS resources, you need to set up authentication credentials for your AWS account. You can do this by installing AWS CLI and configuring it with your access key ID and secret access key.

   ```bash
   pip install awscli
   aws configure
   ```

2. Import the necessary modules and create a session: In your Python script, you need to import the Boto3 module and create a session using your credentials.

   ```python
   import boto3
   session = boto3.Session(
       aws_access_key_id='YOUR_ACCESS_KEY',
       aws_secret_access_key='YOUR_SECRET_KEY',
       region_name='us-west-2'
   )
   ```

3. List all CloudFront distributions and check for custom SSL certificates: You can use the `list_distributions` method to get a list of all CloudFront distributions. Then, for each distribution, you can check if a custom SSL certificate is set by checking the `ViewerCertificate` attribute.

   ```python
   client = session.client('cloudfront')
   distributions = client.list_distributions()
   for distribution in distributions['DistributionList']['Items']:
       if 'ViewerCertificate' in distribution and 'ACMCertificateArn' in distribution['ViewerCertificate']:
           print(f"Custom SSL certificate is set for distribution {distribution['Id']}")
       else:
           print(f"Custom SSL certificate is not set for distribution {distribution['Id']}")
   ```

4. Run the script: Finally, you can run the script to check if a custom SSL certificate is set for all your CloudFront distributions. If a distribution does not have a custom SSL certificate, the script will print a message indicating this.

   ```bash
   python check_ssl.py
   ```

This script will print out the IDs of all distributions that do not have a custom SSL certificate set. This can help you identify any misconfigurations in your CloudFront distributions.
</Accordion>

</AccordionGroup>
</Tab>
<Tab title='Remediation'>
### Remediation

<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
To remediate the misconfiguration of not having a custom SSL certificate set for an Amazon CloudFront distribution in AWS, you can follow these steps using the AWS Management Console:

1. **Sign in to the AWS Management Console:**
   - Go to https://aws.amazon.com/ and sign in to the AWS Management Console using your credentials.

2. **Navigate to Amazon CloudFront service:**
   - In the AWS Management Console, search for "CloudFront" in the search bar or go to the "Networking & Content Delivery" section and click on "CloudFront".

3. **Select the CloudFront distribution:**
   - From the list of CloudFront distributions, select the distribution for which you want to set a custom SSL certificate.

4. **Edit the distribution settings:**
   - Click on the distribution ID or domain name to open the distribution settings.

5. **Go to the "General" tab:**
   - In the distribution settings, navigate to the "General" tab where you can view the basic information about the distribution.

6. **Edit the SSL certificate settings:**
   - Scroll down to the "SSL Certificate" section and click on the "Edit" button next to the "Alternate Domain Names (CNAMEs)" field.

7. **Choose a custom SSL certificate:**
   - In the "Custom SSL Certificate" section, select "Custom SSL Certificate" from the drop-down menu.

8. **Select or import a custom SSL certificate:**
   - If you have already uploaded your SSL certificate to AWS Certificate Manager (ACM), select the appropriate certificate from the list.
   - If you haven't uploaded the certificate to ACM, you can click on the "Request or Import a Certificate with ACM" link to upload a new SSL certificate.

9. **Save the changes:**
   - After selecting the custom SSL certificate, click on the "Yes, Edit" button to save the changes.

10. **Wait for the distribution to deploy the changes:**
    - It may take some time for the CloudFront distribution to deploy the changes and propagate them across the edge locations.

By following these steps, you can successfully remediate the misconfiguration of not having a custom SSL certificate set for an Amazon CloudFront distribution in AWS.

#
</Accordion>

<Accordion title='Using CLI'>
To remediate the misconfiguration of not having a custom SSL certificate set for an Amazon CloudFront distribution using AWS CLI, you can follow these step-by-step instructions:

1. **Generate or Import an SSL Certificate**:
   - First, you need to have an SSL certificate ready. You can either import a certificate into AWS Certificate Manager (ACM) or use a certificate from a third-party Certificate Authority (CA).

2. **Get the ARN of the SSL Certificate**:
   - Use the AWS CLI command to list the SSL certificates in ACM:
     ```
     aws acm list-certificates
     ```
   - Note down the ARN of the SSL certificate you want to use for CloudFront.

3. **Update the CloudFront Distribution**:
   - Use the AWS CLI command to update the CloudFront distribution with the custom SSL certificate:
     ```
     aws cloudfront update-distribution --id YOUR_DISTRIBUTION_ID --default-cache-behavior ViewerProtocolPolicy=https-only,SSLSupportMethod=sni-only,MinimumProtocolVersion=TLSv1.2_2021,ACMCertificateArn=YOUR_SSL_CERTIFICATE_ARN
     ```
     - Replace `YOUR_DISTRIBUTION_ID` with the ID of your CloudFront distribution.
     - Replace `YOUR_SSL_CERTIFICATE_ARN` with the ARN of the SSL certificate you noted down earlier.

4. **Wait for the Distribution to Deploy**:
   - After updating the distribution, it may take some time for the changes to propagate. You can check the status of the distribution deployment using the following command:
     ```
     aws cloudfront get-distribution --id YOUR_DISTRIBUTION_ID --query 'Distribution.DistributionConfig.Enabled'
     ```
   - Wait until the status changes to `true`.

5. **Verify the SSL Certificate**:
   - Once the distribution is deployed, you can verify that the custom SSL certificate is set by accessing your CloudFront distribution using HTTPS and checking the SSL certificate details in the browser.

By following these steps, you can remediate the misconfiguration of not having a custom SSL certificate set for an Amazon CloudFront distribution using AWS CLI.
</Accordion>

<Accordion title='Using Python'>
To remediate the misconfiguration of not having a custom SSL certificate set for an Amazon CloudFront distribution using Python, you can follow these steps:

1. **Import necessary libraries**: Make sure you have the AWS SDK for Python (Boto3) installed. You can install it using pip:
   ```
   pip install boto3
   ```

2. **Configure AWS credentials**: Ensure that your AWS credentials are properly configured on your system. You can set them up using the AWS CLI or by setting environment variables.

3. **Write Python script**:
   Here is a sample Python script to update the CloudFront distribution with a custom SSL certificate:
   ```python
   import boto3

   # Initialize the CloudFront client
   client = boto3.client('cloudfront')

   # Specify the CloudFront distribution ID
   distribution_id = 'YOUR_DISTRIBUTION_ID'

   # Specify the ARN of the custom SSL certificate
   certificate_arn = 'YOUR_CERTIFICATE_ARN'

   # Update the CloudFront distribution with the custom SSL certificate
   response = client.update_distribution(
       DistributionConfig={
           'CallerReference': 'YOUR_CALLER_REFERENCE',
           'Aliases': {
               'Quantity': 1,
               'Items': ['YOUR_DOMAIN_NAME']
           },
           'DefaultCacheBehavior': {
               'ViewerProtocolPolicy': 'redirect-to-https',
               'MinTTL': 0,
               'TargetOriginId': 'YOUR_ORIGIN_ID'
           },
           'ViewerCertificate': {
               'CloudFrontDefaultCertificate': False,
               'ACMCertificateArn': certificate_arn,
               'SSLSupportMethod': 'sni-only'
           },
           'Comment': 'YOUR_COMMENT',
           'Enabled': True,
           'DefaultRootObject': 'index.html',
           'Origins': {
               'Quantity': 1,
               'Items': [
                   {
                       'Id': 'YOUR_ORIGIN_ID',
                       'DomainName': 'YOUR_ORIGIN_DOMAIN_NAME',
                       'CustomOriginConfig': {
                           'HTTPPort': 80,
                           'HTTPSPort': 443,
                           'OriginProtocolPolicy': 'https-only'
                       }
                   }
               ]
           },
           'PriceClass': 'PriceClass_All',
           'DefaultRootObject': 'index.html'
       },
       Id=distribution_id,
       IfMatch='YOUR_DISTRIBUTION_ETAG'
   )

   print(response)
   ```

4. **Replace placeholders**:
   - Replace `YOUR_DISTRIBUTION_ID` with the actual CloudFront distribution ID.
   - Replace `YOUR_CERTIFICATE_ARN` with the ARN of your custom SSL certificate.
   - Replace other placeholders like `YOUR_DOMAIN_NAME`, `YOUR_ORIGIN_ID`, `YOUR_ORIGIN_DOMAIN_NAME`, `YOUR_CALLER_REFERENCE`, `YOUR_COMMENT`, and `YOUR_DISTRIBUTION_ETAG` with actual values.

5. **Run the script**: Save the script to a file (e.g., `update_cloudfront_ssl.py`) and run it using Python:
   ```
   python update_cloudfront_ssl.py
   ```

By following these steps, you can remediate the misconfiguration of not having a custom SSL certificate set for an Amazon CloudFront distribution using Python.
</Accordion>

</AccordionGroup>
</Tab>
</Tabs>

