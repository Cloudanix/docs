

<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Sign in to the AWS Management Console.
2. Navigate to the CloudFront service. You can find this by typing 'CloudFront' into the search bar at the top of the console.
3. In the CloudFront console, you will see a list of your CloudFront distributions. Click on the ID of the distribution you want to check.
4. In the distribution settings, click on the 'Behaviors' tab. Here, you can see the 'Viewer Protocol Policy'. If it is set to 'HTTP and HTTPS', 'Redirect HTTP to HTTPS', or 'HTTPS Only', then HTTPS is enabled. If it is set to 'HTTP Only', then HTTPS is not enabled.

#### Using CLI

1. Install and configure AWS CLI: Before you can start using AWS CLI, you need to install it on your local machine. You can download it from the official AWS website. After installation, you need to configure it with your AWS account credentials. You can do this by running the command `aws configure` and then entering your AWS Access Key ID, Secret Access Key, Default region name, and Default output format when prompted.

2. List all CloudFront distributions: Use the following AWS CLI command to list all the CloudFront distributions in your AWS account:

   ```
   aws cloudfront list-distributions --query 'DistributionList.Items[*].Id' --output text
   ```

   This command will return a list of all the CloudFront distribution IDs.

3. Check HTTPS configuration for each distribution: For each distribution ID returned by the previous command, you can check if HTTPS is enabled by running the following command:

   ```
   aws cloudfront get-distribution-config --id <distribution-id>
   ```

   Replace `<distribution-id>` with the actual ID of the distribution you want to check. This command will return the configuration details of the specified CloudFront distribution.

4. Check the ViewerProtocolPolicy: In the output of the previous command, look for the `ViewerProtocolPolicy` field under `DefaultCacheBehavior`. If the value of `ViewerProtocolPolicy` is `https-only` or `redirect-to-https`, then HTTPS is enabled for the CloudFront distribution. If the value is `allow-all`, then HTTPS is not enabled.

#### Using Python

1. Install and configure AWS SDK for Python (Boto3) on your local system. This will allow you to interact with AWS services including CloudFront.

```python
pip install boto3
aws configure
```

2. Create a Python script that uses Boto3 to interact with CloudFront. The script will list all CloudFront distributions and check if HTTPS is enabled.

```python
import boto3

def check_https_enabled():
    client = boto3.client('cloudfront')
    distributions = client.list_distributions()
    for distribution in distributions['DistributionList']['Items']:
        viewer_protocol_policy = distribution['DefaultCacheBehavior']['ViewerProtocolPolicy']
        if viewer_protocol_policy != 'redirect-to-https':
            print(f"HTTPS is not enabled on CloudFront distribution: {distribution['Id']}")

check_https_enabled()
```

3. Run the Python script. If there are any CloudFront distributions where HTTPS is not enabled, the script will print out their IDs.

```python
python check_https.py
```

4. Review the output. If any distribution IDs are printed, this means that HTTPS is not enabled on those distributions. You should take appropriate action to enable HTTPS on those distributions.

</Tab>

<Tab title='Remediation'>
### Remediation

#### Using Console

Sure, I can help you with that. Here are the steps to remediate the HTTPS misconfiguration on CloudFront Distributions in AWS using the AWS console:

1. Log in to the AWS Management Console.
2. Navigate to the CloudFront service.
3. Click on the ID of the distribution you want to remediate.
4. Click on the "Behaviors" tab.
5. Select the behavior that requires HTTPS.
6. Click on the "Edit" button.
7. In the "Viewer Protocol Policy" section, select "Redirect HTTP to HTTPS".
8. Click on the "Yes, Edit" button to save the changes.

Once the above steps are completed, HTTPS will be enabled on the CloudFront distribution. If you have multiple distributions, you will need to repeat these steps for each of them.

#### Using CLI

To remediate this misconfiguration for AWS using AWS CLI, you can follow the below steps:

1. Open the AWS CLI on your local machine or on an EC2 instance.

2. Run the following command to enable HTTPS on your CloudFront distributions:

```
aws cloudfront update-distribution --id <distribution-id> --default-root-object index.html --viewer-protocol-policy redirect-to-https --no-include-cookies --no-forward-query-string --no-smooth-streaming --no-logging
```

Note: Replace `<distribution-id>` with the ID of your CloudFront distribution.

3. Wait for the distribution to update. This might take a few minutes.

4. Run the following command to verify that HTTPS is enabled:

```
aws cloudfront get-distribution --id <distribution-id> --query 'Distribution.DistributionConfig.ViewerCertificate.CloudFrontDefaultCertificate' --output text
```

Note: This command should return "true" to indicate that HTTPS is enabled.

5. Repeat the above steps for all of your CloudFront distributions.

By following these steps, you will have successfully enabled HTTPS on your CloudFront distributions.

#### Using Python

To remediate the HTTPS should be enabled on CloudFront Distributions misconfiguration in AWS using Python, follow these steps:

1. Import the required modules:

```python
import boto3
```

2. Create a boto3 client for CloudFront:

```python
client = boto3.client('cloudfront')
```

3. Get a list of all CloudFront distributions:

```python
response = client.list_distributions()
```

4. Loop through the distributions and check if HTTPS is enabled:

```python
for distribution in response['DistributionList']['Items']:
    if distribution['ViewerCertificate']['CertificateSource'] == 'cloudfront':
        print('HTTPS is already enabled for distribution:', distribution['Id'])
    else:
        print('HTTPS is not enabled for distribution:', distribution['Id'])
```

5. If HTTPS is not enabled, update the distribution to enable HTTPS:

```python
client.update_distribution(
    DistributionConfig={
        'Enabled': True,
        'ViewerCertificate': {
            'CloudFrontDefaultCertificate': True,
        },
    },
    Id=distribution['Id'],
    IfMatch=distribution['ETag']
)
```

This will enable HTTPS on the CloudFront distribution.


</Tab>
</Tabs>