---
slug: cloudfront_in_use
title: AWS Account Should Use CloudFront CDN Service
sidebar_label: AWS Account Should Use CloudFront CDN Service
---

### More Info:

AWS CloudFront Content Delivery Network (CDN) service should be used within your AWS account to secure and accelerate the delivery of your websites, media files or static resources.

### Risk Level

Medium

### Address

Security

### Compliance Standards

AWSWAF



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to the AWS Management Console and navigate to the CloudFront service. You can do this by typing "CloudFront" into the search bar at the top of the console and selecting the CloudFront service from the dropdown menu.

2. Once you are in the CloudFront console, you will see a list of all your CloudFront distributions. If you do not see any distributions listed, this means that the AWS account is not using the CloudFront CDN service.

3. For each distribution, check the "Status" column. If the status is "Deployed", this means that the distribution is currently in use. If the status is "In Progress", this means that the distribution is currently being updated. If the status is "Disabled", this means that the distribution is not currently in use.

4. You can also check the "Last Modified" column to see when the distribution was last updated. If the distribution has not been updated in a long time, this could be a sign that it is not being used.

#### Using CLI

1. Install and configure AWS CLI: Before you can start using AWS CLI, you need to install it on your local machine. You can download it from the official AWS website. After installation, you need to configure it with your AWS account credentials. You can do this by running the command `aws configure` and then entering your AWS Access Key ID, Secret Access Key, Default region name, and Default output format when prompted.

2. List all CloudFront distributions: To check if your AWS account is using CloudFront CDN service, you need to list all the CloudFront distributions in your account. You can do this by running the following command in your terminal:

   ```
   aws cloudfront list-distributions --query 'DistributionList.Items[].Id' --output text
   ```

   This command will return a list of IDs of all the CloudFront distributions in your account. If the list is empty, it means your AWS account is not using CloudFront CDN service.

3. Get details of a specific CloudFront distribution: If you want to get more details about a specific CloudFront distribution, you can do this by running the following command:

   ```
   aws cloudfront get-distribution --id <distribution-id>
   ```

   Replace `<distribution-id>` with the ID of the CloudFront distribution you are interested in. This command will return a JSON object containing all the details of the specified CloudFront distribution.

4. Check the status of a specific CloudFront distribution: To check the status of a specific CloudFront distribution, you can use the following command:

   ```
   aws cloudfront get-distribution --id <distribution-id> --query 'Distribution.Status' --output text
   ```

   Replace `<distribution-id>` with the ID of the CloudFront distribution you are interested in. This command will return the status of the specified CloudFront distribution. If the status is "Deployed", it means the distribution is active and being used. If the status is "InProgress", it means the distribution is currently being updated. If the status is "Disabled", it means the distribution is not being used.

#### Using Python

1. Install and configure AWS SDK for Python (Boto3):
   You need to install Boto3 in your local environment. You can install it using pip:
   ```
   pip install boto3
   ```
   After installing Boto3, you need to configure it. You can configure it using AWS CLI:
   ```
   aws configure
   ```
   It will ask for the AWS Access Key ID, Secret Access Key, Default region name, and Default output format. You can get these details from your AWS account.

2. Create a Python script to list all CloudFront distributions:
   You can use the `list_distributions` method provided by Boto3 to list all the CloudFront distributions. Here is a sample script:
   ```python
   import boto3

   client = boto3.client('cloudfront')

   response = client.list_distributions()

   for distribution in response['DistributionList']['Items']:
       print('ID: ' + distribution['Id'])
       print('Domain: ' + distribution['DomainName'])
       print('Status: ' + distribution['Status'])
       print('Enabled: ' + str(distribution['Enabled']))
       print('------------------------')
   ```
   This script will print the ID, domain name, status, and whether each distribution is enabled.

3. Analyze the output:
   If the script doesn't return any distributions, it means that the AWS account is not using the CloudFront CDN service. If it returns one or more distributions, it means that the AWS account is using the CloudFront CDN service.

4. Regularly run the script:
   You should regularly run this script to ensure that the AWS account is using the CloudFront CDN service. You can schedule it to run at specific intervals using a cron job or a similar scheduling tool.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate this misconfiguration, you can follow the steps below:

1. Log in to your AWS console and navigate to the CloudFront service.

2. Click the "Create Distribution" button.

3. Choose the type of distribution you want to create. For example, if you want to use CloudFront to deliver your website content, select "Web".

4. Configure the settings for your distribution. This includes setting the origin, which is the location of your content, and configuring caching settings.

5. Once you have configured your settings, click "Create Distribution" to create your CloudFront distribution.

6. After your CloudFront distribution is created, you will need to update your DNS settings to point to your CloudFront distribution. This involves creating a CNAME record in your DNS that points to your CloudFront distribution.

7. Finally, test your CloudFront distribution to ensure that your content is being delivered correctly.

By following these steps, you can remediate the misconfiguration and begin using CloudFront to deliver your content.

#### Using CLI

To remediate the misconfiguration in AWS that the account should use CloudFront CDN service, you can follow the below steps using AWS CLI:

1. Open the AWS CLI on your local machine.

2. Run the following command to create a new CloudFront distribution:

```
aws cloudfront create-distribution --distribution-config file://distribution-config.json
```

Note: Replace `distribution-config.json` with the path to your CloudFront distribution configuration file.

3. Update the DNS records for your domain to point to the CloudFront distribution.

4. Wait for the DNS changes to propagate.

5. Verify that your website is now being served through CloudFront by visiting your website and checking the response headers for the `X-Cache` header. If the header is present, it means that your website is being served through CloudFront.

By following these steps, you can remediate the misconfiguration that your AWS account should use CloudFront CDN service.

#### Using Python

To remediate the misconfiguration in AWS where the account should use CloudFront CDN service, you can use the following steps in Python:

1. Import the necessary AWS SDK for Python (Boto3) library.

```
import boto3
```

2. Create a CloudFront client object using the `boto3.client()` method.

```
cloudfront = boto3.client('cloudfront')
```

3. Create a new CloudFront distribution using the `create_distribution()` method.

```
response = cloudfront.create_distribution(
    DistributionConfig={
        'CallerReference': 'unique-id', # Specify a unique identifier for the distribution
        'DefaultRootObject': 'index.html', # Specify the default root object
        'Origins': {
            'Quantity': 1,
            'Items': [
                {
                    'Id': 'my-bucket-origin', # Specify a unique identifier for the origin
                    'DomainName': 'my-bucket.s3.amazonaws.com', # Specify the S3 bucket domain name
                    'S3OriginConfig': {
                        'OriginAccessIdentity': '' # Specify the origin access identity
                    }
                }
            ]
        },
        'DefaultCacheBehavior': {
            'TargetOriginId': 'my-bucket-origin', # Specify the origin identifier
            'ForwardedValues': {
                'QueryString': False, # Specify whether to forward query strings
                'Cookies': {
                    'Forward': 'none' # Specify whether to forward cookies
                }
            },
            'ViewerProtocolPolicy': 'redirect-to-https', # Specify the viewer protocol policy
            'MinTTL': 0 # Specify the minimum TTL
        },
        'Comment': 'My CloudFront distribution', # Specify a comment for the distribution
        'Enabled': True # Specify whether the distribution is enabled
    }
)
```

4. Wait for the distribution to be deployed using the `wait_until()` method.

```
cloudfront.get_waiter('distribution_deployed').wait(
    Id=response['Distribution']['Id'],
    WaiterConfig={
        'Delay': 30,
        'MaxAttempts': 50
    }
)
```

5. Update the DNS records to point to the CloudFront distribution using Route 53 or other DNS service.

```
# Example using Route 53
route53 = boto3.client('route53')

response = route53.change_resource_record_sets(
    HostedZoneId='Z1234567890123', # Specify the hosted zone ID
    ChangeBatch={
        'Changes': [
            {
                'Action': 'UPSERT',
                'ResourceRecordSet': {
                    'Name': 'example.com', # Specify the domain name
                    'Type': 'A',
                    'AliasTarget': {
                        'HostedZoneId': 'Z2FDTNDATAQYW2', # Specify the CloudFront hosted zone ID
                        'DNSName': 'd1234567890123.cloudfront.net', # Specify the CloudFront DNS name
                        'EvaluateTargetHealth': False
                    }
                }
            }
        ]
    }
)
```

By following these steps, you can remediate the misconfiguration in AWS where the account should use CloudFront CDN service using Python.

### Additional Reading:

- [https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/) 


</Tab>
</Tabs>