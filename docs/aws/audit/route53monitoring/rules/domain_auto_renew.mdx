---
slug: domain_auto_renew
title: AWS Route 53 Auto Renew Should Be Enabled
sidebar_label: AWS Route 53 Auto Renew Should Be Enabled
---

### More Info:

AWS Route 53 Auto Renew feature should be enabled to automatically renew your domain names as the expiration date approaches.

### Risk Level

High

### Address

Reliability, Security

### Compliance Standards

CBP



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Sign in to the AWS Management Console.
2. Navigate to the Route 53 dashboard. You can do this by typing "Route 53" into the search bar at the top of the console, then selecting "Route 53" from the dropdown menu.
3. In the Route 53 dashboard, select "Registered domains" from the navigation pane on the left side of the screen.
4. Here, you will see a list of all your registered domains. For each domain, check the "Auto Renew" column. If Auto Renew is not enabled, it will be indicated here.

#### Using CLI

1. First, you need to install and configure AWS CLI on your local machine. You can do this by following the instructions provided by AWS. Make sure you have the necessary permissions to access Route 53 resources.

2. Once AWS CLI is installed and configured, you can list all the domain names in your AWS account using the following command:

   ```
   aws route53domains list-domains
   ```

   This command will return a list of domain names along with their details.

3. To check if auto-renew is enabled for a specific domain, you can use the following command:

   ```
   aws route53domains get-domain-detail --domain-name yourdomain.com
   ```

   Replace 'yourdomain.com' with the actual domain name. This command will return the details of the specified domain.

4. In the output of the above command, look for the 'AutoRenew' field. If the value of 'AutoRenew' is 'true', then auto-renew is enabled for the domain. If the value is 'false', then auto-renew is not enabled.

#### Using Python

1. Install the necessary AWS SDK for Python (Boto3) if you haven't done so already. You can do this by running the command `pip install boto3` in your terminal.

2. Configure your AWS credentials. You can do this by running `aws configure` in your terminal and then entering your AWS Access Key ID, AWS Secret Access Key, Default region name, and Default output format when prompted.

3. Create a Python script to list all the domain names in your AWS account. Here's a sample script:

```python
import boto3

def list_domains():
    client = boto3.client('route53domains')
    response = client.list_domains()
    return response['Domains']

domains = list_domains()
for domain in domains:
    print(domain['DomainName'])
```

4. Modify the script to check if auto renew is enabled for each domain. Here's how you can do it:

```python
import boto3

def list_domains():
    client = boto3.client('route53domains')
    response = client.list_domains()
    return response['Domains']

def check_auto_renew(domain_name):
    client = boto3.client('route53domains')
    response = client.get_domain_detail(DomainName=domain_name)
    return response['AutoRenew']

domains = list_domains()
for domain in domains:
    domain_name = domain['DomainName']
    if check_auto_renew(domain_name):
        print(f'Auto renew is enabled for {domain_name}')
    else:
        print(f'Auto renew is not enabled for {domain_name}')
```

This script will print out whether auto renew is enabled for each domain in your AWS account. If auto renew is not enabled for a domain, that could be a potential misconfiguration.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

Sure, here are the step by step instructions to remediate the "AWS Route 53 Auto Renew Should Be Enabled" misconfiguration:

1. Log in to your AWS console.
2. Navigate to the Route 53 service.
3. Click on the "Hosted zones" option from the left-hand menu.
4. Select the hosted zone for which you want to enable auto-renew.
5. Click on the "Edit" button on the top right corner of the page.
6. In the "Edit Hosted Zone" page, scroll down to the "Set Record Set TTL" section.
7. Check the box next to "Auto-Renew" to enable it.
8. Click on the "Save Changes" button to apply the changes.

Once you have completed these steps, AWS Route 53 auto-renew will be enabled for the selected hosted zone, and the misconfiguration will be remediated.

#### Using CLI

To remediate the misconfiguration of AWS Route 53 Auto Renew not being enabled, you can follow these steps using AWS CLI:

1. Open the AWS CLI on your local machine or EC2 instance.

2. Run the following command to enable the automatic renewal of Route 53 hosted zones:

```
aws route53 update-hosted-zone --hosted-zone-id <hosted-zone-id> --auto-renew
```

Note: Replace `<hosted-zone-id>` with the ID of the hosted zone for which you want to enable auto-renewal.

3. Verify that the auto-renewal is enabled by running the following command:

```
aws route53 get-hosted-zone --id <hosted-zone-id>
```

Note: Replace `<hosted-zone-id>` with the ID of the hosted zone for which you enabled auto-renewal.

4. In the output, look for the `AutoRenew` parameter. If it is set to `true`, then auto-renewal is enabled for the hosted zone.

That's it! You have successfully remediated the misconfiguration of AWS Route 53 Auto Renew not being enabled using AWS CLI.

#### Using Python

To remediate the misconfiguration "AWS Route 53 Auto Renew Should Be Enabled" using Python, you can follow the below steps:

Step 1: Import the necessary libraries and set up the AWS credentials using the boto3 library.

```
import boto3

session = boto3.Session(
    aws_access_key_id='YOUR_ACCESS_KEY',
    aws_secret_access_key='YOUR_SECRET_KEY',
    region_name='YOUR_REGION'
)

client = session.client('route53')
```

Step 2: Get the list of hosted zones using the `list_hosted_zones` method.

```
response = client.list_hosted_zones()
```

Step 3: For each hosted zone, check if the `AutoRenew` flag is set to `true`. If not, update the hosted zone using the `update_hosted_zone_comment` method.

```
for hosted_zone in response['HostedZones']:
    hosted_zone_id = hosted_zone['Id'].split('/')[-1]
    hosted_zone_details = client.get_hosted_zone(Id=hosted_zone_id)
    if not hosted_zone_details['HostedZone']['AutoRenew']:
        client.update_hosted_zone_comment(
            Id=hosted_zone_id,
            Comment='AutoRenew enabled'
        )
```

Step 4: Verify that the `AutoRenew` flag is set to `true` for all hosted zones.

```
response = client.list_hosted_zones()
for hosted_zone in response['HostedZones']:
    hosted_zone_id = hosted_zone['Id'].split('/')[-1]
    hosted_zone_details = client.get_hosted_zone(Id=hosted_zone_id)
    if not hosted_zone_details['HostedZone']['AutoRenew']:
        print(f"AutoRenew not enabled for hosted zone: {hosted_zone_id}")
```

With the above steps, you should be able to remediate the "AWS Route 53 Auto Renew Should Be Enabled" misconfiguration using Python.

### Additional Reading:

- [https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-enable-disable-auto-renewal.html](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-enable-disable-auto-renewal.html) 


</Tab>
</Tabs>