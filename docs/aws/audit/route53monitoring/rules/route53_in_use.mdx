---
slug: route53_in_use
title: Route 53 Should Be In Use
sidebar_label: Route 53 Should Be In Use
---

### More Info:

AWS Route 53 Domain Name System (DNS) service should be used within your AWS account to manage DNS zones for your domains.

### Risk Level

Medium

### Address

Reliability, Security

### Compliance Standards

AWSWAF



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Sign in to the AWS Management Console and open the Route 53 console at https://console.aws.amazon.com/route53/.
2. In the navigation pane, click on "Hosted zones". Here you can see all the domains that are managed by Route 53.
3. If there are no domains listed, it means Route 53 is not in use.
4. For further confirmation, you can also check the "Traffic flow" and "Health checks" sections. If there are no records in these sections, it indicates that Route 53 is not in use.

#### Using CLI

1. Install and configure AWS CLI: Before you can start using AWS CLI, you need to install it on your local machine. You can download it from the official AWS website. After installation, you need to configure it with your AWS account credentials. You can do this by running the command `aws configure` and then entering your AWS Access Key ID, Secret Access Key, Default region name, and Default output format when prompted.

2. List Hosted Zones: To check if Route 53 is in use, you can list all the hosted zones in your AWS account. Run the following command to do this: `aws route53 list-hosted-zones`. This command will return a list of all the hosted zones in your AWS account.

3. Check for Records: For each hosted zone, you can check if there are any records associated with it. Run the following command to do this: `aws route53 list-resource-record-sets --hosted-zone-id <HostedZoneId>`. Replace `<HostedZoneId>` with the ID of the hosted zone you want to check. This command will return a list of all the records associated with the specified hosted zone.

4. Analyze the Output: If the `list-hosted-zones` command returns an empty list, it means that Route 53 is not in use. If the `list-resource-record-sets` command returns an empty list for a hosted zone, it means that the hosted zone is not in use. However, if there are records associated with a hosted zone, it means that Route 53 is in use.

#### Using Python

To check if Route 53 is in use in AWS using Python scripts, you can use the Boto3 library, which allows you to directly interact with AWS services, including Route 53. Here are the steps:

1. **Install Boto3**: Boto3 is the Amazon Web Services (AWS) Software Development Kit (SDK) for Python, which allows Python developers to write software that makes use of services like Amazon S3, Amazon EC2, etc. If you haven't installed it yet, you can do so using pip:
   ```bash
   pip install boto3
   ```

2. **Configure AWS Credentials**: Before you can start using Boto3, you need to set up authentication credentials for your AWS account using either the AWS CLI or by creating the credentials file yourself. The default location for the file is `~/.aws/credentials`. At a minimum, the credentials file should look like this:
   ```bash
   [default]
   aws_access_key_id = YOUR_ACCESS_KEY
   aws_secret_access_key = YOUR_SECRET_KEY
   ```

3. **Create a Python Script to List Hosted Zones**: You can use the `list_hosted_zones` method to retrieve all the hosted zones (domains) in your AWS account. If there are no hosted zones, it means Route 53 is not in use. Here is a simple script to do this:
   ```python
   import boto3

   def route53_in_use():
       client = boto3.client('route53')
       response = client.list_hosted_zones()
       if len(response['HostedZones']) == 0:
           print("Route 53 is not in use.")
       else:
           print("Route 53 is in use.")

   route53_in_use()
   ```

4. **Run the Python Script**: Finally, you can run the script using a Python interpreter. If Route 53 is not in use, it will print "Route 53 is not in use." Otherwise, it will print "Route 53 is in use."

Remember to replace `YOUR_ACCESS_KEY` and `YOUR_SECRET_KEY` with your actual AWS access key and secret key.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the misconfiguration "Route 53 should be in use" for AWS using the AWS console, follow these steps:

1. Open the AWS Management Console and navigate to Route 53.
2. Create a new hosted zone for your domain name if you haven't already done so.
3. Click on the "Create Record Set" button to create a new record set.
4. In the "Name" field, enter the domain name that you want to associate with the record set.
5. In the "Type" field, select the type of record that you want to create (e.g. A, CNAME, MX, etc.).
6. In the "Value" field, enter the IP address or domain name that you want to associate with the record set.
7. Click on the "Create" button to create the record set.
8. Repeat steps 3-7 for any additional record sets that you want to create.

Once you have created the necessary record sets in Route 53, you can update your DNS settings to point to your Route 53 hosted zone. This will ensure that your domain name is properly configured and that Route 53 is in use.

#### Using CLI

To remediate the misconfiguration "Route 53 should be in use" for AWS using AWS CLI, follow these steps:

1. Open the AWS CLI on your local machine.

2. Check if the Route 53 service is enabled for your AWS account using the following command:
```
aws route53 list-hosted-zones
```
If the command returns a list of hosted zones, that means Route 53 is already enabled for your account. If it returns an error, Route 53 is not enabled.

3. If Route 53 is not enabled, enable it using the following command:
```
aws route53 create-hosted-zone --name example.com --caller-reference 1
```
Replace "example.com" with your domain name and "1" with a unique reference number.

4. Once Route 53 is enabled, you can start using it to manage your DNS records.

5. Update your DNS records to point to the appropriate resources using the Route 53 console or CLI.

6. Verify that your DNS records have been updated correctly using the following command:
```
nslookup example.com
```
Replace "example.com" with your domain name.

7. If the command returns the expected IP address, your DNS records have been updated successfully.

By following these steps, you can remediate the misconfiguration "Route 53 should be in use" for AWS using AWS CLI.

#### Using Python

To remediate the misconfiguration "Route 53 Should Be In Use" for AWS using Python, follow these steps:

1. Import the necessary libraries:

```
import boto3
```

2. Create a Route 53 hosted zone:

```
client = boto3.client('route53')
response = client.create_hosted_zone(
    Name='example.com',
    CallerReference=str(time.time())
)
```
Note: Replace "example.com" with your own domain name.

3. Update the NS records for the domain with the Route 53 name servers:

```
response = client.get_hosted_zone(Id=response['HostedZone']['Id'])
for ns in response['DelegationSet']['NameServers']:
    print(ns)
```

4. Update the domain registrar with the new NS records.

Note: This step will vary depending on your domain registrar.

5. Verify that the domain is now using Route 53 by checking the DNS records:

```
response = client.list_resource_record_sets(
    HostedZoneId=response['HostedZone']['Id'],
    MaxItems='1'
)
print(response['ResourceRecordSets'][0])
```

6. Delete any existing DNS records that conflict with the new Route 53 hosted zone:

```
response = client.list_resource_record_sets(
    HostedZoneId=response['HostedZone']['Id']
)
for record in response['ResourceRecordSets']:
    if record['Type'] == 'A' and record['Name'] == 'example.com.':
        client.change_resource_record_sets(
            HostedZoneId=response['HostedZone']['Id'],
            ChangeBatch={
                'Changes': [
                    {
                        'Action': 'DELETE',
                        'ResourceRecordSet': record
                    }
                ]
            }
        )
```

7. Wait for the DNS changes to propagate, which can take up to 48 hours.

Note: It is recommended to test the DNS changes using a DNS propagation checker tool before assuming that the changes have propagated.

By following these steps, you can remediate the misconfiguration "Route 53 Should Be In Use" for AWS using Python.

### Additional Reading:

- [https://aws.amazon.com/route53/](https://aws.amazon.com/route53/) 


</Tab>
</Tabs>