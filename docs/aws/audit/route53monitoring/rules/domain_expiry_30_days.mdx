---
slug: domain_expiry_30_days
title: Route 53 Domain Expiry In 30 Days
sidebar_label: Route 53 Domain Expiry In 30 Days
---

### More Info:

All the domain names registered with AWS Route 53 or transferred to AWS Route 53 should be renewed 30 days before their validity period ends.

### Risk Level

Medium

### Address

Reliability, Security

### Compliance Standards

CBP



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to your AWS Management Console.
2. Navigate to the Route 53 dashboard. You can do this by typing "Route 53" into the search bar at the top of the console and selecting it from the dropdown menu.
3. Once you're in the Route 53 dashboard, click on "Registered domains" in the left-hand menu. This will bring up a list of all the domains you have registered with Route 53.
4. For each domain, check the "Expiration" column. This will tell you when the domain is set to expire. If the date is within the next 30 days, then the domain is due to expire soon.

#### Using CLI

1. Install and configure AWS CLI: Before you can start using AWS CLI, you need to install it on your local machine. You can download it from the official AWS website. After installation, you need to configure it with your AWS account credentials. You can do this by running the command `aws configure` and then entering your Access Key ID, Secret Access Key, Default region name, and Default output format when prompted.

2. List hosted zones: The first step to check the domain expiry is to list all the hosted zones in your AWS account. You can do this by running the following command: `aws route53 list-hosted-zones`. This will return a list of all the hosted zones along with their details.

3. Get domain details: Once you have the list of hosted zones, you can get the details of a specific domain by running the following command: `aws route53domains get-domain-detail --domain-name yourdomain.com`. Replace 'yourdomain.com' with the actual domain name. This command will return all the details of the domain including the expiry date.

4. Check domain expiry: Now that you have the domain details, you can check the expiry date. The expiry date is returned in the 'Expiry' field of the domain details. You can write a simple script to compare this date with the current date and alert you if the domain is set to expire in the next 30 days.

#### Using Python

1. Install the necessary Python libraries: To interact with AWS services, you need to install the AWS SDK for Python (Boto3). You can install it using pip:

   ```
   pip install boto3
   ```

2. Configure AWS credentials: Before you can interact with AWS services, you need to set up your AWS credentials. You can do this by creating a file at ~/.aws/credentials. At the very least, the contents of the file should be:

   ```
   [default]
   aws_access_key_id = YOUR_ACCESS_KEY
   aws_secret_access_key = YOUR_SECRET_KEY
   ```

3. Write a Python script to check the domain expiry date: The following script will list all the domains in your Route 53 and check if they are expiring in the next 30 days.

   ```python
   import boto3
   from datetime import datetime, timedelta

   # Create a client
   client = boto3.client('route53domains')

   # Get the list of domains
   domains = client.list_domains()

   # Get the current date
   current_date = datetime.now()

   # Check each domain
   for domain in domains['Domains']:
       # Get the expiry date of the domain
       expiry_date = domain['Expiry']

       # Check if the domain is expiring in the next 30 days
       if expiry_date - current_date <= timedelta(days=30):
           print(f"The domain {domain['DomainName']} is expiring in the next 30 days.")
   ```

4. Run the script: You can run the script using the Python interpreter. If any domains are expiring in the next 30 days, they will be printed to the console.

   ```
   python check_expiry.py
   ```

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the Route 53 Domain Expiry in 30 days issue in AWS using the AWS console, follow these steps:

1. Log in to your AWS Management Console.
2. Navigate to the Route 53 dashboard.
3. In the left-hand navigation panel, click on the "Registered domains" option.
4. Locate the domain that is expiring in 30 days and click on it.
5. Click on the "Renew registration" button.
6. Follow the prompts to renew the domain registration.
7. Once the domain registration is renewed, verify that the domain expiry date has been updated to a future date.

By following these steps, you will have successfully remediated the Route 53 Domain Expiry in 30 Days issue in AWS.

#### Using CLI

To remediate the Route 53 Domain Expiry in 30 Days misconfiguration for AWS using AWS CLI, follow these steps:

1. Install AWS CLI on your local machine if you haven't already done so.

2. Open a terminal or command prompt and run the following command to list all hosted zones in your AWS account:

```
aws route53 list-hosted-zones
```

3. Identify the hosted zone that is expiring in 30 days or less. Note the value of the "Id" field for this hosted zone.

4. Run the following command to get the details of the hosted zone:

```
aws route53 get-hosted-zone --id <hosted-zone-id>
```

Replace `<hosted-zone-id>` with the actual ID of the hosted zone you identified in step 3.

5. Check the value of the "Expiration" field in the output of the previous command. If the value is less than 30 days from the current date, the hosted zone is expiring soon and needs to be renewed.

6. To renew the hosted zone, run the following command:

```
aws route53 update-hosted-zone --id <hosted-zone-id> --auto-renew
```

Replace `<hosted-zone-id>` with the actual ID of the hosted zone you identified in step 3.

7. Verify that the hosted zone has been renewed by running the following command:

```
aws route53 get-hosted-zone --id <hosted-zone-id>
```

Check the value of the "Expiration" field in the output of the previous command to ensure that it has been extended.

By following these steps, you can remediate the Route 53 Domain Expiry in 30 Days misconfiguration for AWS using AWS CLI.

#### Using Python

To remediate the Route 53 Domain Expiry in 30 days issue using Python, you can use the AWS SDK for Python (Boto3) to automate the process. Here are the steps:

1. Install Boto3: Install the Boto3 library using pip by running the following command in your terminal:

```
pip install boto3
```

2. Create an AWS IAM user: Create an IAM user with the necessary permissions to access Route 53 domains. The user should have the following permissions:

- route53domains:ListDomains
- route53domains:GetDomainDetail

3. Configure AWS credentials: Configure your AWS credentials by setting the AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY environment variables or by using the AWS CLI.

4. Write Python code: Use the following Python code to remediate the Route 53 Domain Expiry in 30 days issue:

```
import boto3
import datetime

# Set the number of days before expiry
expiry_days = 30

# Create a Route 53 client
client = boto3.client('route53domains')

# Get a list of all domains
response = client.list_domains()

# Loop through each domain and check if it will expire in the next 30 days
for domain in response['Domains']:
    domain_name = domain['DomainName']
    expiration_date = domain['Expiry']
    days_left = (expiration_date - datetime.datetime.now()).days
    if days_left <= expiry_days:
        # Renew the domain
        client.renew_domain(
            DomainName=domain_name,
            DurationInYears=1
        )
```

This code will get a list of all Route 53 domains and check if they will expire in the next 30 days. If a domain is going to expire, it will be renewed for another year. You can schedule this Python script to run periodically to ensure that your domains are always up-to-date.

### Additional Reading:

- [https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-restore-expired.html](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-restore-expired.html) 


</Tab>
</Tabs>