---
slug: codebuild_project_logging_enabled
title: Logging Should Be Enabled CodeBuild Project Environment
sidebar_label: Logging Should Be Enabled CodeBuild Project Environment
---

### More Info:

This rule ensures that logging is enabled for the environment of an AWS CodeBuild project by checking if at least one log option is enabled. Logging provides valuable insights into build execution, errors, and debugging information. Failing to enable logging can hinder troubleshooting efforts and impact the visibility of build activities.

### Risk Level

Medium

### Address

Security

### Compliance Standards

CBP



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Sign in to the AWS Management Console.
2. Navigate to the AWS CodeBuild dashboard. You can do this by typing "CodeBuild" into the search bar and selecting it from the dropdown menu.
3. In the CodeBuild dashboard, you will see a list of your build projects. Select the project you want to check.
4. In the project details page, scroll down to the "Environment" section. Here, you should see an option for "CloudWatch logs". If this option is set to "Disabled", then logging is not enabled for this CodeBuild project environment.

#### Using CLI

1. Install and configure AWS CLI: Before you can start, you need to install the AWS CLI on your local machine. You can do this by downloading the appropriate installer from the AWS website. Once installed, you can configure it by running `aws configure` and providing your AWS Access Key ID, Secret Access Key, Default region name, and Default output format.

2. List all CodeBuild projects: Use the following command to list all the CodeBuild projects in your AWS account:

   ```
   aws codebuild list-projects --region your-region-name
   ```
   Replace 'your-region-name' with the name of your AWS region. This command will return a list of all CodeBuild project names.

3. Describe CodeBuild project: For each project, you need to check the environment configuration. Use the following command to get the details of a specific project:

   ```
   aws codebuild batch-get-projects --names project-name --region your-region-name
   ```
   Replace 'project-name' with the name of your CodeBuild project and 'your-region-name' with the name of your AWS region. This command will return a JSON object with the details of the specified project.

4. Check logging configuration: In the returned JSON object, navigate to the 'logsConfig' section. If the 'cloudWatchLogs' field is set to 'ENABLED', then logging is enabled for the project. If it is set to 'DISABLED', then logging is not enabled. 

   Note: You can use a tool like 'jq' to parse the JSON output and extract the 'cloudWatchLogs' field. For example:

   ```
   aws codebuild batch-get-projects --names project-name --region your-region-name | jq '.projects[].logsConfig.cloudWatchLogs.status'
   ```
   This command will return either 'ENABLED' or 'DISABLED', indicating whether logging is enabled for the specified project.

#### Using Python

1. Install and configure AWS SDK for Python (Boto3) in your environment. This will allow you to interact with AWS services including AWS CodeBuild.

```python
pip install boto3
aws configure
```

2. Create a Python script that uses Boto3 to interact with AWS CodeBuild. The script will list all your CodeBuild projects and check if logging is enabled for each project.

```python
import boto3

def check_logging_codebuild():
    client = boto3.client('codebuild')
    response = client.list_projects()
    
    for project in response['projects']:
        project_details = client.batch_get_projects(names=[project])
        for project in project_details['projects']:
            if 'logsConfig' in project['environment']:
                if 'cloudWatchLogs' in project['environment']['logsConfig']:
                    if 'status' in project['environment']['logsConfig']['cloudWatchLogs']:
                        if project['environment']['logsConfig']['cloudWatchLogs']['status'] != 'ENABLED':
                            print(f"Logging is not enabled for CodeBuild project: {project['name']}")
                        else:
                            print(f"Logging is enabled for CodeBuild project: {project['name']}")
            else:
                print(f"Logging is not configured for CodeBuild project: {project['name']}")

check_logging_codebuild()
```

3. Run the Python script. The script will print out the names of the CodeBuild projects where logging is not enabled or not configured.

4. Review the output of the script. If any CodeBuild projects are listed, this means that logging is not enabled for those projects and you have a misconfiguration.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the misconfiguration of logging not being enabled in an AWS CodeBuild project environment, you can follow these steps using the AWS Management Console:

1. **Sign in to the AWS Management Console**: Go to https://aws.amazon.com/ and sign in to your AWS account.

2. **Navigate to CodeBuild**: In the AWS Management Console, search for "CodeBuild" in the services search bar and click on "CodeBuild" to open the CodeBuild dashboard.

3. **Select the Project**: Locate and select the CodeBuild project for which you want to enable logging.

4. **Edit Project Settings**: Click on the project name to open the project settings.

5. **Enable CloudWatch Logs**: In the project settings, scroll down to the "Logs" section.

6. **Enable CloudWatch Logs**: Toggle the switch to enable CloudWatch Logs for the project. This will ensure that build logs are stored in CloudWatch Logs for future reference and troubleshooting.

7. **Configure Log Group**: You can optionally configure the log group name and stream name for the CloudWatch Logs. If you leave it blank, CodeBuild will create a default log group for the project.

8. **Save Changes**: Click on the "Update Project" button to save the changes and enable logging for the CodeBuild project environment.

9. **Verify Logging**: Trigger a build in the CodeBuild project to verify that logging is now enabled and logs are being sent to CloudWatch Logs.

By following these steps, you will successfully remediate the misconfiguration of logging not being enabled in the AWS CodeBuild project environment.

#### Using CLI

To remediate the misconfiguration of logging not being enabled for an AWS CodeBuild project environment, you can follow these steps using the AWS CLI:

Step 1: Get the current settings for the CodeBuild project environment:
```
aws codebuild batch-get-projects --names YOUR_PROJECT_NAME
```

Step 2: Update the CodeBuild project environment to enable logging:
```
aws codebuild update-project --name YOUR_PROJECT_NAME --environment "type=LINUX_CONTAINER,environmentVariables=[{name=CODEBUILD_LOG_CONFIG, value='{\"cloudwatch\": {\"status\":\"ENABLED\"}}'}]"
```

Replace `YOUR_PROJECT_NAME` with the actual name of your CodeBuild project.

Step 3: Verify that the logging configuration has been updated successfully:
```
aws codebuild batch-get-projects --names YOUR_PROJECT_NAME
```

After following these steps, the logging should be enabled for your AWS CodeBuild project environment.

#### Using Python

To remediate the misconfiguration of logging not being enabled for an AWS CodeBuild project environment using Python, you can follow these steps:

Step 1: Import the necessary Python libraries (boto3) to interact with AWS services.

```python
import boto3
```

Step 2: Define the AWS region and the CodeBuild client.

```python
region = 'your_aws_region'
codebuild_client = boto3.client('codebuild', region_name=region)
```

Step 3: Get the current settings of the CodeBuild project environment to check if logging is enabled.

```python
project_name = 'your_codebuild_project_name'

response = codebuild_client.batch_get_projects(names=[project_name])

environment = response['projects'][0]['environment']
```

Step 4: Check if logging is already enabled. If not, update the project environment to enable logging.

```python
if not environment.get('logsConfig'):
    environment['logsConfig'] = {
        'cloudWatchLogs': {
            'status': 'ENABLED'
        }
    }

    codebuild_client.update_project(
        name=project_name,
        environment=environment
    )

    print(f'Logging has been enabled for the CodeBuild project: {project_name}')
else:
    print(f'Logging is already enabled for the CodeBuild project: {project_name}')
```

Step 5: Run the Python script to remediate the misconfiguration by enabling logging for the specified AWS CodeBuild project environment.

Make sure to replace 'your_aws_region' and 'your_codebuild_project_name' with your actual AWS region and CodeBuild project name.

By following these steps and running the Python script, you can successfully remediate the misconfiguration of logging not being enabled for an AWS CodeBuild project environment.

</Tab>
</Tabs>