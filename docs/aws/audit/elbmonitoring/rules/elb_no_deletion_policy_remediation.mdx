

<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Sign in to the AWS Management Console.
2. Navigate to the EC2 Dashboard by selecting "Services" from the top menu, then choosing "EC2" under the "Compute" category.
3. In the EC2 Dashboard, under the "Load Balancing" section in the left navigation pane, click on "Load Balancers".
4. In the Load Balancers page, select the load balancer you want to check. In the "Description" tab below, look for the "Attributes" section. Here, you can see if the "Deletion Protection" flag is enabled or not.

#### Using CLI

1. Install and configure AWS CLI: Before you can start using AWS CLI, you need to install it on your local system. You can download it from the official AWS website. After installation, you need to configure it with your AWS account credentials. You can do this by running the command `aws configure` and then entering your Access Key ID, Secret Access Key, Default region name, and Default output format when prompted.

2. List all the Load Balancers: Use the following command to list all the load balancers in your account.

   ```
   aws elbv2 describe-load-balancers
   ```

   This command will return a JSON output with details of all the load balancers.

3. Check Deletion Protection Flag: For each load balancer, check the deletion protection flag by using the following command:

   ```
   aws elbv2 describe-load-balancer-attributes --load-balancer-arn <load-balancer-arn>
   ```

   Replace `<load-balancer-arn>` with the ARN of your load balancer. This command will return a JSON output with the attributes of the load balancer.

4. Parse the output: You can parse the output using a tool like `jq` to check if the deletion protection flag is enabled. If the `delete_protection.enabled` attribute is `false`, then the deletion protection flag is not enabled.

   ```
   aws elbv2 describe-load-balancer-attributes --load-balancer-arn <load-balancer-arn> | jq '.Attributes[] | select(.Key=="deletion_protection.enabled")'
   ```

   This command will return the `Key` and `Value` of the `deletion_protection.enabled` attribute. If the `Value` is `false`, then the deletion protection flag is not enabled.

#### Using Python

1. Install the necessary AWS SDK for Python (Boto3) if you haven't done so already. You can install it using pip:
```python
pip install boto3
```

2. Import the necessary modules and create a session using your AWS credentials. Replace `'my-profile'` with your AWS profile name.
```python
import boto3

session = boto3.Session(profile_name='my-profile')
elbv2 = session.client('elbv2')
```

3. Fetch all the load balancers and check the `DeletionProtection` attribute. If it's disabled, print the load balancer name.
```python
def check_elb_deletion_protection():
    response = elbv2.describe_load_balancers()
    for lb in response['LoadBalancers']:
        attributes = elbv2.describe_load_balancer_attributes(LoadBalancerArn=lb['LoadBalancerArn'])
        for attr in attributes['Attributes']:
            if attr['Key'] == 'deletion_protection.enabled':
                if attr['Value'] == 'false':
                    print(f"Deletion Protection is disabled for Load Balancer: {lb['LoadBalancerName']}")

check_elb_deletion_protection()
```

4. Run the script. If there are any load balancers with deletion protection disabled, their names will be printed on the console. If no names are printed, it means all your load balancers have deletion protection enabled. 

Please note that you need to have the necessary permissions to describe load balancers and their attributes. Also, replace `'my-profile'` with your AWS profile name.

</Tab>

<Tab title='Remediation'>
### Remediation

#### Using Console

Sure, here are the step-by-step instructions to remediate the misconfiguration of ELBs not having deletion protection flag enabled in AWS using the AWS console:

1. Open the AWS Management Console and navigate to the EC2 service.

2. From the navigation pane, click on the "Load Balancers" option.

3. Select the ELB that you want to remediate and click on its name to open its details page.

4. In the "Attributes" section of the details page, locate the "Deletion Protection" option and click on the "Edit" button next to it.

5. Select the checkbox next to "Enable deletion protection" and click on the "Save" button to enable deletion protection for the ELB.

6. Once the deletion protection is enabled, you will see a lock icon next to the ELB name indicating that it is protected from accidental deletion.

7. Repeat the above steps for all the ELBs that need to be remediated.

By following the above steps, you can easily remediate the misconfiguration of ELBs not having deletion protection flag enabled in AWS using the AWS console.

#### Using CLI

To remediate the misconfiguration of ELBs not having deletion protection flag enabled, you can follow the below steps:

1. Open your AWS CLI and run the following command to enable deletion protection on all your ELBs:

```
aws elb modify-load-balancer-attributes --load-balancer-name <ELB_NAME> --attributes "{\"DeletionProtection\":{\"Value\":true}}"
```

Note: Replace `<ELB_NAME>` with the name of the ELB that you want to enable deletion protection for.

2. To verify that the deletion protection flag is enabled, run the following command:

```
aws elb describe-load-balancers --load-balancer-name <ELB_NAME> --query 'LoadBalancerDescriptions[*].[LoadBalancerName, Scheme, DeletionProtection]'
```

Note: Replace `<ELB_NAME>` with the name of the ELB that you want to verify deletion protection for.

3. If the deletion protection flag is not enabled, repeat step 1 for all the ELBs that you want to enable deletion protection for.

By following these steps, you can remediate the misconfiguration of ELBs not having deletion protection flag enabled in AWS using AWS CLI.

#### Using Python

To remediate the misconfiguration of ELBs not having deletion protection flag enabled, you can use the following steps in Python:

1. Import the necessary AWS SDK modules:

```
import boto3
from botocore.exceptions import ClientError
```

2. Initialize a boto3 client for Elastic Load Balancing:

```
elb_client = boto3.client('elbv2')
```

3. Get a list of all the existing ELBs in your AWS account:

```
try:
    response = elb_client.describe_load_balancers()
    elbs = response['LoadBalancers']
except ClientError as e:
    print(e)
```

4. For each ELB, check if the deletion protection flag is enabled. If not, enable it:

```
for elb in elbs:
    elb_name = elb['LoadBalancerName']
    try:
        response = elb_client.modify_load_balancer_attributes(
            LoadBalancerArn=elb['LoadBalancerArn'],
            Attributes=[
                {
                    'Key': 'deletion_protection.enabled',
                    'Value': 'true'
                }
            ]
        )
        print(f"Deletion protection enabled for ELB {elb_name}")
    except ClientError as e:
        print(e)
```

5. Run the Python script to enable deletion protection for all the ELBs in your AWS account.

Note: You will need to have appropriate IAM permissions to modify the load balancer attributes.


</Tab>
</Tabs>