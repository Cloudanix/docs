

<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to the AWS Management Console and open the Amazon EC2 dashboard at https://console.aws.amazon.com/ec2/.

2. In the navigation pane, under LOAD BALANCING, click on Load Balancers. This will display a list of all the Elastic Load Balancers (ELBs) currently available within the selected AWS region.

3. For each ELB listed, check the Instances tab in the bottom panel. If the Instances tab is empty, it means that the ELB is not associated with any EC2 instances and is therefore unused.

4. To confirm, you can also check the Monitoring tab for the ELB. If there is no request traffic for a significant period of time, it is likely that the ELB is unused.

#### Using CLI

1. Install and configure AWS CLI: Before you can start, you need to install the AWS CLI on your local machine. You can do this by running the command `pip install awscli`. After installation, you need to configure it with your AWS credentials. You can do this by running `aws configure` and then entering your AWS Access Key ID, Secret Access Key, Default region name, and Default output format when prompted.

2. List all ELBs: You can list all the Elastic Load Balancers (ELBs) in your AWS account by running the following command: `aws elbv2 describe-load-balancers`. This command will return a JSON object with information about all your ELBs.

3. Check for unused ELBs: To check if an ELB is unused, you need to see if it has any registered instances. You can do this by running the following command for each ELB: `aws elbv2 describe-target-health --load-balancer-arn <LoadBalancerArn>`. Replace `<LoadBalancerArn>` with the ARN of the ELB you want to check. This command will return a JSON object with information about the health of the targets for the specified load balancer.

4. Parse the output: If the `TargetHealthDescriptions` array in the output is empty, that means the ELB has no registered instances and is unused. You can parse the output using a tool like `jq` or a scripting language like Python to automate this process. For example, you could use the following command to get a list of unused ELBs: `aws elbv2 describe-load-balancers | jq -r '.LoadBalancers[] | select(.TargetHealthDescriptions == []) | .LoadBalancerArn'`. This command will return a list of the ARNs of all unused ELBs.

#### Using Python

1. Install and configure AWS SDK for Python (Boto3): Boto3 is the Amazon Web Services (AWS) Software Development Kit (SDK) for Python, which allows Python developers to write software that makes use of services like Amazon S3, Amazon EC2, etc. You can install it using pip:

```python
pip install boto3
```
After installation, you need to configure it. You can do this by using the AWS CLI:

```bash
aws configure
```
Enter your AWS Access Key ID, AWS Secret Access Key, Default region name, and Default output format when prompted.

2. Import the necessary libraries and create an AWS session: In your Python script, you need to import Boto3 and create a session using your AWS credentials.

```python
import boto3

session = boto3.Session(
    aws_access_key_id='YOUR_ACCESS_KEY',
    aws_secret_access_key='YOUR_SECRET_KEY',
    region_name='YOUR_REGION'
)
```
3. List all the ELBs and check for unused ones: You can use the `describe_load_balancers` method to get a list of all the ELBs. Then, for each ELB, you can use the `describe_instance_health` method to check if there are any instances registered with it. If there are no instances, the ELB is unused.

```python
elb = session.client('elbv2')

response = elb.describe_load_balancers()

for loadBalancer in response['LoadBalancers']:
    instances = elb.describe_instance_health(
        LoadBalancerName=loadBalancer['LoadBalancerName']
    )
    if not instances['InstanceStates']:
        print(f"Unused ELB: {loadBalancer['LoadBalancerName']}")
```
4. Run the script: Finally, you can run the script using a Python interpreter. The script will print the names of all unused ELBs.

Please note that this script only checks for unused Classic Load Balancers. If you are using Application Load Balancers or Network Load Balancers, you will need to modify the script accordingly. Also, make sure to replace 'YOUR_ACCESS_KEY', 'YOUR_SECRET_KEY', and 'YOUR_REGION' with your actual AWS credentials and region.

</Tab>

<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the misconfiguration of having no unused ELBs present in AWS, you can follow the below steps:

1. Sign in to the AWS Management Console.

2. Go to the EC2 dashboard.

3. Click on "Load Balancers" from the left-hand menu.

4. Identify any unused ELBs that are present in the list.

5. Select the unused ELB and click on "Actions" and then "Delete".

6. Confirm the deletion by clicking on "Yes, Delete".

7. Repeat the above steps for all unused ELBs that are present.

By following these steps, you will be able to remediate the misconfiguration of having no unused ELBs present in AWS.

#### Using CLI

To remediate the misconfiguration of having unused ELBs in AWS, you can follow the below steps using AWS CLI:

1. List all the ELBs in the AWS account using the following command:

```
aws elb describe-load-balancers
```

2. Identify the ELBs that are not being used and note down their names.

3. Delete the unused ELBs using the following command:

```
aws elb delete-load-balancer --load-balancer-name <ELB-Name>
```

4. Repeat step 3 for all the unused ELBs that you identified in step 2.

5. Verify that all the unused ELBs have been deleted using the following command:

```
aws elb describe-load-balancers
```

This should remediate the misconfiguration of having unused ELBs in AWS.

#### Using Python

To remediate the misconfiguration "No Unused ELBs Should Be Present" in AWS using Python, you can follow the below steps:

1. Import the required AWS SDK modules using the boto3 library in Python.
2. Use the describe_load_balancers() method to list all the load balancers available in your AWS account.
3. Use the describe_instance_health() method to check the instances associated with each load balancer and their health status.
4. Identify the unused load balancers by checking if there are any instances associated with them.
5. Use the delete_load_balancer() method to delete the unused load balancers.

Here's the sample Python code to remediate the misconfiguration "No Unused ELBs Should Be Present" in AWS:

```
import boto3

# Create an EC2 client
elb_client = boto3.client('elbv2')

# Get all the load balancers in the account
response = elb_client.describe_load_balancers()

# Loop through each load balancer and check if there are any instances associated with it
for lb in response['LoadBalancers']:
    lb_arn = lb['LoadBalancerArn']
    instances = elb_client.describe_target_health(TargetGroupArn=lb_arn)

    # If there are no instances associated with the load balancer, delete it
    if len(instances['TargetHealthDescriptions']) == 0:
        elb_client.delete_load_balancer(LoadBalancerArn=lb_arn)
```

Note: Before running the script, make sure that you have configured the AWS credentials in your environment.


</Tab>
</Tabs>