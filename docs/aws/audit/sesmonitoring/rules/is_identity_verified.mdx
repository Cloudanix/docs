---
slug: is_identity_verified
title: AWS SES Identities Should Be Verified
sidebar_label: AWS SES Identities Should Be Verified
---

### More Info:

AWS SES identities should be verified in order to prove their ownership and to prevent others from using them. Verifying identities (i.e. ownership confirmation) is an efficient way to prevent people masquerading as other email addresses when they really do not own them.

### Risk Level

Medium

### Address

Security

### Compliance Standards

CBP

### Triage and Remediation
<Tabs>

<Tab title='Cause'>
### Check Cause
<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
1. Sign in to the AWS Management Console.
2. Navigate to the Simple Email Service (SES) dashboard by typing 'SES' into the search bar and selecting 'Simple Email Service'.
3. In the left-hand navigation pane, click on 'Identity Management', then select 'Email Identities' or 'Domain Identities' based on your requirement.
4. Here, you can see the list of all the identities (email addresses and domains). Check the 'Verification Status' column for each identity. If the status is 'verified', then the identity is correctly configured. If the status is 'pending verification' or 'failed', then the identity is not verified, indicating a misconfiguration.
</Accordion>

<Accordion title='Using CLI'>
1. Install and configure AWS CLI: Before you can start using AWS CLI, you need to install it on your local machine and configure it with your AWS account credentials. You can do this by running the following commands:

   Installation:
   ```
   pip install awscli
   ```
   Configuration:
   ```
   aws configure
   ```
   You will be prompted to provide your AWS Access Key ID, Secret Access Key, Default region name, and Default output format.

2. List all SES identities: Once your AWS CLI is set up, you can list all the Simple Email Service (SES) identities in your account by running the following command:
   ```
   aws ses list-identities
   ```
   This command will return a list of all identities (email addresses and domains) that you have attempted to verify.

3. Check the verification status of each identity: For each identity listed, you can check its verification status by running the following command:
   ```
   aws ses get-identity-verification-attributes --identities "identity1" "identity2" "identity3"
   ```
   Replace "identity1", "identity2", "identity3" with the actual identities you want to check. This command will return the verification status for each identity.

4. Analyze the output: The output of the previous command will show the verification status of each identity. If the verification status is "Pending", it means the identity is not verified. If the verification status is "Success", it means the identity is verified.
</Accordion>

<Accordion title='Using Python'>
1. Install the necessary AWS SDK for Python (Boto3) if you haven't done so already. You can do this by running the command `pip install boto3` in your terminal.

2. Import the necessary modules and create a session using your AWS credentials. Here's a basic example:

```python
import boto3

session = boto3.Session(
    aws_access_key_id='YOUR_ACCESS_KEY',
    aws_secret_access_key='YOUR_SECRET_KEY',
    region_name='us-west-2'
)
```

3. Now, you can use the `list_identities` method from the `ses` client to get a list of all identities (email addresses and domains). Here's how you can do this:

```python
ses_client = session.client('ses')

response = ses_client.list_identities(
    MaxItems=100
)

identities = response['Identities']
```

4. For each identity, you can use the `get_identity_verification_attributes` method to check if the identity is verified. If the `VerificationStatus` is not `Success`, then the identity is not verified.

```python
for identity in identities:
    response = ses_client.get_identity_verification_attributes(
        Identities=[
            identity,
        ]
    )

    verification_status = response['VerificationAttributes'][identity]['VerificationStatus']

    if verification_status != 'Success':
        print(f'The identity {identity} is not verified.')
```

This script will print out all identities that are not verified. You can modify it to suit your needs, for example by sending an alert or storing the unverified identities in a database.
</Accordion>

</AccordionGroup>
</Tab>

<Tab title='Remediation'>
### Remediation

<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
To remediate the misconfiguration of unverified identities in AWS SES (Simple Email Service), follow these steps using the AWS Management Console:

1. **Sign in to the AWS Management Console**: Go to the AWS Management Console (https://console.aws.amazon.com/) and sign in with your credentials.

2. **Navigate to SES Console**: In the AWS Management Console, search for "SES" in the search bar at the top and click on "Simple Email Service" under the Services section.

3. **Verify Email Addresses or Domains**:
   - In the SES console, click on the "Email Addresses" or "Domains" option in the left navigation pane, depending on whether the misconfiguration is related to email addresses or domains.
   - You will see a list of email addresses or domains that are not verified.
   - Select the unverified email address or domain that you want to verify by checking the checkbox next to it.

4. **Verify the Identity**:
   - Click on the "Verify a New Email Address" or "Verify a New Domain" button, depending on whether you are verifying an email address or a domain.
   - Follow the on-screen instructions to verify the selected email address or domain. This usually involves sending a verification email to the email address or updating DNS records for the domain.

5. **Check Verification Status**:
   - Once you have completed the verification process, go back to the list of email addresses or domains.
   - The status of the verified identity should now show as "verified" in the console.

6. **Repeat for Other Unverified Identities**: If there are other unverified email addresses or domains, repeat the above steps to verify them as well.

7. **Monitor Verification Status**: It is recommended to regularly monitor the SES console to ensure that all email addresses and domains used for sending emails are verified.

By following these steps, you can remediate the misconfiguration of unverified identities in AWS SES and ensure that all email addresses and domains are properly verified for sending emails through SES.

#
</Accordion>

<Accordion title='Using CLI'>
To remediate the misconfiguration of unverified identities in AWS SES using AWS CLI, follow these steps:

1. List all the identities in AWS SES:
```
aws ses list-identities
```

2. Identify the unverified identities from the list.

3. For each unverified identity, request verification by running the following command:
```
aws ses verify-email-identity --email-address example@example.com
```
Replace `example@example.com` with the actual email address that needs to be verified.

4. AWS will send a verification email to the specified email address. Instruct the email recipient to click on the verification link in the email to verify the identity.

5. Once the email address is verified, you can confirm the verification status by running the following command:
```
aws ses get-identity-verification-attributes --identities example@example.com
```
Replace `example@example.com` with the verified email address.

6. Repeat steps 3-5 for each unverified identity in AWS SES.

By following these steps, you can remediate the misconfiguration of unverified identities in AWS SES using AWS CLI.
</Accordion>

<Accordion title='Using Python'>
To remediate the misconfiguration of unverified identities in AWS SES using Python, you can follow these steps:

1. Install the Boto3 library: Boto3 is the Amazon Web Services (AWS) SDK for Python. You can install it using pip by running the following command:
```bash
pip install boto3
```

2. Write a Python script to verify all the identities in AWS SES:
```python
import boto3

# Initialize the SES client
client = boto3.client('ses', region_name='YOUR_REGION_NAME')

# Get a list of all identities
response = client.list_identities()

# Loop through each identity and verify it if it is not already verified
for identity in response['Identities']:
    response = client.get_identity_verification_attributes(Identities=[identity])
    if not response['VerificationAttributes'][identity]['VerificationStatus'] == 'Success':
        client.verify_email_identity(EmailAddress=identity)
        print(f"Identity {identity} has been verified.")
    else:
        print(f"Identity {identity} is already verified.")
```

3. Replace `'YOUR_REGION_NAME'` with the AWS region where your SES service is located.

4. Run the Python script to verify all the unverified identities in AWS SES. Make sure that your AWS credentials are properly configured in the environment where you are running the script.

After running this script, all the unverified identities in AWS SES will be verified, and the misconfiguration will be remediated.
</Accordion>

</AccordionGroup>
</Tab>
</Tabs>
### Additional Reading:

- [https://docs.aws.amazon.com/ses/latest/DeveloperGuide/verify-addresses-and-domains.html](https://docs.aws.amazon.com/ses/latest/DeveloperGuide/verify-addresses-and-domains.html) 

