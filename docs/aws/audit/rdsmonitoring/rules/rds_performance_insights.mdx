---
slug: rds_performance_insights
title: Performance Insights Feature Should Be Enabled
sidebar_label: Performance Insights Feature Should Be Enabled
---

### More Info:

Your AWS RDS MySQL and PostgreSQL database instances should have Performance Insights feature enabled in order to allow you to obtain a better overview of your databases performance

### Risk Level

Low

### Address

Reliability, Operational Maturity

### Compliance Standards

CBP

### Remediation

#### Using Console

Sure, here are the step-by-step instructions to remediate the "Performance Insights Feature Should Be Enabled" misconfiguration for AWS using the AWS console:

1. Log in to your AWS Management Console.

2. Navigate to the Amazon RDS dashboard.

3. Select the RDS instance that you want to enable Performance Insights for.

4. Click on the "Modify" button on the top right-hand side of the page.

5. Scroll down to the "Performance Insights" section.

6. Check the box next to "Enable Performance Insights".

7. Select the "Enable Enhanced Monitoring" option.

8. Choose the retention period for the Performance Insights data.

9. Click on the "Continue" button.

10. Review the changes and click on the "Modify DB instance" button.

11. Wait for the modification to complete.

12. Once the modification is complete, Performance Insights will be enabled for your RDS instance.

That's it! You have successfully remediated the "Performance Insights Feature Should Be Enabled" misconfiguration for AWS using the AWS console.

#### Using CLI

To remediate the misconfiguration "Performance Insights Feature Should Be Enabled" for AWS using AWS CLI, follow the below steps:

1. Open the AWS CLI and run the following command to enable Performance Insights on the DB instance:

   ```
   aws rds modify-db-instance --db-instance-identifier <DB_INSTANCE_IDENTIFIER> --enable-performance-insights
   ```

   Replace `<DB_INSTANCE_IDENTIFIER>` with the identifier of your DB instance.

2. Once the command is executed successfully, the Performance Insights feature will be enabled on the specified DB instance.

   Note: The Performance Insights feature is available on the following DB engine versions and higher:

   - MySQL 5.6.34 and higher
   - MySQL 5.7.16 and higher
   - PostgreSQL 9.6.6 and higher
   - PostgreSQL 10.4 and higher

   If your DB engine version is lower than the above, you will need to upgrade your DB engine version to use the Performance Insights feature.

3. You can also enable Performance Insights on a DB cluster by running the following command:

   ```
   aws rds modify-db-cluster --db-cluster-identifier <DB_CLUSTER_IDENTIFIER> --enable-performance-insights
   ```

   Replace `<DB_CLUSTER_IDENTIFIER>` with the identifier of your DB cluster.

4. Once the command is executed successfully, the Performance Insights feature will be enabled on the specified DB cluster.

   Note: The Performance Insights feature is available on the following DB engine versions and higher:

   - Aurora MySQL 2.02 and higher
   - Aurora PostgreSQL 10.7 and higher

   If your DB engine version is lower than the above, you will need to upgrade your DB engine version to use the Performance Insights feature.

#### Using Python

To remediate the misconfiguration "Performance Insights Feature Should Be Enabled" for AWS using Python, you can follow these steps:

1. Import the necessary libraries:

```
import boto3
```

2. Create a boto3 client for RDS:

```
client = boto3.client('rds')
```

3. Get a list of all RDS instances:

```
response = client.describe_db_instances()
```

4. Loop through each instance and check if Performance Insights is enabled:

```
for db_instance in response['DBInstances']:
    db_instance_identifier = db_instance['DBInstanceIdentifier']
    db_instance_status = db_instance['DBInstanceStatus']
    performance_insights_enabled = db_instance.get('PerformanceInsightsEnabled', False)
```

5. If Performance Insights is not enabled, enable it:

```
if db_instance_status == 'available' and not performance_insights_enabled:
    client.modify_db_instance(
        DBInstanceIdentifier=db_instance_identifier,
        PerformanceInsightsEnabled=True
    )
```

6. If Performance Insights is already enabled, do nothing.

7. Run the script periodically to ensure that new RDS instances are also checked and remediated if necessary.

Note: Make sure that you have the necessary permissions to modify RDS instances.

### Additional Reading:

- [https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.Enabling.html](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.Enabling.html) 

