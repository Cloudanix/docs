---
slug: rds_automated_backups_enabled
title: Automated Backups Should Be Enabled
sidebar_label: Automated Backups Should Be Enabled
---

### More Info:

Automated backups of your RDS database instances should be enabled to ensure point-in-time recovery.

### Risk Level

High

### Address

Operational Maturity, Reliability, Security

### Compliance Standards

HIPAA, NIST, SOC2, HITRUST, AWSWAF, NISTCSF, PCIDSS



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Sign in to the AWS Management Console and open the Amazon RDS console at https://console.aws.amazon.com/rds/.

2. In the navigation pane, choose "Databases".

3. Choose the name of the RDS instance you want to check.

4. In the "Details" section, look for the "Backup" section. Here, you can see the "Backup Retention Period". If the value is set to '0 days', it means that the automated backups are not enabled for this RDS instance.

#### Using CLI

1. Install and configure AWS CLI: Before you can start using AWS CLI, you need to install it on your local machine and configure it with your AWS account credentials. You can do this by running the following commands:

   Installation:
   ```
   pip install awscli
   ```
   Configuration:
   ```
   aws configure
   ```
   You will be prompted to provide your AWS Access Key ID, Secret Access Key, Default region name, and Default output format.

2. List all RDS instances: Once your AWS CLI is set up, you can list all your RDS instances by running the following command:
   ```
   aws rds describe-db-instances
   ```
   This command will return a JSON output with the details of all your RDS instances.

3. Check backup configuration: To check if automated backups are enabled for each RDS instance, you need to look at the "BackupRetentionPeriod" attribute in the JSON output. If the value of this attribute is greater than 0, it means that automated backups are enabled for that RDS instance. You can use the following command to filter out the DB instance identifier and its corresponding backup retention period:
   ```
   aws rds describe-db-instances --query 'DBInstances[*].[DBInstanceIdentifier,BackupRetentionPeriod]'
   ```
4. Analyze the output: Finally, you need to analyze the output of the previous command. If you find any RDS instance with a "BackupRetentionPeriod" of 0, it means that automated backups are not enabled for that instance.

#### Using Python

1. Install the necessary Python libraries: Before you can start writing the script, you need to install the necessary Python libraries. The Boto3 library is the Amazon Web Services (AWS) Software Development Kit (SDK) for Python, which allows Python developers to write software that makes use of services like Amazon S3, Amazon EC2, and others. You can install it using pip:

```python
pip install boto3
```

2. Import the necessary libraries and establish a session: In your Python script, you'll need to import the Boto3 library and establish a session with your AWS account. You'll need your AWS access key and secret access key for this.

```python
import boto3

session = boto3.Session(
    aws_access_key_id='YOUR_ACCESS_KEY',
    aws_secret_access_key='YOUR_SECRET_KEY',
    region_name='us-west-2'
)
```

3. Connect to the RDS service: Once you've established a session, you can connect to the RDS service. This will allow you to interact with your RDS instances.

```python
rds = session.client('rds')
```

4. Check for automated backups: Now you can use the `describe_db_instances` method to get a list of all your RDS instances, and then check the `BackupRetentionPeriod` attribute for each one. If the `BackupRetentionPeriod` is 0, that means automated backups are not enabled.

```python
response = rds.describe_db_instances()

for instance in response['DBInstances']:
    if instance['BackupRetentionPeriod'] == 0:
        print(f"Automated backups are not enabled for RDS instance {instance['DBInstanceIdentifier']}")
```

This script will print out the identifiers of any RDS instances that do not have automated backups enabled.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the misconfiguration of automated backups not being enabled for AWS RDS using the AWS Management Console, follow these steps:

1. **Sign in to the AWS Management Console:**
   - Go to the AWS Management Console (https://aws.amazon.com/console) and sign in with your credentials.

2. **Navigate to RDS Service:**
   - In the AWS Management Console, navigate to the Amazon RDS service by clicking on "Services" in the top left corner and then selecting "RDS" under the Database section.

3. **Select the RDS Instance:**
   - From the list of RDS instances, select the instance for which you want to enable automated backups by clicking on its identifier.

4. **Enable Automated Backups:**
   - In the RDS instance details page, click on the "Modify" button to change the configuration settings.
   - Scroll down to the "Backup" section, and under the "Backup retention period" option, select a retention period for automated backups (e.g., 7 days, 30 days, etc.).
   - Check the box for "Backup retention period" to enable automated backups.
   - You can also configure the preferred backup window and backup maintenance window according to your requirements.
   - Click on the "Continue" button.

5. **Apply Changes:**
   - Review the changes you have made, and click on the "Modify DB Instance" button to apply the changes to the RDS instance.

6. **Monitor the Status:**
   - Once the modification is complete, monitor the status of the RDS instance to ensure that automated backups are now enabled.

By following these steps, you have successfully enabled automated backups for the AWS RDS instance using the AWS Management Console. This will help ensure that regular backups are taken automatically, providing data protection and recovery options in case of any unforeseen incidents.

#### Using CLI

To enable automated backups for an AWS RDS instance using AWS CLI, follow these steps:

1. Open your terminal or command prompt.

2. Use the following AWS CLI command to modify the RDS instance to enable automated backups. Replace `your-rds-instance-name` with the actual name of your RDS instance.

```bash
aws rds modify-db-instance --db-instance-identifier your-rds-instance-name --backup-retention-period 7 --apply-immediately
```

3. This command will modify the RDS instance to enable automated backups with a retention period of 7 days. You can adjust the `--backup-retention-period` parameter to set a different retention period as needed.

4. After running the command, AWS will apply the changes immediately, and automated backups will be enabled for your RDS instance.

5. You can verify that automated backups are enabled by checking the RDS instance details in the AWS Management Console or by running the following AWS CLI command:

```bash
aws rds describe-db-instances --db-instance-identifier your-rds-instance-name --query 'DBInstances[*].[DBInstanceIdentifier,DBInstanceArn,BackupRetentionPeriod,PreferredBackupWindow]'
```

6. Look for the `BackupRetentionPeriod` value in the output to confirm that automated backups are enabled with the desired retention period.

By following these steps, you can successfully remediate the misconfiguration of automated backups not being enabled for an AWS RDS instance using AWS CLI.

#### Using Python

To remediate the misconfiguration of automated backups not being enabled for an AWS RDS instance using Python, you can use the AWS SDK for Python (Boto3) to enable automated backups. Below are the step-by-step instructions to remediate this issue:

1. Install Boto3: If you haven't already installed Boto3, you can do so using pip by running the following command:
   ```
   pip install boto3
   ```

2. Configure AWS Credentials: Make sure you have your AWS credentials configured either by setting environment variables or using AWS CLI `aws configure`.

3. Write a Python script: Create a Python script with the following code to enable automated backups for an RDS instance. Replace `your_rds_instance_identifier` with the actual identifier of your RDS instance.

   ```python
   import boto3

   rds = boto3.client('rds')

   instance_identifier = 'your_rds_instance_identifier'

   try:
       response = rds.modify_db_instance(
           DBInstanceIdentifier=instance_identifier,
           BackupRetentionPeriod=7,  # Set the number of days to retain backups
           ApplyImmediately=True
       )
       print(f"Automated backups enabled for RDS instance {instance_identifier}")
   except Exception as e:
       print(f"Error enabling automated backups: {str(e)}")
   ```

4. Run the Python script: Execute the Python script to enable automated backups for the specified RDS instance. This script will set the backup retention period to 7 days. You can adjust this value as needed.

   ```
   python enable_rds_automated_backups.py
   ```

5. Verify the configuration: After running the script, verify that automated backups have been enabled for the RDS instance by checking the AWS Management Console or using the AWS CLI.

By following these steps and running the Python script, you can remediate the misconfiguration of automated backups not being enabled for an AWS RDS instance.

### Additional Reading:

- [https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_WorkingWithAutomatedBackups.html](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_WorkingWithAutomatedBackups.html) 


</Tab>
</Tabs>