---
slug: rds_reserved_instance_payment_pending
title: RDS Reserved Instances Should Not Have Status - Payment Pending
sidebar_label: RDS Reserved Instances Should Not Have Status - Payment Pending
---

### More Info:

Identify any pending RDS Reserved Instance (RI) purchases available within your AWS account. A payment-pending RDS RI purchase is a reservation purchase that cannot be fully processed due to issues with the payment method

### Risk Level

Medium

### Address

Cost Optimisation

### Compliance Standards

CBP


### Triage and Remediation
<Tabs>

<Tab title='Cause'>
### Check Cause
<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
1. Sign in to the AWS Management Console.
2. Navigate to the RDS dashboard. You can do this by typing "RDS" into the search bar at the top of the console, then selecting "RDS" from the dropdown menu.
3. In the navigation pane on the left-hand side of the RDS dashboard, click on "Reserved instances". This will bring up a list of all your reserved instances.
4. Check the "Status" column for each of your reserved instances. If any of them have the status "Payment Pending", this indicates a misconfiguration.
</Accordion>

<Accordion title='Using CLI'>
1. First, you need to install and configure AWS CLI on your local machine. You can do this by following the instructions provided by AWS. Make sure you have the necessary permissions to access the RDS resources.

2. Once the AWS CLI is set up, you can use the `describe-reserved-db-instances` command to list all the RDS Reserved Instances. The command is as follows:

   ```
   aws rds describe-reserved-db-instances
   ```

3. This command will return a JSON output with details of all the RDS Reserved Instances. You need to check the `State` field of each Reserved Instance. If the `State` field is `payment-pending`, it means that the payment for that Reserved Instance is pending.

4. To filter out the instances with payment pending status, you can use the `jq` command-line JSON processor. The command is as follows:

   ```
   aws rds describe-reserved-db-instances | jq -r '.ReservedDBInstances[] | select(.State=="payment-pending")'
   ```

This command will return the details of all the RDS Reserved Instances that have a payment pending status.
</Accordion>

<Accordion title='Using Python'>
1. Install and configure AWS SDK for Python (Boto3): Boto3 makes it easy to integrate your Python application, library, or script with AWS services including AWS S3, AWS EC2, AWS DynamoDB, and much more. To install Boto3, you can use pip:

   ```
   pip install boto3
   ```

   You also need to configure your AWS credentials. You can do this in several ways, but the simplest is to use the AWS CLI:

   ```
   aws configure
   ```

   This will prompt you for your AWS Access Key ID, Secret Access Key, AWS Region, and output format.

2. Use Boto3 to connect to AWS RDS: Once Boto3 is installed and configured, you can write a Python script to connect to AWS RDS. Here is a simple example:

   ```python
   import boto3

   # Create a low-level service client
   client = boto3.client('rds')

   # Call describe_reserved_db_instances to get the status of RDS Reserved Instances
   response = client.describe_reserved_db_instances()
   ```

3. Check the status of each Reserved Instance: The `describe_reserved_db_instances` method returns a list of all your Reserved Instances. You can iterate over this list and check the status of each instance:

   ```python
   for instance in response['ReservedDBInstances']:
       if instance['State'] == 'payment-pending':
           print(f"RDS Reserved Instance {instance['ReservedDBInstanceId']} has status - Payment Pending")
   ```

4. Run the script: Finally, you can run the script using Python. If there are any Reserved Instances with status - Payment Pending, they will be printed to the console. If there are no such instances, the script will not output anything. 

   ```
   python check_rds_reserved_instances.py
   ```

This script will help you detect any RDS Reserved Instances that have status - Payment Pending.
</Accordion>

</AccordionGroup>
</Tab>

<Tab title='Remediation'>
### Remediation

<AccordionGroup>
<Accordion title='Using Console' defaultOpen='true'>
To remediate the issue of RDS Reserved Instances having a status of "Payment Pending" in AWS, you can follow these step-by-step instructions using the AWS Management Console:

1. **Sign in to the AWS Management Console**: Go to https://aws.amazon.com/, click on "Sign In to the Console", and enter your credentials.

2. **Navigate to the RDS Console**: Once you are logged in, navigate to the Amazon RDS console by clicking on "Services" in the top menu bar, selecting "RDS" under the Database category.

3. **Identify the RDS Reserved Instances with Payment Pending Status**:
   - In the RDS console, click on the "Reserved Instances" in the left-hand menu.
   - Look for the Reserved Instances with a status of "Payment Pending". These instances are the ones that need to be remediated.

4. **Select the Reserved Instance**:
   - Click on the checkbox next to the RDS Reserved Instance with the "Payment Pending" status to select it.

5. **Modify the Reserved Instance**:
   - Click on the "Actions" dropdown menu above the list of Reserved Instances.
   - Select "Modify Reserved Instances" from the dropdown menu.

6. **Update the Payment Information**:
   - In the Modify Reserved Instances page, update the payment information for the selected Reserved Instance.
   - You may need to update the payment method or resolve any payment issues to ensure that the status changes from "Payment Pending" to "Active".

7. **Save Changes**:
   - Once you have updated the payment information, click on the "Modify Reserved Instances" button to save the changes.

8. **Verify the Status**:
   - After saving the changes, go back to the list of Reserved Instances and verify that the status of the selected Reserved Instance has changed from "Payment Pending" to "Active".

By following these steps, you should be able to remediate the issue of RDS Reserved Instances having a status of "Payment Pending" in AWS using the AWS Management Console.

#
</Accordion>

<Accordion title='Using CLI'>
To remediate the misconfiguration of RDS Reserved Instances having a status of "Payment Pending" in AWS using AWS CLI, follow these steps:

1. List all the Reserved Instances in your AWS account to identify the one with the status "Payment Pending":
   
```bash
aws rds describe-reserved-db-instances
```

2. Identify the Reserved Instance with the status "Payment Pending" in the output.

3. Modify the Reserved Instance to change its status from "Payment Pending" to "Active" by using the `modify-db-instance` command:

```bash
aws rds modify-db-instance --db-instance-identifier <your-db-instance-identifier> --reserved-db-instance-id <your-reserved-instance-id> --apply-immediately
```

Replace `<your-db-instance-identifier>` with the identifier of your RDS DB instance and `<your-reserved-instance-id>` with the ID of the Reserved Instance that has the status "Payment Pending".

4. Wait for the modification to be completed. You can check the status of the Reserved Instance again using the `describe-reserved-db-instances` command:

```bash
aws rds describe-reserved-db-instances
```

5. Verify that the status of the Reserved Instance has been successfully changed to "Active".

By following these steps, you can remediate the misconfiguration of RDS Reserved Instances having a status of "Payment Pending" in AWS using the AWS CLI.
</Accordion>

<Accordion title='Using Python'>
To remediate the issue of RDS Reserved Instances having a status of "Payment Pending" in AWS using Python, you can follow these steps:

1. Import the necessary Python libraries:
```python
import boto3
```

2. Initialize the AWS RDS client:
```python
rds_client = boto3.client('rds')
```

3. Describe all the Reserved Instances for RDS:
```python
reserved_instances = rds_client.describe_reserved_db_instances()
```

4. Iterate through each Reserved Instance and check if its status is "Payment Pending":
```python
for reserved_instance in reserved_instances['ReservedDBInstances']:
    if reserved_instance['State'] == 'payment-pending':
        reserved_instance_id = reserved_instance['ReservedDBInstanceId']
        # Modify the status of the Reserved Instance to active
        rds_client.modify_reserved_db_instances(
            ReservedDBInstanceId=reserved_instance_id,
            ReservedDBInstancePaymentType='ALL_UPFRONT'  # You can choose the appropriate payment type
        )
```

5. After running the above script, the status of the RDS Reserved Instances with "Payment Pending" should be remediated to the desired status.

Please note that you need to have the necessary permissions to describe and modify RDS Reserved Instances in your AWS account. Also, ensure that you have the AWS SDK for Python (Boto3) installed in your environment.
</Accordion>

</AccordionGroup>
</Tab>
</Tabs>
### Additional Reading:

- [https://aws.amazon.com/rds/reserved-instances/](https://aws.amazon.com/rds/reserved-instances/) 

