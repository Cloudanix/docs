---
slug: rds_auto_minor_version_upgrade
title: Auto Minor Version Upgrade flag Should Be Enabled
sidebar_label: Auto Minor Version Upgrade flag Should Be Enabled
---

### More Info:

Your RDS database instances should have the Auto Minor Version Upgrade flag enabled in order to receive automatically minor engine upgrades during the specified maintenance window

### Risk Level

Low

### Address

Security

### Compliance Standards

AWSWAF, SOC2, NISTCSF

### Remediation

#### Using Console

To remediate the "Auto Minor Version Upgrade flag Should Be Enabled" misconfiguration in AWS, follow these steps:

1. Log in to the AWS Management Console.
2. Navigate to the RDS dashboard.
3. Click on the "DB instances" tab.
4. Select the RDS instance that needs to be remediated.
5. Click on the "Modify" button.
6. Scroll down to the "Backup" section.
7. Enable the "Auto minor version upgrade" option.
8. Click on the "Continue" button.
9. Review the changes and click on the "Modify DB instance" button to apply the changes.

Once the changes are applied, the RDS instance will automatically upgrade to the latest minor version during the maintenance window. This will ensure that the instance is running on the latest version, which includes bug fixes, security updates, and performance improvements.

#### Using CLI

To remediate the "Auto Minor Version Upgrade flag should be enabled" misconfiguration in AWS using AWS CLI, you can follow these steps:

1. Open the AWS CLI on your local machine or EC2 instance.

2. Run the following command to enable the Auto Minor Version Upgrade flag for all RDS instances in the default region:

```
aws rds modify-db-instance --auto-minor-version-upgrade --db-instance-identifier <your-db-instance-identifier>
```

Make sure to replace `<your-db-instance-identifier>` with the name of your RDS instance.

3. Verify that the Auto Minor Version Upgrade flag is enabled for your RDS instance by running the following command:

```
aws rds describe-db-instances --db-instance-identifier <your-db-instance-identifier> --query "DBInstances[].AutoMinorVersionUpgrade"
```

This command should return "true", indicating that the Auto Minor Version Upgrade flag is enabled.

4. Repeat steps 2 and 3 for all RDS instances in your AWS account to ensure that the misconfiguration is fully remediated.

Note: Enabling the Auto Minor Version Upgrade flag ensures that minor version upgrades are automatically applied to your RDS instances, which helps to keep your database up-to-date with the latest security patches and bug fixes.

#### Using Python

To remediate the "Auto Minor Version Upgrade flag should be enabled" misconfiguration in AWS using Python, you can follow these steps:

1. Import the necessary AWS SDK libraries for Python, such as `boto3` and `botocore`.

```python
import boto3
from botocore.exceptions import ClientError
```

2. Create a `boto3` client for Amazon RDS (Relational Database Service).

```python
rds = boto3.client('rds')
```

3. Use the `modify_db_instance` method to enable the auto minor version upgrade flag for your RDS instances.

```python
try:
    response = rds.modify_db_instance(
        DBInstanceIdentifier='your-db-instance-id',
        AutoMinorVersionUpgrade=True
    )
    print("Auto minor version upgrade flag is enabled for RDS instance: " + response['DBInstance']['DBInstanceIdentifier'])
except ClientError as e:
    print("Error enabling auto minor version upgrade flag: " + e.response['Error']['Message'])
```

4. Replace `your-db-instance-id` with the actual identifier of your RDS instance.

5. Run the Python script to enable the auto minor version upgrade flag for your RDS instance in AWS.

Note: You can also use AWS CLI to remediate this misconfiguration. The command to enable the auto minor version upgrade flag for an RDS instance is:

```
aws rds modify-db-instance --db-instance-identifier your-db-instance-id --auto-minor-version-upgrade
```

Replace `your-db-instance-id` with the actual identifier of your RDS instance.

### Additional Reading:

- [https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_UpgradeDBInstance.Upgrading.html](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_UpgradeDBInstance.Upgrading.html) 

