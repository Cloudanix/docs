--- 
slug: Find AWS Credentials
rule: Find AWS Credentials
title: Find AWS Credentials
sidebar_label: Find AWS Credentials
---
                   

### Event Information

#### Meaning

- The "Find AWS Credentials" event in a Kubernetes cluster indicates that a process or container within the cluster is attempting to search for AWS credentials.
- This event could be a potential security risk as it may indicate unauthorized access or an attempt to gain access to AWS resources.
- To investigate this event, you can use kubectl to check the logs of the relevant pods or containers to identify the process or application responsible for the event. For example, you can use the following command: `kubectl logs <pod_name>`.

#### Remediation

1. Bash script remediation:
   - Use the `grep` command to search for AWS credentials in the relevant files. For example, you can search for the pattern `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY` in files like `~/.aws/credentials` and `~/.aws/config`.
   - If any AWS credentials are found, remove or invalidate them using the `sed` command. For example, you can use `sed -i '/AWS_ACCESS_KEY_ID/d' ~/.aws/credentials` to delete the line containing the AWS access key ID.
   - Additionally, consider rotating the compromised AWS credentials and updating them with new ones.

2. Kubectl commands remediation:
   - Use the `kubectl exec` command to access the running container where the Python script is running. For example, `kubectl exec -it <pod-name> -c <container-name> -- /bin/bash`.
   - Once inside the container, search for the Python script file and open it using a text editor like `vi` or `nano`.
   - Remove or comment out any lines that contain the AWS credentials, and save the changes to the file.

3. Combined bash script and kubectl commands remediation:
   - Use the `kubectl cp` command to copy the Python script file from the container to your local machine. For example, `kubectl cp <pod-name>:<path-to-python-script> ./python_script.py`.
   - Use the bash script remediation steps mentioned above to search for and remove the AWS credentials from the copied Python script file on your local machine.
   - Once the changes are made, use the `kubectl cp` command again to copy the modified Python script file back to the container. For example, `kubectl cp ./python_script.py <pod-name>:<path-to-python-script>`.
   - Restart the container or the relevant deployment to ensure the modified Python script is used.

Remember to follow compliance standards and best practices while handling AWS credentials, such as rotating them regularly, using secure storage mechanisms like AWS Secrets Manager, and restricting access to the credentials.

 