---
slug: azure_audit_appservice_check_always_on_enabled
title: Enable Always On For App Services
sidebar_label: Enable Always On For App Services
---

### More Info:

Ensure that your Azure App Services web applications stay loaded all the time by enabling the Always On feature.

### Risk Level

Medium

### Address

Security

### Compliance Standards

CBP


<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to the Azure portal using your credentials.
2. Navigate to the App Services section. Here, you will see a list of all your App Services.
3. Click on the App Service for which you want to check the 'Always On' setting. This will open the App Service's dashboard.
4. In the left-hand menu, under the 'Settings' section, click on 'Configuration'. In the 'General' tab, look for the 'Always On' setting. If it is enabled, you will see it set to 'On'. If it is not, it will be set to 'Off'.

#### Using CLI

1. Install Azure CLI: Before you can use Azure CLI commands, you need to have Azure CLI installed on your system. You can download it from the official Microsoft Azure website. Once installed, open your command prompt or terminal.

2. Login to Azure: Use the following command to login to your Azure account. You will be redirected to the browser for login. Enter your credentials and login.
   ```
   az login
   ```
3. Select the subscription: If you have multiple subscriptions, select the one where your App Service is located. Replace 'my-subscription-id' with your actual subscription id.
   ```
   az account set --subscription 'my-subscription-id'
   ```
4. Check the Always On setting: Now, use the following command to check the Always On setting for your App Service. Replace 'my-resource-group' with the name of your resource group and 'my-app-service' with the name of your App Service.
   ```
   az webapp config show --resource-group 'my-resource-group' --name 'my-app-service' --query 'alwaysOn'
   ```
   If the output is 'true', then Always On is enabled for your App Service. If the output is 'false', then Always On is not enabled.

#### Using Python

1. Install Azure SDK: To interact with Azure services, you need to install Azure SDK in your Python environment. You can do this by using pip install command:
   
   ```
   pip install azure-mgmt-web
   ```

2. Import necessary modules and authenticate: Import the necessary modules and authenticate to your Azure account using Azure credentials. You can use Azure Service Principal for authentication.

   ```python
   from azure.common.credentials import ServicePrincipalCredentials
   from azure.mgmt.web import WebSiteManagementClient

   subscription_id = 'your-subscription-id'
   credentials = ServicePrincipalCredentials(
       client_id = 'your-app-id',
       secret = 'your-app-secret',
       tenant = 'your-tenant-id'
   )

   web_client = WebSiteManagementClient(credentials, subscription_id)
   ```

3. Get the list of App Services: Now, you can get the list of all App Services in your Azure account. You can do this by using the web_client object created in the previous step.

   ```python
   for item in web_client.web_apps.list():
       print(item.name)
   ```

4. Check the Always On setting: For each App Service, you can check the Always On setting. If the Always On setting is not enabled, it means there is a misconfiguration.

   ```python
   for item in web_client.web_apps.list():
       if not item.always_on:
           print(f"App Service {item.name} has Always On setting disabled.")
   ```
   
This script will print the names of all App Services that have the Always On setting disabled.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

Enabling Always On for App Services in Azure ensures that your web application is always running and responsive. Here are the steps to remediate this misconfiguration in Azure using the Azure console:

1. Log in to the Azure portal (https://portal.azure.com/).

2. Navigate to the App Service that needs to be remediated.

3. Click on the "Configuration" blade on the left-hand side of the screen.

4. Scroll down to the "General settings" section and locate the "Always On" setting.

5. Toggle the switch next to "Always On" to the "On" position.

6. Click "Save" to apply the changes.

7. Restart the App Service to ensure that the changes take effect.

Once you have completed these steps, your App Service will be configured to use Always On, ensuring that it is always running and responsive.

#### Using CLI

To remediate the misconfiguration "Enable Always On for App Services" in Azure using Azure CLI, you can follow these steps:

1. Open the Azure CLI command prompt.

2. Run the following command to set the resource group where the App Service is deployed:

```
az configure --defaults group=<resource-group-name>
```

3. Run the following command to enable Always On for the App Service:

```
az webapp config set --always-on true --name <app-service-name> --resource-group <resource-group-name>
```

4. Verify that Always On is enabled for the App Service by running the following command:

```
az webapp config show --name <app-service-name> --resource-group <resource-group-name> --query alwaysOn
```

This command should return a value of "true", indicating that Always On is enabled for the App Service.

By following these steps, you can remediate the misconfiguration "Enable Always On for App Services" in Azure using Azure CLI.

#### Using Python

To remediate the misconfiguration "Enable Always On For App Services" in Azure using Python, follow these steps:

1. Import the necessary libraries:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.web import WebSiteManagementClient
```

2. Authenticate with Azure using the DefaultAzureCredential:

```python
credential = DefaultAzureCredential()
```

3. Instantiate a WebSiteManagementClient object:

```python
subscription_id = '<your-subscription-id>'
resource_group_name = '<your-resource-group-name>'
webapp_name = '<your-webapp-name>'

client = WebSiteManagementClient(credential, subscription_id)
```

4. Get the current configuration of the web app:

```python
webapp = client.web_apps.get(resource_group_name, webapp_name)
```

5. Check if Always On is enabled:

```python
if webapp.always_on:
    print('Always On is already enabled.')
else:
    print('Always On is not enabled.')
```

6. If Always On is not enabled, update the configuration:

```python
webapp.always_on = True
client.web_apps.create_or_update(resource_group_name, webapp_name, webapp)
print('Always On has been enabled.')
```

The complete code to remediate the misconfiguration "Enable Always On For App Services" in Azure using Python would look like this:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.web import WebSiteManagementClient

credential = DefaultAzureCredential()

subscription_id = '<your-subscription-id>'
resource_group_name = '<your-resource-group-name>'
webapp_name = '<your-webapp-name>'

client = WebSiteManagementClient(credential, subscription_id)

webapp = client.web_apps.get(resource_group_name, webapp_name)

if webapp.always_on:
    print('Always On is already enabled.')
else:
    webapp.always_on = True
    client.web_apps.create_or_update(resource_group_name, webapp_name, webapp)
    print('Always On has been enabled.')
```



</Tab>
</Tabs>