### Remediation

#### Using Console

To remediate the misconfiguration of allowing only HTTPS traffic in Azure console, please follow the below steps:

1. Login to your Azure portal and select the virtual machine you want to remediate.
2. In the left-hand menu, select "Networking" and then select "Network Security Group".
3. In the Network Security Group page, select the "Inbound Security Rules" tab.
4. Locate the rule that allows HTTP traffic (port 80) and click on it to select it.
5. Click on the "Delete" button to remove the HTTP rule.
6. Click on the "Add" button to create a new inbound security rule.
7. In the "Add inbound security rule" page, configure the following settings:
  - Source: Any
  - Source port ranges: *
  - Destination: Any
  - Destination port ranges: 443
  - Protocol: TCP
  - Action: Allow
  - Priority: Choose a priority number that is higher than any existing rules.
  - Name: Give a name to the rule that indicates that it allows only HTTPS traffic.

8. Click on the "Add" button to create the new inbound security rule.
9. Verify that the new rule is listed in the "Inbound Security Rules" tab and that it has a higher priority than any other rule that allows HTTP traffic.

By following these steps, you have successfully remediated the misconfiguration of allowing only HTTPS traffic in Azure console.

#### Using CLI

To remediate the misconfiguration of allowing only HTTPS traffic in AZURE CLI, please follow the below steps:

1. Open the Azure CLI and connect to your Azure account.

2. Identify the name of the network security group (NSG) associated with the virtual machine that needs to be remediated.

3. Get the existing NSG rules by running the command: 

   `az network nsg rule list --nsg-name <nsg-name> --query '[].{Name:name}' --output table`

4. Identify the rule that allows HTTP traffic and note its name.

5. Delete the HTTP rule by running the command:

   `az network nsg rule delete --name <rule-name> --nsg-name <nsg-name>`

6. Create a new rule that only allows HTTPS traffic by running the command:

   `az network nsg rule create --name Allow-HTTPS --nsg-name <nsg-name> --priority 100 --protocol Tcp --destination-port-range 443 --access Allow --description "Allow HTTPS traffic"`

7. Verify that the new rule has been created by running the command:

   `az network nsg rule list --nsg-name <nsg-name> --query '[].{Name:name}' --output table`

8. Once the new rule has been created, test that only HTTPS traffic is allowed to the virtual machine.

By following these steps, you have successfully remediated the misconfiguration of allowing only HTTPS traffic in Azure CLI.

#### Using Python

To remediate the misconfiguration of allowing only HTTPS traffic in a cloud environment using Python, you can follow the below steps:

1. Identify the cloud environment where the misconfiguration exists (AWS, Azure, or GCP).
2. Use the cloud provider's Python SDK to access the security group or network security settings where the misconfiguration exists.
3. Identify the security group or network security setting that is allowing non-HTTPS traffic.
4. Update the security group or network security setting to allow only HTTPS traffic using the SDK's update function.
5. Test the updated security group or network security setting to ensure that only HTTPS traffic is allowed.

Here is an example of how to remediate the misconfiguration of allowing only HTTPS traffic in an AWS environment using Python:

```
import boto3

# Create an EC2 client
ec2 = boto3.client('ec2')

# Get the security group ID
sg_id = 'sg-1234567890'

# Update the security group to allow only HTTPS traffic
response = ec2.authorize_security_group_ingress(
    GroupId=sg_id,
    IpPermissions=[
        {
            'IpProtocol': 'tcp',
            'FromPort': 443,
            'ToPort': 443,
            'IpRanges': [
                {
                    'CidrIp': '0.0.0.0/0',
                    'Description': 'HTTPS traffic only'
                },
            ],
        },
    ],
)

# Print the response
print(response)
```

This code uses the AWS SDK for Python (Boto3) to update the security group with ID `sg-1234567890` to allow only HTTPS traffic on port 443. The `IpRanges` parameter restricts the traffic to `0.0.0.0/0`, meaning all IP addresses. You can customize this parameter to limit the traffic to specific IP addresses or ranges.

