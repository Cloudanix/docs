---
slug: azure_audit_appservice_latest_programming_language_used
title: App Service Not Using Latest Programming Language Version
sidebar_label: App Service Not Using Latest Programming Language Version
---

### More Info:

Ensure that all Microsoft Azure App Service web applications are using the latest available version of Programming Languages in order to take advantage of the latest security fixes, performance improvements, and new functionalities and features.

### Risk Level

Low

### Address

Security, Reliability, Performance

### Compliance Standards

CISAZURE, CBP



<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to the Azure portal: Navigate to the Azure portal (https://portal.azure.com/) and sign in with your Azure account credentials.

2. Navigate to App Services: From the left-hand menu, select "App Services". This will display a list of all the App Services that are currently running in your Azure environment.

3. Select the App Service: Click on the name of the App Service you want to check. This will open the App Service's dashboard.

4. Check the Programming Language Version: In the App Service dashboard, select the "Configuration" option from the left-hand menu. Then, under the "General settings" tab, look for the "Stack settings" section. Here, you can see the current programming language and its version. If the version is not the latest, it indicates a misconfiguration.

#### Using CLI

1. Install Azure CLI: Before you can start detecting misconfigurations, you need to have Azure CLI installed on your system. You can download it from the official Microsoft Azure website. Once installed, open your command prompt or terminal and type `az login` to log in to your Azure account.

2. List App Services: Use the following command to list all the App Services in your Azure account. This will give you a list of all the App Services along with their details.

    ```
    az webapp list --query "[].{Name:name, RG:resourceGroup, Location:location, State:state, DefaultHostName:defaultHostName}"
    ```

3. Check App Service Configuration: For each App Service, you can check its configuration using the following command. Replace `<app_name>` and `<resource_group>` with the name of your App Service and its resource group respectively.

    ```
    az webapp config show --name <app_name> --resource-group <resource_group>
    ```

4. Check Programming Language Version: In the output of the above command, look for the `phpVersion`, `pythonVersion`, or `netFrameworkVersion` fields (depending on the programming language used by your App Service). If these fields are not set to the latest version, it means your App Service is not using the latest programming language version.

#### Using Python

1. Install and import the necessary libraries: You will need to install and import the Azure SDK for Python. This can be done using pip:

```python
pip install azure-mgmt-web
```

Then, import the necessary libraries in your Python script:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.resource import ResourceManagementClient
from azure.mgmt.web import WebSiteManagementClient
```

2. Authenticate and initialize: Use the DefaultAzureCredential class to handle authentication. Then, initialize the WebSiteManagementClient which will be used to interact with the App Service:

```python
credential = DefaultAzureCredential()
subscription_id = 'your-subscription-id' # replace with your Azure Subscription ID
web_client = WebSiteManagementClient(credential, subscription_id)
```

3. List all App Services and their configurations: Use the web_client to list all App Services and their configurations. You can then check the programming language version for each App Service:

```python
for webapp in web_client.web_apps.list():
    config = web_client.web_apps.get_configuration(webapp.resource_group, webapp.name)
    print(f"App Service: {webapp.name}, Language Version: {config.net_framework_version}")
```

4. Detect misconfiguration: Now, you can add a condition to check if the programming language version is not the latest. If it's not, print a message indicating the misconfiguration:

```python
latest_version = 'v4.0' # replace with the latest version
for webapp in web_client.web_apps.list():
    config = web_client.web_apps.get_configuration(webapp.resource_group, webapp.name)
    if config.net_framework_version != latest_version:
        print(f"Misconfiguration detected: App Service {webapp.name} is not using the latest programming language version.")
```

Please replace 'net_framework_version' and 'v4.0' with the respective language and version you want to check. This script is for .NET framework.

</Tab>


<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the issue of an App Service not using the latest programming language version in AZURE, you can follow the below steps using the AZURE console:

1. Log in to the AZURE portal (https://portal.azure.com/).

2. Navigate to the App Service that needs to be updated.

3. Click on the "Configuration" option from the left-hand menu.

4. Scroll down to the "General settings" section and locate the "Stack settings" option.

5. Click on the "Stack settings" option and select the latest version of the programming language from the dropdown list.

6. Click on the "Save" button to apply the changes.

7. Restart the App Service to ensure that the changes take effect.

8. Verify that the App Service is now using the latest version of the programming language by checking the application logs.

By following these steps, you should be able to remediate the issue of an App Service not using the latest programming language version in AZURE.

#### Using CLI

To remediate the issue of App Service not using the latest programming language version on Azure using Azure CLI, you can follow the below steps:

1. Open the Azure CLI on your local machine or Azure Cloud Shell.

2. Run the following command to set the subscription where the App Service is located:

```
az account set --subscription <subscription_id>
```

3. Run the following command to list all the web apps in the subscription:

```
az webapp list --query "[].{name:name, runtimeStack:runtimeStack, stackVersion:stackVersion}" --output table
```

4. Identify the web app that has the outdated programming language version and note down its name.

5. Run the following command to update the web app's runtime stack version:

```
az webapp config set --name <app_name> --resource-group <resource_group_name> --linux-fx-version <runtime_stack>|<version>
```

Replace `<app_name>` with the name of the web app identified in step 4 and `<resource_group_name>` with the name of the resource group where the web app is located.

6. Replace `<runtime_stack>` with the name of the runtime stack that you want to use (e.g., "PHP", "Python", "Node", etc.) and `<version>` with the latest version of the runtime stack.

7. Run the following command to verify that the web app is now using the latest programming language version:

```
az webapp show --name <app_name> --resource-group <resource_group_name> --query "linuxFxVersion"
```

This will show the current runtime stack version of the web app.

By following these steps, you can remediate the issue of App Service not using the latest programming language version on Azure using Azure CLI.

#### Using Python

To remediate the issue of an App Service not using the latest programming language version for Python in Azure, you can follow these steps:

1. Log in to the Azure portal and navigate to the App Service that is using an outdated version of Python.

2. Click on the "Configuration" tab in the left-hand menu.

3. Scroll down to the "General settings" section and locate the "Python version" setting.

4. Check the current version of Python that is being used by the App Service.

5. If the current version is outdated, select the latest version of Python from the drop-down menu.

6. Click on the "Save" button to apply the changes.

7. Once the changes are saved, restart the App Service to ensure that the latest version of Python is being used.

8. To verify that the latest version of Python is being used, you can navigate to the "Advanced Tools" section in the left-hand menu and open the "Debug Console" tab.

9. In the Debug Console, navigate to the "site" directory and open the "wwwroot" folder.

10. Create a new file named "test.py" and add the following code:

```
import sys
print(sys.version)
```

11. Save the file and navigate to https://your_app_service_name.azurewebsites.net/test.py in a web browser.

12. The output should display the version of Python that is being used by the App Service. If the latest version is displayed, then the remediation process is complete.

### Additional Reading:

- [https://docs.microsoft.com/en-us/azure/app-service/web-sites-configure#general-settings](https://docs.microsoft.com/en-us/azure/app-service/web-sites-configure#general-settings) 


</Tab>
</Tabs>