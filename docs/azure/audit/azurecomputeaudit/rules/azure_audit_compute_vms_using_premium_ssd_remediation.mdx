

<Tabs><Tab title='Cause'>
### Check Cause

#### Using Console

1. Log in to the Azure portal: Navigate to the Azure portal by entering "https://portal.azure.com" in your web browser's address bar. Enter your Azure account credentials to log in.

2. Navigate to Virtual Machines: Once you're logged in, look for the "Virtual Machines" option in the left-hand menu. Click on it to view all the virtual machines associated with your Azure account.

3. Check Disk Type: Click on the name of the virtual machine you want to check. This will open the virtual machine's dashboard. In the dashboard, look for the "Disks" option in the left-hand menu and click on it. This will open a new page where you can see the type of disk used by the virtual machine.

4. Verify Disk Type: In the "Disks" page, look for the "Disk Type" field. If the value in this field is anything other than "Standard SSD", it means the virtual machine is not using a standard SSD.

#### Using CLI

1. Install Azure CLI: Before you can run any Azure CLI commands, you need to install the Azure CLI on your local machine. You can download it from the official Microsoft Azure website. Once installed, open your command prompt or terminal and type `az login` to log in to your Azure account.

2. List all the disks: After logging in, you can list all the disks in your subscription by running the following command: `az disk list --query "[].{name:name, sku:sku}" -o table`. This command will return a table that includes the name of each disk and its SKU.

3. Filter the disks: To filter the disks that are not using Standard SSD, you can modify the previous command to: `az disk list --query "[?sku.tier!='Standard'].{name:name, sku:sku}" -o table`. This command will return a table that includes the name of each disk that is not using Standard SSD and its SKU.

4. Analyze the output: The output of the previous command will help you identify the disks that are not using Standard SSD. If the SKU of a disk is not 'Standard', it means that the disk is not using Standard SSD.

#### Using Python

To check if Virtual Machines are using Standard SSD in Compute using Python scripts, you can follow these steps:

1. **Install Azure SDK for Python**: Azure SDK for Python is a set of libraries that allow you to work with Azure services like Azure Storage, Azure Compute, etc. You can install it using pip:
   ```python
   pip install azure
   ```

2. **Authenticate with Azure**: Before you can interact with Azure services, you need to authenticate. You can use Azure Identity library for this. Here is an example of how to authenticate using a service principal:
   ```python
   from azure.identity import ClientSecretCredential

   credential = ClientSecretCredential(
       tenant_id="<azure-tenant-id>",
       client_id="<azure-client-id>",
       client_secret="<azure-client-secret>"
   )
   ```

3. **Get a list of all VMs**: You can use Azure Compute Management client to get a list of all VMs in your subscription. Here is an example:
   ```python
   from azure.mgmt.compute import ComputeManagementClient

   compute_client = ComputeManagementClient(credential, "<azure-subscription-id>")
   vms = compute_client.virtual_machines.list_all()
   ```

4. **Check if VMs are using Standard SSD**: You can check the `storageProfile` of each VM to see if it's using Standard SSD. Here is an example:
   ```python
   for vm in vms:
       if vm.storage_profile.os_disk.disk_size_gb is not None and vm.storage_profile.os_disk.managed_disk.storage_account_type != "StandardSSD_LRS":
           print(f"VM {vm.name} is not using Standard SSD")
   ```
This script will print the names of all VMs that are not using Standard SSD.

</Tab>

<Tab title='Remediation'>
### Remediation

#### Using Console

To remediate the "Virtual Machines Should Use Standard SSD" misconfiguration in Azure using the Azure console, follow these steps:

1. Navigate to the Azure portal and log in with your credentials.
2. Click on the "Virtual machines" option in the left-hand menu.
3. Select the virtual machine that you want to remediate.
4. Click on "Disks" in the left-hand menu.
5. Select the disk that you want to update to use Standard SSD.
6. Click on "Change SKU" at the top of the page.
7. Select "Standard SSD" from the dropdown menu.
8. Click "Save" to apply the changes.

Once these steps have been completed, the virtual machine will be using Standard SSD and the misconfiguration will be remediated.

#### Using CLI

To remediate the misconfiguration "Virtual Machines Should Use Standard SSD" for Azure using Azure CLI, please follow the below steps:

Step 1: Open the Azure CLI in your terminal.

Step 2: Run the following command to list all the virtual machines in your subscription:

```
az vm list --query "[].{Name:name, OS:storageProfile.osDisk.name, DiskType:storageProfile.osDisk.managedDisk.storageAccountType}" --output table
```

This command will list all the virtual machines along with their OS disk name and disk type (whether it is using Standard HDD, Standard SSD or Premium SSD).

Step 3: Identify the virtual machines that are using Standard HDD or Premium SSD disks. These virtual machines need to be remediated to use Standard SSD disks.

Step 4: Run the following command to update the disk type of the identified virtual machine to Standard SSD:

```
az vm update --resource-group <resource-group-name> --name <vm-name> --set storageProfile.osDisk.managedDisk.storageAccountType=Standard_LRS
```

Make sure to replace `<resource-group-name>` with the name of the resource group where the virtual machine is located and `<vm-name>` with the name of the virtual machine that needs to be remediated.

Step 5: Verify that the disk type of the virtual machine has been updated to Standard SSD by running the following command:

```
az vm show --resource-group <resource-group-name> --name <vm-name> --query "storageProfile.osDisk.managedDisk.storageAccountType"
```

This command should return the value "Standard_LRS", indicating that the virtual machine is now using Standard SSD disks.

Step 6: Repeat steps 3-5 for all the virtual machines that are using Standard HDD or Premium SSD disks.

By following these steps, you can remediate the misconfiguration "Virtual Machines Should Use Standard SSD" for Azure using Azure CLI.

#### Using Python

To remediate the misconfiguration "Virtual Machines Should Use Standard SSD" for AZURE using Python, you can follow the below steps:

1. First, you need to identify the virtual machines that are not using standard SSD disks. You can achieve this by using the Azure Python SDK.

2. Install the Azure Python SDK by running the following command in your terminal: 

```
pip install azure-mgmt-compute
```

3. Once you have installed the SDK, you need to authenticate to your Azure account. You can do this by creating a Service Principal and providing the necessary credentials. 

4. After authentication, you need to create a compute client using the Azure Python SDK. You can do this by running the following code:

```python
from azure.common.credentials import ServicePrincipalCredentials
from azure.mgmt.compute import ComputeManagementClient

# Provide the necessary credentials
subscription_id = '<your-subscription-id>'
credentials = ServicePrincipalCredentials(
    client_id='<your-client-id>',
    secret='<your-client-secret>',
    tenant='<your-tenant-id>'
)

# Create a compute client
compute_client = ComputeManagementClient(
    credentials=credentials,
    subscription_id=subscription_id
)
```

5. Once you have created the compute client, you can use it to retrieve a list of virtual machines in your subscription. You can do this by running the following code:

```python
# Retrieve a list of virtual machines
vm_list = compute_client.virtual_machines.list_all()

# Loop through the virtual machines and check if they are using standard SSD disks
for vm in vm_list:
    for disk in vm.storage_profile.data_disks:
        if disk.managed_disk.storage_account_type != 'StandardSSD_LRS':
            # If the virtual machine is not using standard SSD disks, remediate it
            disk.managed_disk.storage_account_type = 'StandardSSD_LRS'
            compute_client.virtual_machines.create_or_update(
                resource_group_name=vm.id.split('/')[4],
                vm_name=vm.name,
                parameters=vm
            )
```

6. The above code loops through all the virtual machines in your subscription and checks if they are using standard SSD disks. If a virtual machine is not using standard SSD disks, it updates the disk to use standard SSD and saves the changes.

7. After running the above code, you can verify that all your virtual machines are using standard SSD disks by checking the storage account type of the disks associated with each virtual machine.

Note: Make sure to test this code in a non-production environment before running it in production.


</Tab>
</Tabs>