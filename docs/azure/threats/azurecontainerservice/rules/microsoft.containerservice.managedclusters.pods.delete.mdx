--- 
slug: Microsoft.ContainerService.managedClusters.pods.delete
eventname: Microsoft.ContainerService.managedClusters.pods.delete
title: Microsoft.ContainerService.managedClusters.pods.delete
sidebar_label: Microsoft.ContainerService.managedClusters.pods.delete
---
                       
### Event Information

- The Microsoft.ContainerService.managedClusters.pods.delete event in Azure for Azure Container Service indicates that a pod has been deleted within a managed cluster.
- This event signifies that a specific pod, which is the smallest deployable unit in a Kubernetes cluster, has been removed from the managed cluster.
- The event can be used to track and monitor pod deletion activities, allowing administrators to troubleshoot issues, audit changes, and ensure the desired state of the cluster.


### Examples

1. Unauthorized deletion of pods: If security is impacted with Microsoft.ContainerService.managedClusters.pods.delete in Azure for Azure Container Service, it could potentially allow unauthorized users or malicious actors to delete pods within the managed cluster. This could lead to disruption of services, data loss, or unauthorized access to sensitive information.

2. Denial of Service (DoS) attacks: Exploiting the Microsoft.ContainerService.managedClusters.pods.delete action could be used as part of a Denial of Service (DoS) attack. By continuously deleting pods, an attacker could overwhelm the cluster's resources and cause service degradation or complete unavailability.

3. Privilege escalation: If security is compromised with Microsoft.ContainerService.managedClusters.pods.delete, an attacker could potentially delete critical pods and gain unauthorized access to higher privileged resources within the cluster. This could lead to further compromise of the cluster, data breaches, or unauthorized control over other resources in the environment.

### Remediation

#### Using Console

To remediate the issues for Azure Container Service using the Azure console, you can follow these step-by-step instructions:

1. Enable Azure Security Center:
   - Go to the Azure portal and search for "Security Center" in the search bar.
   - Select "Security Center" from the results and click on it.
   - In the Security Center dashboard, click on "Pricing & settings" in the left menu.
   - Select the subscription and resource group where your Azure Container Service is located.
   - Click on "Apply to all resources" to enable Security Center for all resources in the selected subscription and resource group.
   - Click on "Save" to apply the changes.

2. Configure Network Security Groups (NSGs):
   - Go to the Azure portal and search for "Virtual machines" in the search bar.
   - Select "Virtual machines" from the results and click on it.
   - Select the virtual machine associated with your Azure Container Service.
   - In the virtual machine's settings, click on "Networking" in the left menu.
   - Under "Inbound port rules", review the existing rules and remove any unnecessary open ports.
   - Click on "Add inbound port rule" to add specific rules for required ports.
   - Configure the NSG rules based on the recommendations provided in the previous response.
   - Click on "Save" to apply the changes.

3. Implement Azure Monitor for Containers:
   - Go to the Azure portal and search for "Monitor" in the search bar.
   - Select "Monitor" from the results and click on it.
   - In the Monitor dashboard, click on "Containers" in the left menu.
   - Click on "Enable Azure Monitor for containers" to start the setup process.
   - Select the Azure Container Service you want to monitor and click on "Enable".
   - Wait for the deployment to complete and then click on "Go to Azure Monitor for containers".
   - Review the monitoring data and configure alerts, if necessary, based on the recommendations provided in the previous response.

These steps will help you remediate the issues related to Azure Container Service using the Azure console.

#### Using CLI

To remediate the issue with Azure Container Service using Azure CLI, you can follow these steps:

1. Upgrade the Azure Container Service: 
   - Use the `az aks upgrade` command to upgrade the Azure Kubernetes Service (AKS) cluster to the latest version.
   - Example: `az aks upgrade --name <aks-cluster-name> --resource-group <resource-group-name>`

2. Enable Azure Monitor for Containers:
   - Use the `az aks enable-addons` command to enable Azure Monitor for Containers on the AKS cluster.
   - Example: `az aks enable-addons --name <aks-cluster-name> --resource-group <resource-group-name> --addons monitoring`

3. Configure Log Analytics workspace:
   - Use the `az monitor log-analytics workspace create` command to create a Log Analytics workspace.
   - Example: `az monitor log-analytics workspace create --resource-group <resource-group-name> --workspace-name <workspace-name> --location <location>`

Note: Replace `<aks-cluster-name>`, `<resource-group-name>`, `<workspace-name>`, and `<location>` with the appropriate values specific to your environment.

#### Using Python

To remediate Azure Container Service issues using Python, you can use the Azure SDK for Python. Here are three examples of how you can remediate common issues:

1. Restart a Container Service Agent Node:
   - Use the `azure.mgmt.containerinstance` package to manage the Container Instances.
   - Get the resource group and container group details using the `ContainerInstanceManagementClient` class.
   - Use the `container_groups.restart` method to restart the specific container group.

   ```python
   from azure.mgmt.containerinstance import ContainerInstanceManagementClient
   from azure.common.credentials import ServicePrincipalCredentials

   # Authenticate using service principal credentials
   credentials = ServicePrincipalCredentials(client_id='<client_id>', secret='<client_secret>', tenant='<tenant_id>')

   # Create the Container Instance management client
   container_client = ContainerInstanceManagementClient(credentials, '<subscription_id>')

   # Restart a container group
   container_client.container_groups.restart('<resource_group_name>', '<container_group_name>')
   ```

2. Scale a Container Service Cluster:
   - Use the `azure.mgmt.containerinstance` package to manage the Container Instances.
   - Get the resource group and container group details using the `ContainerInstanceManagementClient` class.
   - Use the `container_groups.update` method to update the container group with the desired number of instances.

   ```python
   from azure.mgmt.containerinstance import ContainerInstanceManagementClient
   from azure.common.credentials import ServicePrincipalCredentials

   # Authenticate using service principal credentials
   credentials = ServicePrincipalCredentials(client_id='<client_id>', secret='<client_secret>', tenant='<tenant_id>')

   # Create the Container Instance management client
   container_client = ContainerInstanceManagementClient(credentials, '<subscription_id>')

   # Scale a container group
   container_client.container_groups.update('<resource_group_name>', '<container_group_name>', {'containers': [], 'os_type': 'Linux', 'restart_policy': 'Always', 'instance_count': 5})
   ```

3. Update Container Service Agent Node Configuration:
   - Use the `azure.mgmt.containerinstance` package to manage the Container Instances.
   - Get the resource group and container group details using the `ContainerInstanceManagementClient` class.
   - Use the `container_groups.update` method to update the container group with the desired configuration.

   ```python
   from azure.mgmt.containerinstance import ContainerInstanceManagementClient
   from azure.common.credentials import ServicePrincipalCredentials

   # Authenticate using service principal credentials
   credentials = ServicePrincipalCredentials(client_id='<client_id>', secret='<client_secret>', tenant='<tenant_id>')

   # Create the Container Instance management client
   container_client = ContainerInstanceManagementClient(credentials, '<subscription_id>')

   # Update container group configuration
   container_client.container_groups.update('<resource_group_name>', '<container_group_name>', {'containers': [], 'os_type': 'Linux', 'restart_policy': 'Always', 'dns_config': {'name_servers': ['8.8.8.8'], 'search_domains': ['example.com']}})
   ```


 