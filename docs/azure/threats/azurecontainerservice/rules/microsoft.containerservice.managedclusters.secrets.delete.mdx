--- 
slug: Microsoft.ContainerService.managedClusters.secrets.delete
eventname: Microsoft.ContainerService.managedClusters.secrets.delete
title: Microsoft.ContainerService.managedClusters.secrets.delete
sidebar_label: Microsoft.ContainerService.managedClusters.secrets.delete
---
                       
### Event Information

#### Meaning

- The Microsoft.ContainerService.managedClusters.secrets.delete event in Azure Container Service indicates that a secret associated with a managed cluster in Azure has been deleted.
- This event typically occurs when a user or an automated process deletes a secret that was previously stored and managed within the Azure Container Service.
- It is important to monitor and track these events to ensure the security and integrity of the secrets used by the managed clusters in Azure Container Service.

#### Example

1. Example of security impact: If an unauthorized user gains access to the Microsoft.ContainerService.managedClusters.secrets.delete event in Azure Container Service, they can potentially delete secrets that are used for authentication and authorization within the cluster. This can lead to unauthorized access to sensitive resources and compromise the security of the containerized applications running in the cluster.

Remediation:
- Regularly review and audit the access control policies for the Azure Container Service to ensure that only authorized users have the necessary permissions to manage secrets.
- Implement multi-factor authentication (MFA) for all user accounts accessing the Azure Container Service to prevent unauthorized access.
- Enable Azure Monitor and Azure Security Center to monitor and detect any suspicious activities related to secret deletion events. 

Example CLI command to enable Azure Monitor for Azure Container Service:
```
az monitor diagnostic-settings create --name <diagnostic-settings-name> --resource <container-service-resource-id> --resource-type Microsoft.ContainerService/managedClusters --logs '[{"category": "kube-audit", "enabled": true}]'
```

2. Example of security impact: If the Microsoft.ContainerService.managedClusters.secrets.delete event is triggered by a malicious insider, they can delete critical secrets used for authentication and authorization within the Azure Container Service. This can result in unauthorized access to sensitive data and resources, leading to potential data breaches or service disruptions.

Remediation:
- Implement strict access controls and role-based access control (RBAC) policies to ensure that only authorized users have the necessary permissions to delete secrets within the Azure Container Service.
- Regularly rotate and update secrets to minimize the impact of potential unauthorized access.
- Enable Azure Active Directory (Azure AD) integration for authentication and authorization within the Azure Container Service to add an additional layer of security.

Example CLI command to enable Azure AD integration for Azure Container Service:
```
az aks update -n <aks-cluster-name> -g <resource-group-name> --aad-client-app-id <aad-client-app-id> --aad-server-app-id <aad-server-app-id> --aad-server-app-secret <aad-server-app-secret>
```

3. Example of security impact: If the Microsoft.ContainerService.managedClusters.secrets.delete event is triggered due to a misconfiguration or vulnerability in the Azure Container Service, an attacker can exploit this to delete secrets and gain unauthorized access to sensitive data or resources. This can lead to data breaches, service disruptions, or unauthorized modifications to the containerized applications running in the cluster.

Remediation:
- Regularly update and patch the Azure Container Service to ensure that any known vulnerabilities or misconfigurations are addressed.
- Implement network security groups (NSGs) and virtual network service endpoints to restrict access to the Azure Container Service and prevent unauthorized deletion of secrets.
- Enable Azure Key Vault integration to securely store and manage secrets, reducing the risk of unauthorized deletion or access.

Example CLI command to enable Azure Key Vault integration for Azure Container Service:
```
az aks update -n <aks-cluster-name> -g <resource-group-name> --enable-pod-identity --pod-identity-resource-group <key-vault-resource-group> --pod-identity-client-id <key-vault-client-id> --pod-identity-object-id <key-vault-object-id>
```


 