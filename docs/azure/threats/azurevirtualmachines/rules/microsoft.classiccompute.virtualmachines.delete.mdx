--- 
slug: Microsoft.ClassicCompute.virtualMachines.delete
eventname: Microsoft.ClassicCompute.virtualMachines.delete
title: Microsoft.ClassicCompute.virtualMachines.delete
sidebar_label: Microsoft.ClassicCompute.virtualMachines.delete
---
                       
### Event Information

1. The Microsoft.ClassicCompute.virtualMachines.delete event in Azure signifies the deletion of a virtual machine (VM) in the Classic deployment model.
2. This event indicates that a VM, which was provisioned using the Classic deployment model, has been permanently removed from the Azure environment.
3. It is important to note that this event is specific to the Classic deployment model and does not apply to VMs created using the newer Azure Resource Manager (ARM) model.


### Examples

1. Unauthorized deletion of virtual machines: If security is impacted with Microsoft.ClassicCompute.virtualMachines.delete in Azure for AzureVirtualMachines, it could potentially lead to unauthorized deletion of virtual machines. This can result in loss of critical data, disruption of services, and potential financial loss for the organization.

2. Data breaches and exposure: If an attacker gains access to the Microsoft.ClassicCompute.virtualMachines.delete operation, they can potentially delete virtual machines containing sensitive data. This can lead to data breaches and exposure of confidential information, violating compliance regulations and damaging the organization's reputation.

3. Disruption of business continuity: Deleting virtual machines without proper authorization can disrupt business continuity by causing downtime and service interruptions. This can impact productivity, customer satisfaction, and revenue generation for the organization. It may take significant time and effort to recover from such incidents and restore services to normal operation.

### Remediation

#### Using Console

To remediate unauthorized deletion of virtual machines in Azure using the Azure console, follow these steps:

1. Implement RBAC (Role-Based Access Control): Ensure that proper access controls are in place to limit the permissions of users and prevent unauthorized individuals from deleting virtual machines. Assign roles with the necessary permissions to only trusted individuals or groups.

2. Enable Azure Resource Locks: Utilize Azure Resource Locks to prevent accidental or unauthorized deletion of virtual machines. Resource Locks can be applied at the resource group or individual resource level, and can prevent any modifications or deletions until explicitly removed.

3. Enable Azure Backup and Recovery Services: Regularly backup your virtual machines using Azure Backup and Recovery Services. This will allow you to restore deleted virtual machines in case of accidental or unauthorized deletion. Ensure that backups are stored in a separate location to protect against data loss.

By implementing RBAC, enabling Azure Resource Locks, and utilizing Azure Backup and Recovery Services, you can mitigate the risk of unauthorized deletion of virtual machines in Azure and protect your data, services, and availability.

#### Using CLI

1. Unauthorized deletion of virtual machines:
- Monitor and analyze Azure Activity Logs and Azure Monitor metrics to detect any unauthorized deletion activities.
- Implement RBAC (Role-Based Access Control) to ensure that only authorized individuals have the necessary permissions to delete virtual machines.
- Enable Azure Resource Locks to prevent accidental or unauthorized deletion of critical virtual machines.

2. Data exposure:
- Implement Azure Backup to regularly backup virtual machines and their data to a separate storage account or region.
- Enable Azure Disk Encryption to encrypt the data at rest within the virtual machines.
- Implement network security groups and firewalls to restrict access to virtual machines and prevent unauthorized access.

3. Service availability:
- Implement Azure Availability Sets or Azure Virtual Machine Scale Sets to ensure high availability and fault tolerance for critical virtual machines.
- Enable Azure Site Recovery to replicate virtual machines to a secondary region for disaster recovery purposes.
- Regularly test and validate the disaster recovery plan to ensure that critical virtual machines can be quickly restored in case of deletion or service disruption.

#### Using Python

1. Unauthorized deletion of virtual machines:
- Implement RBAC (Role-Based Access Control) to ensure that only authorized individuals have the necessary permissions to delete virtual machines.
- Enable Azure AD (Active Directory) authentication for virtual machine management, which adds an extra layer of security and prevents unauthorized access.

2. Data exposure:
- Regularly backup virtual machines and store the backups in a separate location or storage account to mitigate the risk of data loss in case of deletion.
- Implement Azure Security Center and enable threat detection to identify any suspicious activities or potential data exposure incidents.

3. Service availability:
- Implement Azure Resource Manager (ARM) templates to define and deploy virtual machines, ensuring that critical virtual machines are not accidentally deleted.
- Enable Azure Monitor and set up alerts to notify administrators in case of any deletion attempts or unusual activities related to virtual machines.

Python script example for Azure Virtual Machines deletion prevention:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.compute import ComputeManagementClient

# Authenticate using DefaultAzureCredential
credential = DefaultAzureCredential()

# Specify your Azure subscription ID
subscription_id = 'your_subscription_id'

# Specify the resource group and virtual machine name
resource_group_name = 'your_resource_group_name'
virtual_machine_name = 'your_virtual_machine_name'

# Create a ComputeManagementClient instance
compute_client = ComputeManagementClient(credential, subscription_id)

# Get the virtual machine details
virtual_machine = compute_client.virtual_machines.get(resource_group_name, virtual_machine_name)

# Check if the virtual machine deletion is allowed
if 'Microsoft.ClassicCompute.virtualMachines.delete' in virtual_machine.identity.permissions:
    print("Deletion of virtual machine is allowed.")
else:
    print("Deletion of virtual machine is not allowed.")
```

This script uses the Azure SDK for Python to authenticate with Azure using DefaultAzureCredential and checks if the specified virtual machine has the necessary permission for deletion.


 