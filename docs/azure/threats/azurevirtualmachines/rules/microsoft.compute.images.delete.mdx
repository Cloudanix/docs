--- 
slug: Microsoft.Compute.images.delete
eventname: Microsoft.Compute.images.delete
title: Microsoft.Compute.images.delete
sidebar_label: Microsoft.Compute.images.delete
---
                       
### Event Information

#### Meaning

- The Microsoft.Compute.images.delete event in AzureRealTime for AzureVirtualMachines refers to the deletion of a custom image in Azure.
- This event indicates that a custom image, which is a reusable template for creating virtual machines, has been deleted from the Azure environment.
- Deleting a custom image removes it from the image gallery and prevents it from being used to create new virtual machines.

#### Example

1. Example of security impact: If an unauthorized user gains access to the Microsoft.Compute.images.delete event in Azure, they could potentially delete critical images used for Azure Virtual Machines. This could lead to service disruption, data loss, or unauthorized access to sensitive information.

Remediation:
- Implement strict access controls: Ensure that only authorized users have permissions to delete images. Use Azure RBAC (Role-Based Access Control) to assign appropriate roles and permissions to users.
- Enable Azure Monitor: Set up Azure Monitor to track and log all image deletion events. This will help in identifying any unauthorized or suspicious activities.
- Regular backups: Take regular backups of critical images to ensure that they can be restored in case of accidental or malicious deletion. Use Azure Backup or Azure Site Recovery for automated backups and recovery.

Azure CLI command for RBAC assignment:
```
az role assignment create --assignee <user or group principal ID> --role "Virtual Machine Image Contributor" --scope /subscriptions/<subscription ID>/resourceGroups/<resource group name>/providers/Microsoft.Compute/images/<image name>
```

Azure CLI command for enabling Azure Monitor:
```
az monitor diagnostic-settings create --name <diagnostic settings name> --resource <resource ID of the virtual machine> --logs '[{"category": "DeleteImage", "enabled": true}]'
```

2. Example of security impact: If a malicious user gains access to the Microsoft.Compute.images.delete event in Azure, they could delete critical images used for Azure Virtual Machines as part of a larger attack. This could result in service disruption, data loss, or unauthorized access to sensitive information.

Remediation:
- Implement multi-factor authentication (MFA): Enforce MFA for all user accounts to add an extra layer of security and prevent unauthorized access to the Azure portal or APIs.
- Regularly review and audit permissions: Conduct regular reviews of user permissions and remove any unnecessary or excessive access. Use Azure AD Privileged Identity Management (PIM) to manage and monitor privileged access.
- Enable Azure Resource Locks: Apply resource locks to critical images to prevent accidental or unauthorized deletion. This will add an extra layer of protection and require explicit actions to remove the lock before deletion.

Azure CLI command for enabling MFA:
```
az ad user update --id <user principal ID> --force-change-password-next-login true
```

Azure CLI command for applying resource lock:
```
az lock create --name <lock name> --resource <resource ID of the image> --lock-type CanNotDelete
```

3. Example of security impact: If a misconfigured access control policy allows unauthorized users to trigger the Microsoft.Compute.images.delete event in Azure, they could delete critical images used for Azure Virtual Machines. This could lead to service disruption, data loss, or unauthorized access to sensitive information.

Remediation:
- Regularly review and update access control policies: Ensure that access control policies are properly configured and regularly reviewed to prevent unauthorized access. Use Azure Policy to enforce and monitor compliance with security policies.
- Implement network security groups (NSGs): Use NSGs to restrict network traffic to only authorized sources and destinations. This will help prevent unauthorized access to the Azure portal or APIs.
- Enable Azure Security Center: Enable Azure Security Center to get recommendations and alerts for potential security issues related to access control policies and configurations.

Azure CLI command for configuring NSG rules:
```
az network nsg rule create --name <rule name> --nsg-name <NSG name> --resource-group <resource group name> --priority <priority number> --source-address-prefix <source IP range> --destination-address-prefix <destination IP range> --destination-port-range <destination port range> --access <allow or deny>
```

Azure CLI command for enabling Azure Security Center:
```
az security pricing create --name <pricing tier> --resource-group <resource group name> --tier <free or standard>
```


 