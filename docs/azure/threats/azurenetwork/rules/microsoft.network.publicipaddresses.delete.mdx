--- 
slug: Microsoft.Network.publicIPAddresses.delete
eventname: Microsoft.Network.publicIPAddresses.delete
title: Microsoft.Network.publicIPAddresses.delete
sidebar_label: Microsoft.Network.publicIPAddresses.delete
---
                       
### Event Information

1. The Microsoft.Network.publicIPAddresses.delete event in Azure for AzureNetwork indicates that a public IP address associated with a network resource in Azure is being deleted.
2. This event signifies the removal of a public IP address from a specific network resource, such as a virtual machine or a load balancer, within the Azure Network.
3. The deletion of a public IP address can impact the accessibility and connectivity of the associated network resource, as it will no longer have a public IP assigned to it.


### Examples

1. Unauthorized deletion: If security is impacted with Microsoft.Network.publicIPAddresses.delete in Azure for AzureNetwork, it could potentially lead to unauthorized deletion of public IP addresses. This can result in disruption of network connectivity for resources relying on those IP addresses, leading to potential service outages or unauthorized access to resources.

2. IP address hijacking: Another security impact could be IP address hijacking. If an attacker gains access to delete public IP addresses in AzureNetwork, they can potentially take over the IP addresses and redirect traffic to malicious destinations. This can lead to data breaches, unauthorized access to resources, or even denial of service attacks.

3. Network misconfiguration: Deleting public IP addresses without proper planning and coordination can also result in network misconfiguration. This can lead to connectivity issues, routing problems, or unintended exposure of resources to the internet. It is important to follow proper change management processes and ensure that all dependencies and implications are considered before deleting public IP addresses in AzureNetwork.

### Remediation

#### Using Console

To remediate unauthorized deletion, IP address hijacking, and Denial of Service (DoS) attacks in Azure for AzureNetwork, you can follow these step-by-step instructions:

1. Implement RBAC for AzureNetwork:
   - Access the Azure portal and navigate to the AzureNetwork resource.
   - Go to the "Access control (IAM)" tab.
   - Click on the "+ Add" button to add a new role assignment.
   - Select the appropriate role (e.g., Network Contributor) for authorized personnel who should have the permission to delete public IP addresses.
   - Specify the user, group, or service principal that should be assigned the role.
   - Click on the "Save" button to apply the RBAC settings.

2. Enable auditing and monitoring:
   - Access the Azure portal and navigate to the AzureNetwork resource.
   - Go to the "Monitoring" tab.
   - Enable diagnostic settings to capture logs and metrics related to public IP address deletion.
   - Configure the logs to be sent to a storage account or Azure Monitor workspace for analysis.
   - Set up alerts or notifications to be triggered when unauthorized deletion attempts are detected.

3. Regularly review and analyze logs:
   - Access the storage account or Azure Monitor workspace where the logs are stored.
   - Review the logs periodically to identify any suspicious activities or unauthorized deletion attempts.
   - Investigate any anomalies or alerts triggered by the monitoring system.
   - Take appropriate actions, such as blocking the attacker's IP address, revoking access permissions, or restoring deleted IP addresses if necessary.

By following these steps, you can mitigate the security impacts of unauthorized deletion, IP address hijacking, and DoS attacks in Azure for AzureNetwork.

#### Using CLI

To remediate unauthorized deletion, IP address hijacking, and Denial of Service (DoS) attacks in Azure for AzureNetwork, you can follow these steps using Azure CLI commands:

1. Implement RBAC for access control:
   - Use the `az role assignment create` command to assign the appropriate roles to authorized personnel who should have the permission to delete public IP addresses.
   - For example, you can assign the "Contributor" role to a specific user or group:
     ```
     az role assignment create --assignee <user or group principal ID> --role Contributor --scope /subscriptions/<subscription ID>/resourceGroups/<resource group name>/providers/Microsoft.Network/publicIPAddresses/<public IP address name>
     ```

2. Enable monitoring and auditing:
   - Use the `az monitor diagnostic-settings create` command to enable diagnostic settings for the AzureNetwork resource.
   - Specify the appropriate storage account and diagnostic settings to capture logs related to public IP address deletions.
   - For example:
     ```
     az monitor diagnostic-settings create --name <diagnostic settings name> --resource /subscriptions/<subscription ID>/resourceGroups/<resource group name>/providers/Microsoft.Network/virtualNetworks/<virtual network name> --logs '[{"category": "NetworkSecurityGroupEvent", "enabled": true}]' --storage-account <storage account ID>
     ```

3. Regularly review logs and take appropriate actions:
   - Use the `az monitor activity-log list` command to retrieve the activity logs related to public IP address deletions.
   - Analyze the logs for any unauthorized deletion attempts or suspicious activities.
   - If any unauthorized deletion is detected, investigate the incident and take necessary actions, such as revoking access or escalating the issue to the appropriate security team.

By implementing RBAC, enabling monitoring, and regularly reviewing logs, you can mitigate the risks associated with unauthorized deletion, IP address hijacking, and DoS attacks in Azure for AzureNetwork.

#### Using Python

To remediate unauthorized deletion, IP address hijacking, and Denial of Service (DoS) attacks in Azure for AzureNetwork, you can use the following Python scripts:

1. Implement RBAC for access control:
```python
from azure.mgmt.authorization import AuthorizationManagementClient
from azure.common.credentials import ServicePrincipalCredentials

# Authenticate using service principal credentials
credentials = ServicePrincipalCredentials(client_id='<client_id>', secret='<client_secret>', tenant='<tenant_id>')

# Create an instance of the AuthorizationManagementClient
authorization_client = AuthorizationManagementClient(credentials, '<subscription_id>')

# Define the role assignment parameters
role_assignment_params = {
    'role_definition_id': '/subscriptions/<subscription_id>/providers/Microsoft.Authorization/roleDefinitions/<role_definition_id>',
    'principal_id': '<principal_id>',
    'scope': '/subscriptions/<subscription_id>/resourceGroups/<resource_group>/providers/Microsoft.Network/virtualNetworks/<virtual_network>/subnets/<subnet>'
}

# Create the role assignment
authorization_client.role_assignments.create('<scope>', '<role_assignment_name>', role_assignment_params)
```

2. Implement network resource monitoring and auditing:
```python
from azure.mgmt.monitor import MonitorManagementClient
from azure.common.credentials import ServicePrincipalCredentials

# Authenticate using service principal credentials
credentials = ServicePrincipalCredentials(client_id='<client_id>', secret='<client_secret>', tenant='<tenant_id>')

# Create an instance of the MonitorManagementClient
monitor_client = MonitorManagementClient(credentials, '<subscription_id>')

# Define the monitoring query parameters
monitoring_query_params = {
    'query': "AzureNetwork | where ResourceGroup == '<resource_group>' | where OperationName == 'Microsoft.Network/publicIPAddresses/delete' | where ResultType == 'Failed'",
    'timespan': '<timespan>',
    'interval': '<interval>'
}

# Execute the monitoring query
monitor_client.metrics.list('<resource_uri>', monitoring_query_params)
```

These scripts demonstrate how to implement RBAC for access control and how to monitor network resources for unauthorized deletion attempts. You will need to replace the placeholders with the actual values specific to your Azure environment.


 