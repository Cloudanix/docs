--- 
slug: Microsoft.Network.networkSecurityGroups.delete
eventname: Microsoft.Network.networkSecurityGroups.delete
title: Microsoft.Network.networkSecurityGroups.delete
sidebar_label: Microsoft.Network.networkSecurityGroups.delete
---
                       
### Event Information

1. The Microsoft.Network.networkSecurityGroups.delete event in Azure for AzureNetwork indicates that a network security group (NSG) has been deleted within the specified Azure network.

2. This event signifies that the NSG rules and configurations associated with the deleted NSG will no longer be enforced, potentially impacting the network traffic and security within the Azure network.

3. It is important to review the reason for the deletion and ensure that it was intentional, as accidental deletion of an NSG can lead to unintended network vulnerabilities. Additionally, any dependencies or references to the deleted NSG should be updated to avoid any disruptions in network connectivity or security policies.


### Examples

1. Unauthorized access: Deleting a network security group (NSG) without proper authorization can potentially lead to unauthorized access to resources within the Azure network. This can result in data breaches, unauthorized modifications, or even complete compromise of the network.

2. Network disruptions: Deleting an NSG without proper planning and coordination can cause network disruptions. NSGs are used to control inbound and outbound traffic to subnets, virtual machines, or network interfaces. Removing an NSG without considering the impact on network traffic can lead to service interruptions or loss of connectivity.

3. Compliance violations: Deleting an NSG without following proper change management processes can result in compliance violations. Many industries have specific regulations and standards that require strict control over network security configurations. Removing an NSG without proper documentation and approval can lead to non-compliance and potential penalties.

### Remediation

#### Using Console

To remediate unauthorized access, network disruptions, and compliance violations related to deleting a network security group (NSG) in Azure, follow these step-by-step instructions:

1. Authorization and Access Control:
   - Implement role-based access control (RBAC) to ensure that only authorized users have permissions to delete NSGs.
   - Regularly review and update RBAC assignments to ensure that access is granted based on the principle of least privilege.
   - Enable Azure Active Directory (AAD) authentication for additional security and control over user access.

2. Network Planning and Coordination:
   - Before deleting an NSG, thoroughly analyze its impact on network traffic and connectivity.
   - Identify all resources and services that rely on the NSG and assess the potential disruptions.
   - Coordinate with relevant teams or stakeholders to plan the deletion during a maintenance window or low-traffic period to minimize disruptions.

3. Change Management and Compliance:
   - Establish a formal change management process that includes documentation, approval, and tracking of NSG deletions.
   - Ensure that compliance requirements, such as industry-specific regulations or standards like PCI DSS or HIPAA, are considered during the change management process.
   - Maintain a comprehensive audit trail of NSG deletions, including the reason, date, and individuals involved, to demonstrate compliance and facilitate incident response if needed.

By following these steps, you can mitigate the risks associated with unauthorized access, network disruptions, and compliance violations when deleting an NSG in Azure.

#### Using CLI

To remediate unauthorized access, network disruptions, and compliance violations related to deleting a network security group (NSG) in Azure, you can follow these steps using Azure CLI:

1. Unauthorized access:
   - Identify the NSG that was deleted without proper authorization using Azure Activity Logs or Azure Monitor.
   - Restore the deleted NSG from a backup or recreate it with the correct configurations.
   - Implement RBAC (Role-Based Access Control) to ensure only authorized users have permissions to delete NSGs.

2. Network disruptions:
   - Before deleting an NSG, analyze its impact on network traffic and identify any dependencies.
   - Create a backup of the NSG rules and configurations.
   - Notify all relevant stakeholders about the planned NSG deletion and schedule a maintenance window to minimize disruptions.
   - During the maintenance window, delete the NSG and monitor the network for any issues.
   - If disruptions occur, revert to the backup or recreate the NSG with the original configurations.

3. Compliance violations:
   - Establish a change management process that includes documentation, approval, and validation for NSG modifications.
   - Ensure that all NSG deletions are properly documented, including the reason, date, and responsible party.
   - Regularly audit NSG configurations to identify any unauthorized changes and take appropriate actions.
   - Implement continuous compliance monitoring using Azure Policy or third-party tools to detect and prevent non-compliant NSG deletions.

Azure CLI commands for recreating an NSG (assuming you have the necessary permissions):

1. Get the details of the deleted NSG:
   ```
   az network nsg show --name <nsg_name> --resource-group <resource_group_name>
   ```

2. Recreate the NSG with the same configurations:
   ```
   az network nsg create --name <new_nsg_name> --resource-group <resource_group_name> --location <location>
   ```

3. Restore the NSG rules from a backup or recreate them manually:
   ```
   az network nsg rule create --name <rule_name> --nsg-name <new_nsg_name> --resource-group <resource_group_name> --priority <priority> --protocol <protocol> --source-address-prefix <source_address_prefix> --destination-address-prefix <destination_address_prefix> --access <access> --direction <direction> --destination-port-range <destination_port_range>
   ```

Note: Replace `<nsg_name>`, `<resource_group_name>`, `<location>`, `<new_nsg_name>`, `<rule_name>`, `<priority>`, `<protocol>`, `<source_address_prefix>`, `<destination_address_prefix>`, `<access>`, `<direction>`, and `<destination_port_range>` with the appropriate values for your environment.

#### Using Python

To remediate unauthorized access, network disruptions, and compliance violations related to deleting a network security group (NSG) in Azure, you can follow these steps:

1. Implement proper access controls: Ensure that only authorized individuals have permissions to delete NSGs. Use Azure RBAC (Role-Based Access Control) to assign appropriate roles and permissions to users. Regularly review and update access controls to prevent unauthorized access.

2. Implement change management processes: Establish a formal change management process that includes documentation, approval, and testing before making any changes to NSGs. This ensures that all changes are properly authorized, planned, and coordinated to minimize the risk of network disruptions and compliance violations.

3. Implement monitoring and auditing: Enable Azure Monitor and Azure Security Center to monitor and audit NSG activities. This allows you to track any unauthorized access attempts, network disruptions, or compliance violations. Set up alerts and notifications to promptly detect and respond to any suspicious activities.

Here's an example of a Python script using the Azure SDK for Python (azure-mgmt-network) to delete an NSG:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.network import NetworkManagementClient

# Authenticate using default credentials
credential = DefaultAzureCredential()

# Specify your Azure subscription ID and resource group name
subscription_id = 'your_subscription_id'
resource_group_name = 'your_resource_group_name'

# Specify the name of the NSG to delete
nsg_name = 'your_nsg_name'

# Create the NetworkManagementClient
network_client = NetworkManagementClient(credential, subscription_id)

# Delete the NSG
network_client.network_security_groups.begin_delete(resource_group_name, nsg_name)
```

Note: Make sure to install the required Python packages (`azure-identity` and `azure-mgmt-network`) before running the script.


 