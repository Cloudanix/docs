--- 
slug: Microsoft.Network.networkSecurityGroups.delete
eventname: Microsoft.Network.networkSecurityGroups.delete
title: Microsoft.Network.networkSecurityGroups.delete
sidebar_label: Microsoft.Network.networkSecurityGroups.delete
---
                       
### Event Information

#### Meaning

- The Microsoft.Network.networkSecurityGroups.delete event in Azure signifies the deletion of a network security group (NSG) in the Azure Network.
- This event indicates that a specific NSG, which is a virtual firewall for controlling inbound and outbound traffic to Azure resources, has been removed from the Azure Network.
- The event can be used to track changes and monitor the lifecycle of NSGs within the Azure environment, providing visibility into security group management activities.

### Remediation

#### Using Console

- Example: If security is impacted with Microsoft.Network.networkSecurityGroups.delete in Azure for AzureNetwork, it means that a network security group (NSG) is being deleted, which can potentially leave the AzureNetwork exposed to unauthorized access or malicious activities.

- Remediation steps using the Azure portal:
  1. Log in to the Azure portal (https://portal.azure.com) using your credentials.
  2. Navigate to the AzureNetwork resource that is impacted by the deletion of the NSG.
  3. Click on the "Networking" tab in the left-hand menu.
  4. In the "Settings" section, click on "Network security groups".
  5. Check if the deleted NSG is still associated with the AzureNetwork. If it is, proceed to the next step.
  6. Click on the NSG that was deleted and select "Associate".
  7. Choose the appropriate NSG from the list or create a new NSG to associate with the AzureNetwork.
  8. Save the changes and ensure that the AzureNetwork is now associated with the correct NSG for security.

Note: It is important to regularly review and monitor the security configurations of AzureNetworks and NSGs to prevent any unauthorized changes or deletions. Additionally, implementing RBAC (Role-Based Access Control) and auditing mechanisms can help detect and mitigate security incidents.

#### Using CLI

1. Impact of Microsoft.Network.networkSecurityGroups.delete on AzureNetwork security:
   - Deleting a network security group (NSG) in Azure can impact the security of the associated AzureNetwork. NSGs are used to control inbound and outbound traffic to subnets or network interfaces within a virtual network. Deleting an NSG without proper planning or consideration can potentially expose resources within the AzureNetwork to unauthorized access or compromise the network's security posture.

2. Remediation of AzureNetwork security after Microsoft.Network.networkSecurityGroups.delete:
   - To remediate the security impact caused by deleting a network security group (NSG) in AzureNetwork, you can follow these steps using the Azure CLI:

     1. Identify the affected AzureNetwork: 
        ```
        az network vnet show --name <AzureNetworkName> --resource-group <ResourceGroupName>
        ```

     2. Determine the NSG that was deleted:
        ```
        az network vnet subnet show --name <SubnetName> --vnet-name <AzureNetworkName> --resource-group <ResourceGroupName> --query 'networkSecurityGroup.id'
        ```

     3. Retrieve the NSG details from Azure backup or configuration management tools.
     
     4. Recreate the NSG with the same rules and associations:
        ```
        az network nsg create --name <NSGName> --resource-group <ResourceGroupName> --location <Location>
        az network vnet subnet update --name <SubnetName> --vnet-name <AzureNetworkName> --resource-group <ResourceGroupName> --network-security-group <NSGName>
        ```

     5. Validate the NSG and AzureNetwork security configuration.

3. Additional considerations:
   - It is important to have proper backup and configuration management practices in place to ensure the ability to recover from accidental deletions or security incidents.
   - Regularly review and audit NSG configurations to identify any potential security gaps or misconfigurations.
   - Implement RBAC (Role-Based Access Control) to restrict the deletion of critical resources like NSGs to authorized personnel only.

#### Using Python

1. Example of security impact with Microsoft.Network.networkSecurityGroups.delete in Azure for Azure Network:
   - When the `Microsoft.Network.networkSecurityGroups.delete` operation is performed on an Azure Network, it can lead to the accidental deletion of a network security group (NSG) associated with the network. This can result in the loss of security rules and configurations defined within the NSG, potentially exposing the network to unauthorized access or compromising network traffic filtering.

2. Remediation for Azure Network security impact using Python:
   - To remediate the security impact caused by the accidental deletion of an NSG in Azure Network, you can use the Azure SDK for Python (azure-mgmt-network) to automate the process of recreating the NSG and restoring the necessary security rules. Here's an example Python script:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.network import NetworkManagementClient

# Authenticate using default credentials
credential = DefaultAzureCredential()

# Specify your Azure subscription ID and resource group name
subscription_id = 'your_subscription_id'
resource_group_name = 'your_resource_group_name'

# Specify the details of the deleted NSG
nsg_name = 'your_deleted_nsg_name'
location = 'your_nsg_location'

# Create the Network Management Client
network_client = NetworkManagementClient(credential, subscription_id)

# Create a new NSG with the same name and location
nsg_params = {
    'location': location
}
network_client.network_security_groups.begin_create_or_update(resource_group_name, nsg_name, nsg_params).result()

# Restore the necessary security rules for the NSG
# Add your code here to retrieve and recreate the security rules

print("NSG has been recreated and security rules have been restored.")
```

Please note that you need to install the required Python packages (`azure-identity`, `azure-mgmt-network`) before running the script. Also, make sure to replace the placeholders (`your_subscription_id`, `your_resource_group_name`, `your_deleted_nsg_name`, `your_nsg_location`) with the actual values specific to your Azure environment.


 