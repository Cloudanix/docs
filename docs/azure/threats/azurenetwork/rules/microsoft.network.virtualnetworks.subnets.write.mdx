--- 
slug: Microsoft.Network.virtualNetworks.subnets.write
eventname: Microsoft.Network.virtualNetworks.subnets.write
title: Microsoft.Network.virtualNetworks.subnets.write
sidebar_label: Microsoft.Network.virtualNetworks.subnets.write
---
                       
### Event Information

#### Meaning

- The Microsoft.Network.virtualNetworks.subnets.write event in AzureNetwork refers to a write operation performed on a subnet within a virtual network in Azure.
- This event indicates that a change or modification has been made to the properties or configuration of a subnet, such as its IP address range, network security group association, or route table association.
- It is important to monitor this event as it can help track any changes made to subnets, ensuring proper network management and security within the Azure environment.

#### Example

1. Example of how security can be impacted with Microsoft.Network.virtualNetworks.subnets.write event in Azure:

- An unauthorized user gains access to the Azure portal or API and modifies the virtual network configuration, specifically the subnets. They may add or remove subnets, change the IP ranges, or modify the network security group rules associated with the subnets. This can lead to unauthorized access to resources within the affected subnets or potential exposure of sensitive data.

Remediation:
- Enable Azure Active Directory (Azure AD) authentication for the Azure portal and API to ensure that only authorized users can access and modify the virtual network configuration.
- Implement role-based access control (RBAC) to restrict the permissions of users and ensure that only necessary individuals have write access to the virtual network and its subnets.
- Regularly monitor and review the Azure Activity Log and Azure Security Center alerts to detect any unauthorized modifications to the virtual network configuration.

Example CLI command to enable Azure AD authentication for the Azure portal:
```
az ad sp create-for-rbac --name "MyApp" --role contributor --scopes /subscriptions/{subscription-id}/resourceGroups/{resource-group-name}
```

Example CLI command to assign RBAC role to a user or group for a virtual network:
```
az role assignment create --assignee {user-or-group-id} --role "Virtual Network Contributor" --scope /subscriptions/{subscription-id}/resourceGroups/{resource-group-name}/providers/Microsoft.Network/virtualNetworks/{virtual-network-name}
```

2. Example of how security can be impacted with Microsoft.Network.virtualNetworks.subnets.write event in Azure:

- A misconfiguration or error in an automated deployment script or infrastructure-as-code (IaC) template results in unintended changes to the virtual network subnets. This can lead to connectivity issues, exposure of resources to unauthorized networks, or disruption of network traffic.

Remediation:
- Implement a robust testing and validation process for automated deployment scripts and IaC templates to catch any potential misconfigurations before they are applied to the production environment.
- Utilize Azure Resource Manager (ARM) templates with parameterization to ensure that the subnet configurations are consistent across different environments and deployments.
- Regularly review and audit the changes made to the virtual network subnets using Azure Activity Log and Azure Security Center to quickly identify and remediate any unauthorized or unintended modifications.

Example CLI command to deploy an ARM template with parameterization:
```
az deployment group create --resource-group {resource-group-name} --template-file {template-file-path} --parameters {parameters-file-path}
```

3. Example of how security can be impacted with Microsoft.Network.virtualNetworks.subnets.write event in Azure:

- A malicious insider with elevated privileges intentionally modifies the virtual network subnets to bypass network security controls or gain unauthorized access to resources. They may create hidden subnets, modify routing tables, or change network security group rules to enable lateral movement or exfiltration of data.

Remediation:
- Implement the principle of least privilege (PoLP) by regularly reviewing and adjusting the permissions and roles assigned to users and service principals within the Azure environment.
- Enable Azure Monitor and Azure Sentinel to detect and alert on any suspicious activities or modifications made to the virtual network subnets.
- Implement network segmentation and micro-segmentation strategies to limit the impact of any unauthorized modifications to a smaller portion of the network and prevent lateral movement.

Example CLI command to enable Azure Monitor for a virtual network:
```
az monitor diagnostic-settings create --name {diagnostic-settings-name} --resource {virtual-network-id} --logs '[{"category": "NetworkSecurityGroupEvent", "enabled": true}]'
```


 