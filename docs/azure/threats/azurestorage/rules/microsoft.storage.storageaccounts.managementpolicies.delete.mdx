--- 
slug: Microsoft.Storage.storageAccounts.managementPolicies.delete
eventname: Microsoft.Storage.storageAccounts.managementPolicies.delete
title: Microsoft.Storage.storageAccounts.managementPolicies.delete
sidebar_label: Microsoft.Storage.storageAccounts.managementPolicies.delete
---
                       
### Event Information

#### Meaning

1. The Microsoft.Storage.storageAccounts.managementPolicies.delete event in AzureStorage refers to the deletion of a management policy for a storage account in Azure.

2. This event indicates that a user or an automated process has removed a management policy that was previously configured for a storage account.

3. The management policies in AzureStorage allow users to define rules for automatically managing the lifecycle of their storage data, such as deleting or moving files after a certain period of time. The delete event signifies the removal of one such policy.

### Remediation

#### Using Console

- The security impact of Microsoft.Storage.storageAccounts.managementPolicies.delete in Azure for Azure Storage is that it allows the deletion of management policies for storage accounts. This can potentially lead to the loss of important data management configurations and increase the risk of unauthorized access or data breaches.

To remediate this security impact for Azure Storage using the Azure console, you can follow these step-by-step instructions:

1. Sign in to the Azure portal (https://portal.azure.com) using your Azure account credentials.
2. Navigate to the Azure Storage account for which you want to remediate the security impact.
3. In the left-hand menu, under the "Settings" section, click on "Configuration".
4. In the "Configuration" blade, scroll down to the "Management policies" section.
5. Click on the "Add policy" button to create a new management policy for the storage account.
6. Configure the desired management policy settings according to your requirements. Ensure that the policy is set to retain the necessary data management configurations and prevent accidental deletion.
7. Click on the "Save" button to apply the new management policy to the Azure Storage account.
8. Review the updated management policies to ensure that the Microsoft.Storage.storageAccounts.managementPolicies.delete action is not allowed or restricted.
9. Regularly monitor and review the management policies for any changes or unauthorized modifications.

By following these steps, you can remediate the security impact of Microsoft.Storage.storageAccounts.managementPolicies.delete in Azure for Azure Storage and ensure the protection of your data management configurations.

#### Using CLI

1. Impact on Security: The Microsoft.Storage.storageAccounts.managementPolicies.delete action in Azure for Azure Storage allows the deletion of management policies for storage accounts. If this action is misused or unauthorized, it can potentially lead to the deletion of important management policies, impacting the security and governance of Azure Storage.

2. Remediation using Azure CLI: To remediate this security impact and ensure the proper management of Azure Storage, you can use the Azure CLI to implement the necessary controls. Here are the CLI commands to remediate this issue:

   - First, you need to identify the affected storage account:
     ```
     az storage account show --name <storage_account_name> --resource-group <resource_group_name>
     ```

   - Once you have identified the storage account, you can set the appropriate management policies using the `az storage account management-policy create` command. For example, to create a management policy that retains snapshots for 30 days, you can use the following command:
     ```
     az storage account management-policy create --account-name <storage_account_name> --resource-group <resource_group_name> --policy "@policy.json"
     ```

     Note: Replace `<storage_account_name>` and `<resource_group_name>` with the actual names of your storage account and resource group. Also, make sure to provide the necessary policy configuration in the `policy.json` file.

   - Finally, you can verify that the management policy has been successfully applied using the `az storage account management-policy show` command:
     ```
     az storage account management-policy show --account-name <storage_account_name> --resource-group <resource_group_name>
     ```

     This command will display the details of the management policy for the specified storage account.

By following these steps and using the provided Azure CLI commands, you can remediate the security impact of the Microsoft.Storage.storageAccounts.managementPolicies.delete action in Azure for Azure Storage and ensure the proper management of your storage accounts.

#### Using Python

1. Impact on Security: The Microsoft.Storage.storageAccounts.managementPolicies.delete action in Azure for Azure Storage allows the deletion of management policies for storage accounts. If this action is misused or unauthorized, it can lead to the removal of important security configurations and policies, potentially compromising the security of the Azure Storage resources.

2. Remediation for Azure Storage using Python: To remediate this security impact in Azure Storage using Python, you can utilize the Azure SDK for Python (azure-storage-blob) to implement the necessary controls and prevent unauthorized deletion of management policies. Here's an example Python script:

```python
from azure.storage.blob import BlobServiceClient, BlobSasPermissions, generate_blob_sas

# Define your Azure Storage account connection string
connection_string = "<your_connection_string>"

# Define the name of the storage account and container
storage_account_name = "<your_storage_account_name>"
container_name = "<your_container_name>"

# Create a BlobServiceClient instance
blob_service_client = BlobServiceClient.from_connection_string(connection_string)

# Get the container client
container_client = blob_service_client.get_container_client(container_name)

# Generate a Shared Access Signature (SAS) token with appropriate permissions
sas_token = generate_blob_sas(
    account_name=storage_account_name,
    container_name=container_name,
    permission=BlobSasPermissions(read=True, write=True, delete=False),
    expiry=datetime.utcnow() + timedelta(hours=1),  # Adjust the expiry time as per your requirements
)

# Use the SAS token to create a new BlobServiceClient instance with restricted permissions
restricted_blob_service_client = BlobServiceClient.from_container_url(
    container_client.url, credential=sas_token
)

# Now you can perform operations on the container using the restricted_blob_service_client
# For example, you can list blobs in the container
blobs = restricted_blob_service_client.list_blobs()
for blob in blobs:
    print(blob.name)
```

This script demonstrates how to generate a SAS token with read and write permissions but without delete permission. By using this restricted token, you can ensure that the management policies for Azure Storage accounts cannot be deleted, mitigating the security impact of the Microsoft.Storage.storageAccounts.managementPolicies.delete action.


 