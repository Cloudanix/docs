--- 
slug: Microsoft.Storage.storageAccounts.blobServices.containers.immutabilityPolicies.delete
eventname: Microsoft.Storage.storageAccounts.blobServices.containers.immutabilityPolicies.delete
title: Microsoft.Storage.storageAccounts.blobServices.containers.immutabilityPolicies.delete
sidebar_label: Microsoft.Storage.storageAccounts.blobServices.containers.immutabilityPolicies.delete
---
                       
### Event Information

1. The "Microsoft.Storage.storageAccounts.blobServices.containers.immutabilityPolicies.delete" event in Azure for Azure Storage refers to the deletion of an immutability policy associated with a container in Azure Blob Storage.

2. This event indicates that the immutability policy, which enforces data immutability and prevents modification or deletion of data within the container for a specified retention period, has been removed.

3. It is important to monitor this event as it can impact data governance and compliance requirements, especially in scenarios where data immutability is crucial, such as regulatory compliance or data protection against ransomware attacks.


### Examples

1. Unauthorized deletion: If security is impacted with the "delete" action for immutability policies in Azure Storage, it could potentially allow unauthorized individuals or malicious actors to delete immutable data containers. This could result in the loss of critical data or the ability to tamper with data integrity.

2. Data retention compliance: Immutability policies in Azure Storage are often used to enforce data retention compliance requirements, such as those mandated by regulatory standards like GDPR or HIPAA. If the "delete" action is compromised, it could lead to non-compliance with these regulations and potential legal consequences for the organization.

3. Data recovery and disaster resilience: Immutability policies are also crucial for data recovery and disaster resilience. By preventing the deletion of immutable data containers, organizations can ensure that critical data remains intact and recoverable in the event of accidental deletions, data corruption, or ransomware attacks. If the "delete" action is impacted, it could undermine the organization's ability to recover from such incidents effectively.

### Remediation

#### Using Console

To remediate unauthorized deletion, data tampering, and compliance violations related to the "delete" action for immutability policies in Azure Storage, you can follow these step-by-step instructions using the Azure console:

1. Enable Soft Delete: Soft Delete is a feature in Azure Storage that allows you to recover deleted data within a specified retention period. By enabling Soft Delete, you can mitigate the risk of unauthorized deletion and data tampering.

   - Open the Azure portal and navigate to your Azure Storage account.
   - Select the specific storage account where you want to enable Soft Delete.
   - In the left-hand menu, under the "Blob service" section, click on "Data protection".
   - Under the "Soft delete" tab, toggle the switch to enable Soft Delete.
   - Set the desired retention period for deleted data. This retention period should align with your compliance requirements.
   - Click on "Save" to apply the changes.

2. Implement Access Controls: To prevent unauthorized individuals from performing the "delete" action on immutability policies, you should ensure proper access controls are in place.

   - In the Azure portal, navigate to your Azure Storage account.
   - Select the specific storage account where you want to configure access controls.
   - In the left-hand menu, under the "Settings" section, click on "Access control (IAM)".
   - Review and manage the existing roles assigned to users and groups.
   - Assign appropriate roles with the necessary permissions to authorized individuals or groups.
   - Remove any unnecessary or excessive permissions that could potentially lead to unauthorized deletion.
   - Regularly review and update access controls as needed.

3. Monitor and Audit: Implementing monitoring and auditing mechanisms will help you detect and respond to any unauthorized deletion attempts or compliance violations.

   - In the Azure portal, navigate to your Azure Storage account.
   - Select the specific storage account where you want to configure monitoring and auditing.
   - In the left-hand menu, under the "Monitoring" section, click on "Activity log".
   - Configure activity log settings to capture relevant events related to immutability policies and deletions.
   - Set up alerts or notifications to receive real-time notifications for any suspicious activities.
   - Regularly review the activity log and investigate any anomalies or potential security incidents.

By following these steps, you can remediate unauthorized deletion, data tampering, and compliance violations related to the "delete" action for immutability policies in Azure Storage.

#### Using CLI

1. Unauthorized deletion: To remediate unauthorized deletion of immutable data containers in Azure Storage, you can implement the following steps using Azure CLI commands:

- Enable soft delete: Soft delete allows you to recover deleted data within a specified retention period. You can enable soft delete for a storage account by running the following command:
  ```
  az storage account update --name <storage_account_name> --resource-group <resource_group_name> --enable-soft-delete true
  ```

- Configure RBAC permissions: Ensure that only authorized individuals have the necessary permissions to delete data containers. You can assign appropriate RBAC roles to users or groups using the following command:
  ```
  az role assignment create --role <role_name> --assignee <user_or_group_id> --scope /subscriptions/<subscription_id>/resourceGroups/<resource_group_name>/providers/Microsoft.Storage/storageAccounts/<storage_account_name>
  ```

2. Data tampering: To mitigate the risk of data tampering through the "delete" action for immutability policies in Azure Storage, you can take the following steps:

- Enable versioning: By enabling versioning for your storage account, you can retain multiple versions of an object, including deleted versions. This helps in preserving the integrity of data and allows you to recover from accidental or malicious deletions. You can enable versioning using the following command:
  ```
  az storage account blob-service-properties update --name <storage_account_name> --resource-group <resource_group_name> --enable-versioning true
  ```

- Implement access controls: Ensure that only authorized users have the necessary permissions to delete containers or objects within containers. Implementing proper access controls and RBAC permissions will help prevent unauthorized modifications or deletions. Refer to the previous command for assigning RBAC roles.

3. Compliance violations: To avoid compliance violations related to the "delete" action for immutability policies in Azure Storage, consider the following steps:

- Implement retention policies: Configure retention policies for your data containers to enforce the required retention period. This ensures that data cannot be deleted until the retention period expires. You can set a retention policy using the following command:
  ```
  az storage container immutability-policy create --account-name <storage_account_name> --account-key <storage_account_key> --container-name <container_name> --immutability-period <duration>
  ```

- Monitor and audit: Regularly monitor and audit the activities related to data deletion in Azure Storage. Utilize Azure Monitor or other monitoring tools to track and analyze events, ensuring compliance with regulatory requirements.

#### Using Python

To remediate unauthorized deletion, data tampering, and compliance violations in Azure Storage using Python scripts, you can utilize the Azure Storage SDK for Python. Here are the steps you can follow:

1. Unauthorized deletion:
   - Implement role-based access control (RBAC) to restrict access to the delete action for immutability policies. Only authorized individuals or roles should have the permission to delete containers.
   - Use the Azure Storage SDK for Python to programmatically manage access control. You can create a script that assigns appropriate RBAC roles to users or service principals, ensuring that only authorized entities can perform the delete action.

2. Data tampering:
   - Enable versioning for your Azure Storage account. This allows you to maintain multiple versions of an object, preventing data loss due to deletion.
   - Implement monitoring and alerting for any delete actions performed on containers or objects. You can use Azure Monitor or Azure Event Grid to capture delete events and trigger notifications or automated actions.
   - Regularly back up your data to a separate storage account or an offline backup solution. This ensures that even if data is tampered with, you have a reliable copy to restore from.

3. Compliance violations:
   - Implement retention policies for your Azure Storage account. This enforces the immutability of data for a specific period of time, preventing unauthorized deletion.
   - Use Azure Policy to enforce compliance requirements. You can create a policy that checks for the presence of immutability policies on storage accounts and alerts or takes action if they are missing.
   - Regularly audit and review access control settings, retention policies, and compliance requirements to ensure ongoing compliance with industry regulations.

Please note that the provided steps are high-level guidelines, and you may need to adapt them based on your specific requirements and environment.


 