--- 
slug: Add user
eventname: Add user
title: Add user
sidebar_label: Add user
---
                       
### Event Information

#### Meaning

- The "Add user" event in Azure Active Directory refers to the action of creating a new user account within the Azure AD tenant.
- This event signifies the addition of a new user to the Azure AD directory, allowing them to authenticate and access resources within the Azure environment.
- The "Add user" event can be triggered through various methods, such as using the Azure portal, Azure AD PowerShell module, or Azure AD Graph API.

### Remediation

#### Using Console

- Example: If security is impacted when adding a user in Azure Active Directory, it could be due to granting excessive permissions or not following the principle of least privilege. For instance, if a user is mistakenly assigned administrative privileges, it can lead to unauthorized access and potential security breaches.

To remediate this issue in Azure Active Directory using the Azure portal console, follow these step-by-step instructions:

1. Sign in to the Azure portal (https://portal.azure.com) using your Azure AD administrator account.
2. Navigate to the Azure Active Directory service by clicking on "Azure Active Directory" in the left-hand menu.
3. In the Azure Active Directory blade, select "Users" from the left-hand menu.
4. Locate the user that needs to be remediated and click on their name to open the user details page.
5. In the user details page, click on the "Directory role" tab.
6. Review the assigned roles and ensure that the user has the appropriate role(s) based on their responsibilities.
7. If the user has been assigned an excessive role, click on the "Remove" button next to the role to revoke it.
8. To assign the user a more appropriate role, click on the "Add assignment" button and select the desired role from the list.
9. Follow the prompts to complete the role assignment, ensuring that the user is granted the necessary permissions without compromising security.
10. Once the role assignment is updated, review and validate the changes to ensure that the user's access is aligned with the principle of least privilege.

By following these steps, you can remediate security issues related to adding users in Azure Active Directory and ensure that the appropriate permissions are granted to users while maintaining a secure environment.

#### Using CLI

1. Example of security impact: If security is impacted when adding a user in Azure Active Directory (Azure AD), it could mean that the user is granted excessive permissions or has access to sensitive resources without proper authorization. This can lead to potential data breaches, unauthorized access, or privilege escalation.

2. Remediation for Azure Active Directory using Azure CLI:
   - Step 1: Identify the user that needs to be added to Azure AD.
   - Step 2: Ensure that the user is granted the appropriate permissions and access levels based on the principle of least privilege.
   - Step 3: Use the Azure CLI to add the user to Azure AD by executing the following command:
     ```
     az ad user create --display-name <user-display-name> --password <user-password> --user-principal-name <user-principal-name> --force-change-password-next-login true
     ```
     Replace `<user-display-name>`, `<user-password>`, and `<user-principal-name>` with the actual values for the user being added.

Note: It is important to regularly review and audit user permissions in Azure AD to ensure security is maintained and any unnecessary access is revoked.

#### Using Python

1. Example of security impact: If security is impacted when adding a user in Azure Active Directory, it could mean that the user is granted excessive permissions or has access to sensitive resources without proper authorization. This can lead to unauthorized access, data breaches, or privilege escalation attacks.

2. Remediation for Azure Active Directory using Python:
   - Use the Azure SDK for Python (azure-identity and azure-graphrbac) to programmatically manage users in Azure Active Directory.
   - Before adding a user, ensure that the user's permissions are properly scoped and aligned with the principle of least privilege.
   - Implement role-based access control (RBAC) to assign appropriate roles and permissions to users, limiting their access to only what is necessary for their job function.

Python script example for adding a user in Azure Active Directory:

```python
from azure.identity import DefaultAzureCredential
from azure.graphrbac import GraphRbacManagementClient

# Authenticate using default credentials
credential = DefaultAzureCredential()

# Create a GraphRbacManagementClient instance
graph_client = GraphRbacManagementClient(credential, "<your-tenant-id>")

# Define user properties
user_display_name = "John Doe"
user_principal_name = "john.doe@example.com"
user_password = "P@ssw0rd123"

# Create the user
user = graph_client.users.create({
    "accountEnabled": True,
    "displayName": user_display_name,
    "mailNickname": user_principal_name.split("@")[0],
    "userPrincipalName": user_principal_name,
    "passwordProfile": {
        "password": user_password,
        "forceChangePasswordNextSignIn": False
    }
})

print("User created successfully:", user.user_principal_name)
```

Note: Replace `<your-tenant-id>` with your Azure AD tenant ID. Make sure you have the necessary permissions to manage users in Azure AD.


 