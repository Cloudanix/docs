--- 
slug: Hard Delete group
eventname: Hard Delete group
title: Hard Delete group
sidebar_label: Hard Delete group
---
                       
### Event Information

- The Hard Delete group event in Azure Active Directory refers to the permanent removal of a group from the directory.
- When this event occurs, all associated resources and permissions linked to the group are also permanently deleted.
- This event is irreversible and should be used with caution, as it can result in data loss and impact user access and permissions within the Azure AD environment.


### Examples

1. Loss of data recovery: When the Hard Delete option is enabled for Azure Active Directory (AAD) groups, it permanently deletes the group and all associated data without any possibility of recovery. This can be a security concern if important data or configurations are accidentally deleted, as there is no way to retrieve them.

2. Increased risk of unauthorized access: Hard deleting AAD groups can potentially lead to an increased risk of unauthorized access. For example, if a group containing privileged users or sensitive resources is accidentally hard deleted, it may result in unauthorized individuals gaining access to those resources, compromising security.

3. Impact on audit trails and compliance: Hard deleting AAD groups can impact audit trails and compliance requirements. When a group is hard deleted, all associated logs, access history, and permissions are permanently removed. This can make it difficult to track and investigate security incidents, as well as meet compliance standards that require maintaining detailed audit trails.

### Remediation

#### Using Console

To remediate the loss of data recovery, increased risk of unauthorized access, and impact on audit trails and compliance when hard deleting Azure Active Directory (AAD) groups in Azure using the Azure console, you can follow these step-by-step instructions:

1. Disable the Hard Delete option for AAD groups:
   - Sign in to the Azure portal (https://portal.azure.com) with your Azure account.
   - Navigate to the Azure Active Directory service.
   - Select "Groups" from the left-hand menu.
   - Find the group for which you want to disable Hard Delete and click on it.
   - In the group settings, go to the "Properties" tab.
   - Under "Delete", toggle the "Hard Delete" option to the off position.
   - Click "Save" to apply the changes.

2. Implement data recovery measures:
   - Enable Azure Active Directory's "Soft Delete" feature for groups. This allows deleted groups to be recoverable within a specified retention period.
   - Configure a backup and recovery solution for Azure Active Directory, such as Azure Backup or a third-party solution, to ensure that important data and configurations are regularly backed up and can be restored if needed.

3. Enhance security and access controls:
   - Regularly review and audit the permissions and access levels of AAD groups to ensure that only authorized users have access to sensitive resources.
   - Implement multi-factor authentication (MFA) for privileged users and enforce strong password policies to reduce the risk of unauthorized access.

By following these steps, you can mitigate the risks associated with hard deleting AAD groups in Azure and ensure data recovery, minimize unauthorized access, and maintain compliance with audit trail requirements.

#### Using CLI

1. To remediate the loss of data recovery in Azure Active Directory (AAD) groups when the Hard Delete option is enabled, you can implement the following steps:

- Disable the Hard Delete option for AAD groups to prevent accidental permanent deletion of important data and configurations.
- Regularly back up AAD groups and their associated data to a separate storage location or service, such as Azure Blob Storage or Azure Backup.
- Implement a data recovery process that includes regular testing and validation to ensure the ability to restore deleted AAD groups and their data if needed.

CLI command to disable Hard Delete option for AAD groups:
```
az ad group update --group-id <group-id> --set deletionPolicy=SoftDelete
```

2. To mitigate the increased risk of unauthorized access due to hard deleting AAD groups, you can take the following actions:

- Implement strict access controls and permissions management to ensure that only authorized individuals have the ability to hard delete AAD groups.
- Regularly review and audit AAD group memberships and permissions to identify any unauthorized changes or access.
- Enable multi-factor authentication (MFA) for privileged users to add an extra layer of security and reduce the risk of unauthorized access.

3. To address the impact on audit trails and compliance caused by hard deleting AAD groups, consider the following steps:

- Implement a centralized logging and monitoring solution, such as Azure Monitor or Azure Sentinel, to capture and retain detailed logs of AAD group activities.
- Regularly export and store AAD group logs in a secure and compliant manner to ensure they are available for auditing and compliance purposes.
- Implement a process to review and analyze AAD group logs to detect any suspicious activities or security incidents, even if the groups have been hard deleted.

CLI command to export AAD group logs:
```
az monitor activity-log list --resource-group <resource-group-name> --resource-type Microsoft.DirectoryServices/directoryServices --query "[?category=='Administrative' && operationName=='Microsoft.DirectoryServices/directoryServices/delete']"
```

#### Using Python

1. To remediate the loss of data recovery in Azure Active Directory (AAD) groups when the Hard Delete option is enabled, it is recommended to implement a backup and recovery strategy. This can involve regularly exporting and backing up the AAD group data using Azure PowerShell or Azure CLI scripts. These scripts can be scheduled to run at specific intervals and store the exported data in a secure location, such as Azure Blob Storage or an on-premises backup solution. In the event of accidental deletion, the backed-up data can be used to restore the AAD group and associated data.

2. To mitigate the increased risk of unauthorized access resulting from hard deleting AAD groups, it is important to implement proper access controls and permissions management. This can involve regularly reviewing and auditing the group memberships and permissions assigned to AAD groups. Additionally, enabling multi-factor authentication (MFA) for privileged users and implementing just-in-time (JIT) access controls can further reduce the risk of unauthorized access. Regular security assessments and penetration testing can also help identify and address any vulnerabilities in the access control mechanisms.

3. To address the impact on audit trails and compliance requirements caused by hard deleting AAD groups, it is recommended to implement a centralized logging and monitoring solution. This can involve configuring Azure Monitor or Azure Sentinel to collect and analyze logs related to AAD group activities. By retaining and analyzing these logs, it becomes possible to track and investigate security incidents, as well as meet compliance standards. Additionally, implementing a change management process that includes proper documentation and approval workflows for AAD group modifications can help maintain a clear audit trail and ensure compliance.


 