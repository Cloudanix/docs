--- 
slug: Microsoft.Web.serverfarms.Delete
eventname: Microsoft.Web.serverfarms.Delete
title: Microsoft.Web.serverfarms.Delete
sidebar_label: Microsoft.Web.serverfarms.Delete
---
                       
### Event Information

- The Microsoft.Web.serverfarms.Delete event in Azure for AzureWebService indicates that a server farm (also known as an App Service plan) has been deleted.
- This event signifies the removal of the infrastructure that hosts the web applications within the server farm.
- It is important to note that deleting a server farm will also delete all the web apps associated with it, so caution should be exercised before performing this action.


### Examples

1. Unauthorized deletion of a web server farm: If security is impacted with Microsoft.Web.serverfarms.Delete in Azure for AzureWebService, it could potentially lead to unauthorized deletion of a web server farm. This could result in the loss of critical resources and disrupt the availability of web applications hosted on that server farm.

2. Data loss or exposure: The deletion of a web server farm may also result in the loss or exposure of sensitive data. If proper backup and disaster recovery measures are not in place, the deletion could lead to permanent data loss. Additionally, if the server farm contains any sensitive information, such as customer data or intellectual property, its deletion could result in a data breach.

3. Service disruption: Deleting a web server farm without proper planning or coordination can cause service disruption for the applications hosted on that farm. This can impact the availability and performance of the applications, leading to potential financial losses and damage to the organization's reputation.

To mitigate these security risks, it is important to implement proper access controls, regularly backup critical data, and follow best practices for managing and monitoring Azure resources. Additionally, enabling multi-factor authentication and implementing role-based access control can help prevent unauthorized deletion of server farms.

### Remediation

#### Using Console

1. Monitor and Detect: Implement monitoring and alerting mechanisms to detect any unauthorized deletion of Azure Web Server Farms. This can be achieved by setting up Azure Monitor alerts or using Azure Security Center to monitor for any suspicious activities related to the deletion of server farms.

2. Role-Based Access Control (RBAC): Ensure that proper RBAC is implemented to restrict access to the Azure Web Server Farms. Only authorized personnel should have the necessary permissions to delete server farms. Regularly review and update RBAC roles and permissions to ensure that they align with the principle of least privilege.

3. Backup and Disaster Recovery: Implement a robust backup and disaster recovery strategy for Azure Web Server Farms. Regularly backup the server farms and store the backups in a separate location or storage account. This will help in quickly restoring the server farms in case of any unauthorized deletion or data loss.

Note: The step-by-step instructions for implementing these measures may vary depending on the specific Azure services and tools being used. It is recommended to refer to the official Azure documentation for detailed instructions and best practices.

#### Using CLI

1. Monitor and Detect: Implement monitoring and alerting mechanisms to detect any unauthorized deletion of Azure Web Server Farms. Utilize Azure Monitor to track and analyze activities related to Microsoft.Web.serverfarms.Delete. Set up alerts to notify the appropriate personnel when such activities are detected.

2. Role-Based Access Control (RBAC): Ensure that proper RBAC is implemented to restrict access to Azure Web Server Farms. Assign appropriate roles and permissions to users and groups based on the principle of least privilege. Regularly review and update access controls to prevent unauthorized deletion.

3. Backup and Disaster Recovery: Implement a robust backup and disaster recovery strategy for Azure Web Server Farms. Regularly backup critical data and configurations to a separate storage account or region. This will help in quickly restoring the server farms in case of accidental or unauthorized deletion. Test the recovery process periodically to ensure its effectiveness.

CLI Commands:
- To monitor and detect unauthorized deletion: Use Azure Monitor with Log Analytics to create a query that filters for Microsoft.Web.serverfarms.Delete activities and set up an alert based on the query results.
- To manage RBAC: Utilize Azure CLI commands like `az role assignment create` to assign roles and permissions to users and groups. Use `az role assignment list` to review existing assignments and `az role assignment delete` to remove any unauthorized assignments.
- To implement backup and disaster recovery: Utilize Azure CLI commands like `az webapp config backup create` to create backups of Azure Web Server Farms and `az webapp config backup restore` to restore them in case of deletion.

#### Using Python

1. Implement Role-Based Access Control (RBAC): Ensure that proper RBAC roles and permissions are assigned to users and service principals. Limit the access to the Microsoft.Web/serverfarms/delete action to only authorized individuals or groups. Regularly review and update RBAC assignments to prevent unauthorized deletion.

2. Enable Azure Resource Locks: Apply resource locks to Azure Web Server Farms to prevent accidental or unauthorized deletion. Resource locks can be set at the subscription, resource group, or individual resource level. Use the "CanNotDelete" lock type to prevent deletion of critical resources.

3. Enable Azure Monitor Alerts: Set up Azure Monitor alerts to notify administrators when any deletion activity is detected for Azure Web Server Farms. Configure the alert to trigger an email notification or integrate it with a ticketing system for immediate response and investigation.

Python script example to prevent unauthorized deletion of Azure Web Server Farms:

```python
import os
from azure.identity import DefaultAzureCredential
from azure.mgmt.web import WebSiteManagementClient

# Authenticate using DefaultAzureCredential
credential = DefaultAzureCredential()

# Specify your Azure subscription ID and resource group name
subscription_id = "<your-subscription-id>"
resource_group_name = "<your-resource-group-name>"

# Specify the name of the Azure Web Server Farm to protect
web_server_farm_name = "<your-web-server-farm-name>"

# Create the WebSiteManagementClient
web_client = WebSiteManagementClient(credential, subscription_id)

# Get the resource ID of the Azure Web Server Farm
web_server_farm_id = f"/subscriptions/{subscription_id}/resourceGroups/{resource_group_name}/providers/Microsoft.Web/serverfarms/{web_server_farm_name}"

# Apply a "CanNotDelete" lock to the Azure Web Server Farm
web_client.resource_groups.create_or_update(resource_group_name, {
    "location": "global",
    "locks": [
        {
            "name": "PreventDeletionLock",
            "level": "CanNotDelete",
            "notes": "Prevent unauthorized deletion of Azure Web Server Farm"
        }
    ]
}, raw=True, custom_headers={"If-Match": "*"}, resource_group_name=resource_group_name)

print("Lock applied successfully to prevent deletion of Azure Web Server Farm.")
```

Note: Make sure to install the required Azure SDK packages (`azure-identity`, `azure-mgmt-web`) before running the script.


 