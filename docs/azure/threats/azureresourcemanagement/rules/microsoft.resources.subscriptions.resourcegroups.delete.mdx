--- 
slug: Microsoft.Resources.subscriptions.resourceGroups.delete
eventname: Microsoft.Resources.subscriptions.resourceGroups.delete
title: Microsoft.Resources.subscriptions.resourceGroups.delete
sidebar_label: Microsoft.Resources.subscriptions.resourceGroups.delete
---
                       
### Event Information

#### Meaning

- The Microsoft.Resources.subscriptions.resourceGroups.delete event in Azure Resource Management signifies the deletion of a resource group within an Azure subscription.
- This event indicates that all resources within the specified resource group have been permanently removed.
- It is important to note that this event is irreversible and should be handled with caution, as it can result in the loss of all resources and data associated with the resource group.

### Remediation

#### Using Console

- Example: If security is impacted with Microsoft.Resources.subscriptions.resourceGroups.delete in Azure Resource Management, it means that a user or application has the ability to delete resource groups within the Azure subscription. This can lead to accidental or malicious deletion of critical resources, resulting in data loss or service disruption.

- Remediation Steps:
1. Sign in to the Azure portal using your Azure account credentials.
2. Navigate to the Azure Resource Manager (ARM) section by clicking on the "Resource groups" option in the left-hand menu.
3. In the resource groups list, locate the resource group that you want to secure against accidental deletion.
4. Click on the resource group to open its details page.
5. In the resource group details page, click on the "Access control (IAM)" option in the left-hand menu.
6. In the IAM page, click on the "+ Add" button to add a new role assignment.
7. In the "Add role assignment" panel, select the appropriate role that restricts the delete permission, such as "Contributor" or "Reader".
8. In the "Select" field, search and select the user or group that you want to assign the role to.
9. Click on the "Save" button to apply the role assignment.
10. Repeat steps 6-9 for any additional users or groups that need restricted delete permissions.
11. Verify that the user or group no longer has the ability to delete the resource group by attempting to delete it or checking the permissions in the IAM page.

Note: It is recommended to carefully consider the impact of restricting delete permissions and ensure that the appropriate users or groups have the necessary access to manage the resource group.

#### Using CLI

1. Impact on Security: When using the `Microsoft.Resources.subscriptions.resourceGroups.delete` action in Azure Resource Management, security can be impacted if proper access controls are not in place. This action allows the deletion of resource groups, which can result in the loss of all resources contained within the group, including virtual machines, databases, and storage accounts. If unauthorized users gain access to this action, they can potentially delete critical resources, leading to data loss and service disruption.

2. Remediation using AZU CLI: To remediate this security issue in Azure Resource Management using the Azure CLI, you can follow these steps:

   a. Grant appropriate RBAC permissions: Ensure that only authorized users or groups have the necessary permissions to perform the `Microsoft.Resources.subscriptions.resourceGroups.delete` action. Granting this permission should be limited to trusted administrators or specific service accounts.

   b. Enable Azure Resource Locks: Implement Azure Resource Locks on critical resource groups to prevent accidental deletion. Resource Locks can be applied at the resource group level to prevent any modifications, including deletion, by unauthorized users.

   c. Monitor and audit activity: Regularly monitor and review the Azure Activity Log and Azure Monitor logs to detect any unauthorized or suspicious activities related to resource group deletions. Implementing alerts and notifications can help in identifying potential security incidents.

Example CLI commands:

To grant RBAC permissions:
```
az role assignment create --role "Owner" --assignee <user or group principal ID> --scope /subscriptions/<subscription ID>/resourceGroups/<resource group name>
```

To apply a resource lock:
```
az lock create --name <lock name> --lock-type CanNotDelete --resource-group <resource group name> --resource-type Microsoft.Resources/resourceGroups --resource <resource group name>
```

To monitor activity logs:
```
az monitor activity-log list --resource-group <resource group name> --start-time <start time> --end-time <end time>
```

Please note that the specific commands may vary depending on your Azure CLI version and configuration.

#### Using Python

1. Example of security impact: When the Microsoft.Resources.subscriptions.resourceGroups.delete action is performed in Azure Resource Management, it can potentially lead to the deletion of resource groups and all the resources contained within them. This action can have a significant security impact if performed unintentionally or by unauthorized individuals, resulting in the loss of critical data and services.

2. Remediation for Azure Resource Management using Python: To mitigate the security impact of the Microsoft.Resources.subscriptions.resourceGroups.delete action in Azure, you can implement additional safeguards and access controls. Here's an example of how you can use the Azure SDK for Python (azure-mgmt-resource) to enforce stricter security measures:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.resource import ResourceManagementClient

# Authenticate using default credentials
credential = DefaultAzureCredential()

# Specify your Azure subscription ID
subscription_id = 'your_subscription_id'

# Specify the resource group and resource name to be deleted
resource_group_name = 'your_resource_group_name'

# Create a ResourceManagementClient instance
resource_client = ResourceManagementClient(credential, subscription_id)

# Check if the resource group exists before deletion
if resource_client.resource_groups.check_existence(resource_group_name):
    # Perform additional security checks here if required

    # Delete the resource group
    resource_client.resource_groups.begin_delete(resource_group_name)
else:
    print("Resource group does not exist.")
```

This script uses the Azure Identity library to authenticate with default credentials and the Azure Management Resource library to interact with Azure Resource Management. It first checks if the specified resource group exists and performs additional security checks if needed before initiating the deletion process.

Note: Make sure to install the required Python packages (`azure-identity` and `azure-mgmt-resource`) before running the script.


 