--- 
slug: Microsoft.Resources.subscriptions.resourceGroups.delete
eventname: Microsoft.Resources.subscriptions.resourceGroups.delete
title: Microsoft.Resources.subscriptions.resourceGroups.delete
sidebar_label: Microsoft.Resources.subscriptions.resourceGroups.delete
---
                       
### Event Information

- The Microsoft.Resources.subscriptions.resourceGroups.delete event in Azure for Azure Resource Management indicates that a resource group has been deleted within an Azure subscription.
- This event signifies that all resources within the resource group, including virtual machines, storage accounts, and network resources, have been permanently removed.
- It is important to note that this event is irreversible, and all data and configurations associated with the deleted resource group will be lost. Therefore, it is crucial to ensure that the deletion is intended and that any necessary backups or data transfers have been performed beforehand.


### Examples

1. Unauthorized deletion of resource groups: If security is impacted with Microsoft.Resources.subscriptions.resourceGroups.delete in Azure, it could potentially lead to unauthorized deletion of resource groups. This can result in the loss of critical resources and data, impacting the availability and functionality of the Azure environment.

2. Data exposure and leakage: In some cases, the deletion of resource groups may not completely remove all associated resources, such as storage accounts or virtual machines. If security is compromised, an attacker could potentially gain access to these resources before they are fully deleted, leading to data exposure and leakage.

3. Impact on compliance and auditability: Deletion of resource groups without proper authorization and control can have a significant impact on compliance and auditability. It becomes difficult to track and monitor the changes made to the Azure environment, potentially leading to non-compliance with regulatory requirements and making it challenging to investigate security incidents.

### Remediation

#### Using Console

To remediate unauthorized deletion of resource groups in Azure using the Azure console, you can follow these steps:

1. Enable RBAC (Role-Based Access Control): Implement RBAC to ensure that only authorized users have the necessary permissions to delete resource groups. This can be done by following these steps:
   - Go to the Azure portal and navigate to the resource group you want to secure.
   - Click on "Access control (IAM)" in the left-hand menu.
   - Click on "Add" and select the appropriate role (e.g., Owner, Contributor, or User Access Administrator).
   - Specify the user or group that should have the role and click on "Save".

2. Enable Azure Resource Locks: Resource locks can be used to prevent accidental deletion of resource groups. Follow these steps to enable resource locks:
   - Go to the Azure portal and navigate to the resource group you want to protect.
   - Click on "Locks" in the left-hand menu.
   - Click on "Add" and provide a name and description for the lock.
   - Select the lock type as "Delete" to prevent deletion of the resource group.
   - Click on "OK" to save the lock.

3. Enable Azure Resource Manager Policies: Azure Resource Manager policies can be used to enforce specific rules and restrictions on resource groups. To enable policies:
   - Go to the Azure portal and navigate to the subscription level.
   - Click on "Policies" in the left-hand menu.
   - Click on "Assign policy" and select the desired policy from the list.
   - Configure the policy parameters as per your requirements.
   - Click on "Assign" to apply the policy to the subscription.

By implementing these steps, you can mitigate the risk of unauthorized deletion of resource groups in Azure and ensure better security, compliance, and auditability.

#### Using CLI

To remediate unauthorized deletion of resource groups in Azure using Azure CLI commands, you can follow these steps:

1. Implement Role-Based Access Control (RBAC): Grant appropriate permissions to users and groups to ensure that only authorized individuals can delete resource groups. Use the `az role assignment create` command to assign the necessary roles to users or groups. For example:

   ```
   az role assignment create --role "Contributor" --assignee <user or group principal ID> --scope /subscriptions/<subscription ID>/resourceGroups/<resource group name>
   ```

2. Enable Azure Resource Manager Locks: Apply locks to resource groups to prevent accidental or unauthorized deletion. Use the `az lock create` command to create a lock on the resource group. For example:

   ```
   az lock create --name <lock name> --lock-type CanNotDelete --resource-group <resource group name>
   ```

3. Enable Azure Resource Manager Policies: Implement policies to enforce specific rules and restrictions on resource group deletion. Use the `az policy assignment create` command to assign a policy to the resource group. For example:

   ```
   az policy assignment create --name <policy assignment name> --policy <policy definition ID> --scope /subscriptions/<subscription ID>/resourceGroups/<resource group name>
   ```

By implementing RBAC, resource locks, and policies, you can mitigate the risk of unauthorized deletion of resource groups in Azure and ensure compliance with security and regulatory requirements.

#### Using Python

To remediate unauthorized deletion of resource groups in Azure, you can take the following steps:

1. Implement Role-Based Access Control (RBAC): Ensure that proper RBAC permissions are assigned to users and groups. Limit the delete permission for resource groups to only authorized individuals or roles. Regularly review and update these permissions to maintain the principle of least privilege.

2. Enable Azure Resource Manager Locks: Use Azure Resource Manager locks to prevent accidental or unauthorized deletion of resource groups. Apply the "CanNotDelete" lock to critical resource groups to ensure they cannot be deleted without proper authorization.

3. Enable Azure Resource Manager Audit Logs: Enable Azure Resource Manager audit logs to track and monitor any changes made to resource groups. This will help in identifying unauthorized deletion attempts and provide an audit trail for investigation and compliance purposes.

Here is an example of a Python script that can be used to implement RBAC permissions for resource groups:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.authorization import AuthorizationManagementClient
from azure.mgmt.authorization.models import RoleAssignmentCreateParameters

# Authenticate using DefaultAzureCredential
credential = DefaultAzureCredential()

# Create an instance of the AuthorizationManagementClient
authorization_client = AuthorizationManagementClient(credential, "<subscription_id>")

# Define the role assignment parameters
role_assignment = RoleAssignmentCreateParameters(
    role_definition_id="<role_definition_id>",
    principal_id="<principal_id>",
    principal_type="ServicePrincipal"
)

# Create the role assignment for the resource group
authorization_client.role_assignments.create(
    "<resource_group_id>",
    "<role_assignment_name>",
    role_assignment
)
```

Note: Replace `<subscription_id>`, `<role_definition_id>`, `<principal_id>`, `<resource_group_id>`, and `<role_assignment_name>` with the appropriate values for your environment.

Please note that the above script is just an example and may need to be modified based on your specific requirements and environment.


 