--- 
slug: Microsoft.DBforMariaDB.servers.administrators.delete
eventname: Microsoft.DBforMariaDB.servers.administrators.delete
title: Microsoft.DBforMariaDB.servers.administrators.delete
sidebar_label: Microsoft.DBforMariaDB.servers.administrators.delete
---
                       
### Event Information

1. The Microsoft.DBforMariaDB.servers.administrators.delete event in Azure for Azure Database Service indicates that a user or process has deleted an administrator for a MariaDB server in Azure.
2. This event signifies a change in the administrative access to the MariaDB server, where an administrator account has been removed.
3. It is important to monitor this event to ensure that only authorized individuals or processes are making changes to the administrators of the MariaDB server, and to track any potential unauthorized access or changes.


### Examples

1. Unauthorized deletion of administrators: If security is impacted with Microsoft.DBforMariaDB.servers.administrators.delete in Azure for Azure Database Service, it could potentially allow unauthorized individuals to delete administrators from the MariaDB server. This could lead to a loss of control and compromise the security of the database.

2. Privilege escalation: The security impact of this action could also result in privilege escalation. If an unauthorized user gains access to delete administrators, they may be able to elevate their privileges and gain unauthorized access to sensitive data or perform malicious actions within the database.

3. Data loss or corruption: In some cases, the deletion of administrators could lead to data loss or corruption. If an administrator with critical permissions is deleted, it may result in the loss of important configuration settings or the ability to properly manage and secure the database. This could potentially impact the availability and integrity of the data stored in the Azure Database Service.

### Remediation

#### Using Console

1. Identify the affected Azure Database Service: Determine which Azure Database Service is impacted by the unauthorized deletion of administrators. This can be done by reviewing the logs or monitoring alerts for any suspicious activities related to the Microsoft.DBforMariaDB.servers.administrators.delete action.

2. Restore deleted administrators: If unauthorized deletion of administrators is detected, it is important to restore the deleted administrators as soon as possible. This can be done by following these steps:
   - Access the Azure portal and navigate to the affected Azure Database Service.
   - Go to the "Settings" section and select "Administrators".
   - Click on the "Add" button to add a new administrator.
   - Provide the necessary details for the new administrator, such as username and password.
   - Assign appropriate permissions to the administrator based on the principle of least privilege.
   - Save the changes and ensure that the new administrator is successfully added.

3. Review and enhance security measures: To prevent future unauthorized deletion of administrators, it is important to review and enhance the security measures for the Azure Database Service. This can include:
   - Implementing strong access controls and authentication mechanisms.
   - Regularly monitoring and reviewing logs and alerts for any suspicious activities.
   - Enabling multi-factor authentication for administrators.
   - Regularly updating and patching the database service to ensure it is protected against known vulnerabilities.
   - Educating administrators and users about best practices for securing the database service and avoiding potential security risks.

#### Using CLI

To remediate the unauthorized deletion of administrators in Azure for Azure Database Service, you can take the following steps using Azure CLI:

1. Monitor and detect unauthorized deletion:
   - Enable Azure Monitor to track and alert on any changes made to the administrators of the MariaDB server.
   - Set up alerts to notify administrators when any deletion of administrators is detected.

2. Implement access controls and permissions:
   - Ensure that only authorized individuals have the necessary permissions to delete administrators.
   - Regularly review and update the access controls to minimize the risk of unauthorized deletions.
   - Implement role-based access control (RBAC) to restrict access to the Azure Database Service and its administrators.

3. Enable auditing and logging:
   - Enable Azure Database Service auditing to track and log all activities related to administrators.
   - Store the audit logs in a secure location and regularly review them for any suspicious activities or unauthorized deletions.
   - Consider integrating the audit logs with a Security Information and Event Management (SIEM) system for centralized monitoring and analysis.

CLI commands:
- To enable Azure Monitor for the MariaDB server:
  ```
  az monitor diagnostic-settings create --name <diagnostic-settings-name> --resource <resource-id> --logs '[{"category": "Administrators", "enabled": true}]'
  ```

- To create a custom RBAC role with limited permissions for administrators:
  ```
  az role definition create --name "Limited Administrator" --actions "Microsoft.DBforMariaDB/servers/administrators/delete" --assignable-scopes <scope>
  ```

- To enable auditing for the MariaDB server:
  ```
  az mariadb server configuration set --name "auditingEnabled" --value "On" --resource-group <resource-group> --server-name <server-name>
  ```

Note: Replace `<diagnostic-settings-name>`, `<resource-id>`, `<scope>`, `<resource-group>`, and `<server-name>` with the appropriate values specific to your environment.

#### Using Python

To remediate the unauthorized deletion of administrators in Azure for Azure Database Service, you can take the following steps:

1. Implement Role-Based Access Control (RBAC): Ensure that proper RBAC roles and permissions are assigned to administrators. Limit the number of users with delete permissions and regularly review and audit these permissions to prevent unauthorized deletion.

2. Enable Azure Active Directory (AAD) authentication: By enabling AAD authentication for the Azure Database Service, you can enforce user authentication using Azure AD credentials. This adds an additional layer of security and prevents unauthorized access to the database.

3. Enable auditing and monitoring: Enable auditing and monitoring features provided by Azure for the Azure Database Service. This will allow you to track and monitor any changes made to administrators, including deletions. Regularly review the audit logs to identify any suspicious activities and take appropriate actions.

Here is an example of a Python script that uses the Azure SDK for Python to enable AAD authentication for an Azure Database for MariaDB server:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.rdbms import mariadb

# Set the credentials
credential = DefaultAzureCredential()

# Set the subscription ID and resource group name
subscription_id = 'your_subscription_id'
resource_group_name = 'your_resource_group_name'

# Set the server name and database name
server_name = 'your_server_name'
database_name = 'your_database_name'

# Create the MariaDB management client
client = mariadb.MariadbManagementClient(credential, subscription_id)

# Enable AAD authentication for the server
client.servers.begin_update(resource_group_name, server_name, {
    'identity': {
        'type': 'SystemAssigned'
    }
})

# Enable AAD authentication for the database
client.databases.begin_update(resource_group_name, server_name, database_name, {
    'identity': {
        'type': 'SystemAssigned'
    }
})
```

Please note that you need to install the required Azure SDK for Python packages (`azure-identity` and `azure-mgmt-rdbms-mariadb`) before running this script.


 