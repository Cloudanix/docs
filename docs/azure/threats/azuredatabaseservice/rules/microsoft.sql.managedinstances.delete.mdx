--- 
slug: Microsoft.Sql.managedInstances.delete
eventname: Microsoft.Sql.managedInstances.delete
title: Microsoft.Sql.managedInstances.delete
sidebar_label: Microsoft.Sql.managedInstances.delete
---
                       
### Event Information

#### Meaning

- The Microsoft.Sql.managedInstances.delete event in AzureRealTime for AzureDatabaseService indicates that a managed instance of SQL Server in Azure has been deleted.
- This event signifies that the specified managed instance, along with all its associated databases and resources, has been permanently removed from the Azure environment.
- It is important to note that this event is irreversible and all data and configurations within the managed instance will be lost. Therefore, it is crucial to have proper backups and consider the implications before triggering this event.

#### Example

1. Example of security impact: If an unauthorized user gains access to the Azure portal or has compromised credentials, they may be able to trigger the Microsoft.Sql.managedInstances.delete event in the Azure Real-time Analytics service for Azure Database Service. This event can lead to the deletion of a managed instance, resulting in the loss of critical data and potential disruption of business operations.

Remediation:
- Enable multi-factor authentication (MFA) for all user accounts accessing the Azure portal to prevent unauthorized access.
- Implement role-based access control (RBAC) to ensure that only authorized users have the necessary permissions to delete managed instances.
- Regularly review and audit user access and permissions to identify any potential security vulnerabilities.

Azure CLI command to enable MFA for a user:
```
az ad user update --id <user-id> --force-change-password-next-login true
```

Azure CLI command to assign RBAC role to a user:
```
az role assignment create --assignee <user-id> --role <role-name> --scope <scope>
```

2. Example of security impact: If a malicious insider gains access to the Azure Resource Manager API or has compromised credentials, they may programmatically trigger the Microsoft.Sql.managedInstances.delete event in the Azure Real-time Analytics service for Azure Database Service. This event can result in the unauthorized deletion of managed instances, leading to data loss and potential disruption of business operations.

Remediation:
- Implement strong access controls and monitoring mechanisms for the Azure Resource Manager API to prevent unauthorized access.
- Regularly rotate and secure credentials used to access the Azure Resource Manager API to minimize the risk of compromise.
- Enable Azure Monitor alerts to notify administrators of any suspicious or unexpected activities related to the deletion of managed instances.

Azure CLI command to create an Azure Monitor alert:
```
az monitor metrics alert create --name <alert-name> --resource-group <resource-group> --resource <resource-id> --condition <condition> --action <action>
```

3. Example of security impact: If a misconfiguration or vulnerability exists in the Azure Real-time Analytics service or the Azure Database Service, an attacker may exploit it to trigger the Microsoft.Sql.managedInstances.delete event. This event can lead to the unauthorized deletion of managed instances, resulting in data loss and potential disruption of business operations.

Remediation:
- Regularly assess and apply security updates and patches to the Azure Real-time Analytics service and the Azure Database Service to mitigate known vulnerabilities.
- Implement network security groups (NSGs) and virtual network service endpoints to restrict access to the Azure Real-time Analytics service and the Azure Database Service.
- Enable Azure Security Center and leverage its recommendations to identify and remediate misconfigurations or vulnerabilities in the Azure environment.

Azure CLI command to apply a security update to an Azure service:
```
az vm extension set --resource-group <resource-group> --vm-name <vm-name> --name <extension-name> --publisher <publisher-name> --version <version>
```

Azure CLI command to create a network security group (NSG):
```
az network nsg create --resource-group <resource-group> --name <nsg-name>
```

Azure CLI command to enable Azure Security Center:
```
az security auto-provisioning-setting create --name <setting-name> --resource-group <resource-group> --auto-provision <true/false>
```


 