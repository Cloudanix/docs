--- 
slug: Microsoft.Sql.managedInstances.keys.read
eventname: Microsoft.Sql.managedInstances.keys.read
title: Microsoft.Sql.managedInstances.keys.read
sidebar_label: Microsoft.Sql.managedInstances.keys.read
---
                       
### Event Information

#### Meaning

1. The Microsoft.Sql.managedInstances.keys.read event in AzureRealTime for AzureDatabaseService refers to the event of reading the keys for a managed instance in Azure SQL Database.

2. This event is triggered when someone or a process retrieves the encryption keys associated with a managed instance in Azure SQL Database.

3. The event is important for auditing and monitoring purposes, as it allows tracking and recording of any access to the encryption keys, which are crucial for securing the data stored in the managed instance.

#### Example

1. Example of security impact: If an unauthorized user gains access to the Microsoft.Sql.managedInstances.keys.read event in Azure Real-time Monitoring for Azure Database Service, they may be able to retrieve sensitive information such as database connection strings or encryption keys. This can lead to unauthorized access to the database and potential data breaches.

Remediation:
- Regularly review and update access control policies for Azure Database Service to ensure that only authorized users have access to the Microsoft.Sql.managedInstances.keys.read event.
- Implement strong authentication mechanisms such as multi-factor authentication (MFA) to prevent unauthorized access to Azure resources.
- Monitor and analyze logs and alerts generated by Azure Real-time Monitoring to detect any suspicious activities related to the Microsoft.Sql.managedInstances.keys.read event.

Example CLI command to review access control policies for Azure Database Service:
```
az sql instance ad-admin list --resource-group <resource-group-name> --name <instance-name>
```

Example CLI command to enable MFA for Azure Database Service:
```
az sql instance update --resource-group <resource-group-name> --name <instance-name> --additional-administrators <email-address> --enable-mfa true
```

Example CLI command to monitor logs and alerts in Azure Real-time Monitoring:
```
az monitor activity-log list --resource-group <resource-group-name> --resource-type Microsoft.Sql/managedInstances --query "[?category=='Administrative' && operationName.value=='Microsoft.Sql/managedInstances/keys/read']"
```


2. Example of security impact: If the Microsoft.Sql.managedInstances.keys.read event in Azure Real-time Monitoring for Azure Database Service is misconfigured, it may result in excessive logging or exposure of sensitive information in the logs. This can lead to increased risk of unauthorized access or data leakage.

Remediation:
- Review and update the logging configuration for Azure Real-time Monitoring to ensure that only necessary events are logged, and sensitive information is not exposed.
- Regularly monitor and analyze the logs generated by Azure Real-time Monitoring to detect any anomalies or suspicious activities related to the Microsoft.Sql.managedInstances.keys.read event.
- Implement proper access controls and permissions for Azure Real-time Monitoring to restrict access to sensitive logs and events.

Example CLI command to review logging configuration for Azure Real-time Monitoring:
```
az monitor diagnostic-settings show --resource <resource-id> --name <diagnostic-settings-name>
```

Example CLI command to update logging configuration for Azure Real-time Monitoring:
```
az monitor diagnostic-settings update --resource <resource-id> --name <diagnostic-settings-name> --logs '[{"category": "Administrative", "enabled": false}]'
```

Example CLI command to monitor logs in Azure Real-time Monitoring:
```
az monitor activity-log list --resource-group <resource-group-name> --resource-type Microsoft.Sql/managedInstances --query "[?category=='Administrative' && operationName.value=='Microsoft.Sql/managedInstances/keys/read']"
```


3. Example of security impact: If the Microsoft.Sql.managedInstances.keys.read event in Azure Real-time Monitoring for Azure Database Service is triggered excessively or by unauthorized entities, it may result in performance degradation or resource exhaustion. This can lead to service disruptions and impact the availability of the database service.

Remediation:
- Implement rate limiting or throttling mechanisms to prevent excessive triggering of the Microsoft.Sql.managedInstances.keys.read event.
- Regularly monitor and analyze the usage patterns and resource utilization of Azure Database Service to detect any abnormal activities related to the Microsoft.Sql.managedInstances.keys.read event.
- Implement proper access controls and permissions for Azure Real-time Monitoring to restrict access to the event and prevent unauthorized triggering.

Example CLI command to implement rate limiting for Azure Database Service:
```
az sql instance update --resource-group <resource-group-name> --name <instance-name> --max-requests-per-minute <limit>
```

Example CLI command to monitor resource utilization of Azure Database Service:
```
az monitor metrics list --resource <resource-id> --metric "Percentage CPU" --interval PT5M
```

Example CLI command to restrict access to Azure Real-time Monitoring:
```
az role assignment create --role "Reader" --assignee <principal-id> --scope <resource-id>
```


 