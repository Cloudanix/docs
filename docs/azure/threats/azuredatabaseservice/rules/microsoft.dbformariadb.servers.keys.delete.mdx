--- 
slug: Microsoft.DBforMariaDB.servers.keys.delete
eventname: Microsoft.DBforMariaDB.servers.keys.delete
title: Microsoft.DBforMariaDB.servers.keys.delete
sidebar_label: Microsoft.DBforMariaDB.servers.keys.delete
---
                       
### Event Information

1. The Microsoft.DBforMariaDB.servers.keys.delete event in Azure for Azure Database Service indicates that a key associated with a MariaDB server has been deleted.
2. This event typically occurs when a user or an automated process removes a key that was previously used for authentication or encryption purposes.
3. It is important to monitor this event as it can help track any unauthorized or accidental key deletions, and take appropriate actions to ensure the security and integrity of the MariaDB server.


### Examples

1. Unauthorized access: If security is impacted with Microsoft.DBforMariaDB.servers.keys.delete in Azure for Azure Database Service, it could potentially allow unauthorized individuals to delete encryption keys associated with the MariaDB server. This could lead to unauthorized access to sensitive data stored in the database, compromising the security and confidentiality of the data.

2. Data loss: Deleting encryption keys associated with the MariaDB server can result in the loss of access to encrypted data. If the keys are deleted without proper backup or recovery mechanisms in place, it may become impossible to decrypt and access the data stored in the database. This can lead to data loss and potential business impact.

3. Compliance violations: Deleting encryption keys without proper authorization or following compliance requirements can result in compliance violations. Organizations may have specific data protection and encryption requirements mandated by industry regulations or internal policies. Deleting encryption keys without proper controls and documentation can lead to non-compliance and potential legal and financial consequences.

### Remediation

#### Using Console

1. Unauthorized access:
- Step 1: Log in to the Azure portal using your credentials.
- Step 2: Navigate to the Azure Database Service that is associated with the MariaDB server.
- Step 3: Select the specific MariaDB server that you want to remediate.
- Step 4: Go to the "Keys" section in the Azure portal for the selected MariaDB server.
- Step 5: Identify the encryption keys associated with the server and ensure that they are properly backed up.
- Step 6: Implement access controls and permissions to restrict unauthorized access to the encryption keys.
- Step 7: Regularly monitor and audit access to the encryption keys to detect any unauthorized activities.

2. Data loss:
- Step 1: Log in to the Azure portal using your credentials.
- Step 2: Navigate to the Azure Database Service that is associated with the MariaDB server.
- Step 3: Select the specific MariaDB server that you want to remediate.
- Step 4: Go to the "Keys" section in the Azure portal for the selected MariaDB server.
- Step 5: Ensure that proper backup and recovery mechanisms are in place for the encryption keys.
- Step 6: Regularly test the backup and recovery processes to ensure they are functioning correctly.
- Step 7: Implement a disaster recovery plan to mitigate the risk of data loss in case of key deletion.

3. Compliance violations:
- Step 1: Identify the specific compliance requirements applicable to your organization, such as industry regulations or internal policies.
- Step 2: Review the documentation and guidelines provided by the compliance standards to understand the encryption key management requirements.
- Step 3: Implement proper controls and documentation for encryption key management, including authorization processes, access controls, and audit trails.
- Step 4: Regularly review and update the encryption key management processes to ensure compliance with the applicable standards.
- Step 5: Conduct periodic audits and assessments to validate compliance with the encryption key management requirements.
- Step 6: Implement remediation actions if any non-compliance issues are identified, including documentation updates, process improvements, or additional training for personnel.

#### Using CLI

1. To remediate unauthorized access related to Microsoft.DBforMariaDB.servers.keys.delete in Azure for Azure Database Service, you can take the following steps using Azure CLI:

- Identify and revoke any unauthorized access to the Azure Database Service by reviewing and updating the access control policies.
- Implement strong authentication mechanisms such as multi-factor authentication (MFA) to prevent unauthorized individuals from accessing the Azure Database Service.
- Regularly monitor and review access logs and audit trails to detect any suspicious activities and take appropriate actions.

2. To remediate data loss related to deleting encryption keys associated with the MariaDB server in Azure for Azure Database Service, you can follow these steps using Azure CLI:

- Ensure that regular backups of the encryption keys are performed and securely stored in a separate location.
- Implement a robust key management and recovery process to ensure that deleted keys can be restored or regenerated.
- Regularly test the backup and recovery mechanisms to validate their effectiveness and reliability.

3. To remediate compliance violations related to deleting encryption keys without proper authorization or following compliance requirements in Azure for Azure Database Service, you can take the following actions using Azure CLI:

- Implement strict access controls and role-based access control (RBAC) policies to ensure that only authorized individuals can perform key deletion operations.
- Document and enforce clear procedures and guidelines for key management, including obtaining proper authorization and following compliance requirements.
- Regularly audit and review key management activities to ensure compliance with industry regulations and internal policies.

#### Using Python

1. Unauthorized access:
- Implement strong access controls and authentication mechanisms to prevent unauthorized access to the Azure Database Service.
- Regularly monitor and review access logs and audit trails to detect any suspicious activities or unauthorized access attempts.
- Enable multi-factor authentication (MFA) for user accounts to add an extra layer of security.

2. Data loss:
- Regularly backup the encryption keys associated with the MariaDB server to ensure they can be recovered in case of accidental deletion.
- Implement a robust disaster recovery plan that includes regular backups and testing of data restoration processes.
- Consider implementing a key management solution that provides centralized control and backup capabilities for encryption keys.

3. Compliance violations:
- Ensure that proper authorization and approval processes are in place for deleting encryption keys.
- Implement logging and auditing mechanisms to track and document all key deletion activities.
- Regularly review and update compliance policies and procedures to align with industry regulations and internal requirements.

Python script for deleting encryption keys in Azure Database Service using the `azure-mgmt-rdbms` library:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.rdbms import MariaDBManagementClient

# Set the Azure subscription ID and resource group name
subscription_id = 'your_subscription_id'
resource_group_name = 'your_resource_group_name'

# Set the Azure credentials
credentials = DefaultAzureCredential()

# Create the MariaDB management client
client = MariaDBManagementClient(credentials, subscription_id)

# Set the MariaDB server name and resource ID
server_name = 'your_mariadb_server_name'
resource_id = f'/subscriptions/{subscription_id}/resourceGroups/{resource_group_name}/providers/Microsoft.DBforMariaDB/servers/{server_name}'

# Delete the encryption keys associated with the MariaDB server
client.servers.keys.delete(resource_id, 'default')

print('Encryption keys deleted successfully.')
```

Note: Make sure to install the required libraries (`azure-identity` and `azure-mgmt-rdbms`) before running the script.


 