--- 
slug: Microsoft.DBforMariaDB.servers.delete
eventname: Microsoft.DBforMariaDB.servers.delete
title: Microsoft.DBforMariaDB.servers.delete
sidebar_label: Microsoft.DBforMariaDB.servers.delete
---
                       
### Event Information

- The Microsoft.DBforMariaDB.servers.delete event in Azure for Azure Database Service indicates that a deletion operation has been performed on a MariaDB server within the Azure platform.
- This event signifies that a specific MariaDB server instance has been permanently removed from the Azure Database Service.
- It is important to note that this event does not only remove the server, but also all associated databases and data within them. Therefore, it is crucial to ensure that all necessary backups and data exports have been performed before initiating this deletion event.


### Examples

1. Unauthorized deletion: If security is impacted with Microsoft.DBforMariaDB.servers.delete in Azure for Azure Database Service, one example could be an unauthorized user gaining access to the Azure portal or API and deleting a MariaDB server. This could result in the loss of critical data and disruption of services.

2. Lack of access controls: Another example could be the absence of proper access controls and permissions for managing MariaDB servers. If users with inappropriate privileges are able to delete servers, it can lead to accidental or intentional deletion of important databases, impacting security.

3. Insufficient backup and recovery mechanisms: If security is impacted, it could also mean that there are inadequate backup and recovery mechanisms in place. In the event of a server deletion, without proper backups, it may not be possible to restore the data, leading to data loss and potential security breaches.

### Remediation

#### Using Console

To remediate unauthorized deletion, lack of access controls, and insufficient backup and recovery mechanisms in Azure for Azure Database Service (specifically for Microsoft.DBforMariaDB.servers.delete), you can follow these step-by-step instructions:

1. Unauthorized deletion:
   - Enable Azure Active Directory (Azure AD) authentication for your Azure portal and API access. This ensures that only authorized users with appropriate permissions can access and manage resources.
   - Implement multi-factor authentication (MFA) for all user accounts to add an extra layer of security and prevent unauthorized access.
   - Regularly review and update access control policies to ensure that only necessary permissions are granted to users, reducing the risk of unauthorized deletion.

2. Lack of access controls:
   - Implement role-based access control (RBAC) in Azure to assign specific roles and permissions to users based on their responsibilities.
   - Create custom RBAC roles if needed, ensuring that only authorized users have the necessary privileges to manage MariaDB servers.
   - Regularly review and audit access controls to identify any misconfigurations or inappropriate permissions.

3. Insufficient backup and recovery mechanisms:
   - Enable automated backups for your MariaDB servers in Azure. This ensures that regular backups are taken and can be used for recovery in case of accidental deletion.
   - Configure backup retention policies to retain backups for an appropriate duration, considering your data retention requirements and compliance standards.
   - Test the backup and recovery process periodically to ensure that the backups are valid and can be successfully restored when needed.

By following these steps, you can mitigate the risks associated with unauthorized deletion, lack of access controls, and insufficient backup and recovery mechanisms in Azure for Azure Database Service.

#### Using CLI

1. Unauthorized deletion: To remediate unauthorized deletion of Azure Database Service for MariaDB servers, you can take the following steps using Azure CLI:

- Enable Azure Active Directory (Azure AD) authentication for the MariaDB server to ensure that only authorized users can access and manage it. Use the `az mariadb server ad-admin create` command to create an Azure AD admin for the server.

- Implement role-based access control (RBAC) to assign appropriate permissions to users. Use the `az role assignment create` command to assign roles such as "Contributor" or "Reader" to users or groups, limiting the ability to delete servers to only authorized individuals.

- Enable auditing and monitoring for the MariaDB server to track any unauthorized access or deletion attempts. Use the `az mariadb server update --auditing-enabled true` command to enable auditing, and configure log analytics or Azure Monitor to monitor the server's activity logs.

2. Lack of access controls: To address the lack of access controls for managing MariaDB servers in Azure, you can use the following Azure CLI commands:

- Review and update the existing access controls for the MariaDB server. Use the `az mariadb server firewall-rule list` command to list the firewall rules and ensure that only necessary IP addresses or ranges are allowed access.

- Implement virtual network service endpoints to restrict access to the MariaDB server from specific virtual networks. Use the `az mariadb server vnet-rule create` command to create a virtual network service endpoint rule for the server.

- Regularly review and update user permissions and roles using Azure RBAC. Use the `az role assignment create` command to assign appropriate roles to users or groups, ensuring that only authorized individuals have the necessary privileges.

3. Insufficient backup and recovery mechanisms: To address insufficient backup and recovery mechanisms for Azure Database Service for MariaDB, you can use the following Azure CLI commands:

- Enable automated backups for the MariaDB server. Use the `az mariadb server update --backup-retention` command to set the desired backup retention period, ensuring that regular backups are taken.

- Configure geo-redundant backups to store backups in a secondary region for additional data protection. Use the `az mariadb server update --geo-redundant-backup` command to enable geo-redundant backups.

- Test the backup and recovery process regularly to ensure that backups are valid and can be restored successfully. Use the `az mariadb server restore` command to restore a backup to a new server for testing purposes.

#### Using Python

1. Unauthorized deletion: To remediate unauthorized deletion of Azure Database Service for MariaDB servers, you can implement the following steps using Python:

```python
from azure.identity import DefaultAzureCredential
from azure.mgmt.rdbms import MariaDBManagementClient

# Authenticate using default credentials
credential = DefaultAzureCredential()

# Specify your Azure subscription ID and resource group name
subscription_id = 'your_subscription_id'
resource_group_name = 'your_resource_group_name'

# Specify the name of the MariaDB server to be deleted
server_name = 'your_mariadb_server_name'

# Create the MariaDB management client
client = MariaDBManagementClient(credential, subscription_id)

# Delete the MariaDB server
client.servers.begin_delete(resource_group_name, server_name)
```

2. Lack of access controls: To remediate the lack of access controls for managing MariaDB servers in Azure, you can use the Azure CLI with Python to set appropriate access controls and permissions. Here's an example:

```python
import subprocess

# Specify the name of the MariaDB server
server_name = 'your_mariadb_server_name'

# Specify the Azure resource group and subscription ID
resource_group_name = 'your_resource_group_name'
subscription_id = 'your_subscription_id'

# Set the appropriate access controls using Azure CLI
subprocess.run(['az', 'mysql', 'server', 'update', '--name', server_name, '--resource-group', resource_group_name, '--subscription', subscription_id, '--assign-access', 'true'])
```

3. Insufficient backup and recovery mechanisms: To remediate insufficient backup and recovery mechanisms for Azure Database Service for MariaDB, you can use the Azure CLI with Python to configure regular backups. Here's an example:

```python
import subprocess

# Specify the name of the MariaDB server
server_name = 'your_mariadb_server_name'

# Specify the Azure resource group and subscription ID
resource_group_name = 'your_resource_group_name'
subscription_id = 'your_subscription_id'

# Configure regular backups using Azure CLI
subprocess.run(['az', 'mysql', 'server', 'backup', 'create', '--name', server_name, '--resource-group', resource_group_name, '--subscription', subscription_id, '--retention', '7'])
```

These Python scripts demonstrate how to remediate unauthorized deletion, lack of access controls, and insufficient backup and recovery mechanisms for Azure Database Service for MariaDB. Remember to replace the placeholder values with your actual resource names and credentials.


 